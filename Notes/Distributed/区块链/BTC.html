<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BTC | HSAIO</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="alternate" type="application/atom+xml" href="https://hsaio.codenoob.top/atom.xml" title="HSAIO Atom Feed">
    <link rel="alternate" type="application/json" href="https://hsaio.codenoob.top/feed.json" title="HSAIO JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://hsaio.codenoob.top/rss.xml" title="HSAIO RSS Feed">
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png">
    <meta name="description" content="Happy Study - Knowledge, Notes, documents, and more all in one.">
    <meta property="og:url" content="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html">
    <meta property="og:site_name" content="HSAIO">
    <meta property="og:title" content="BTC">
    <meta property="og:description" content="BTC ：比特币（Bitcoin），一种数字货币，由 BTC 区块链发行。 官方文档; 架构 一些主机根据 BTC 协议相互通信，组成了 BTC 网络。这些主机称为 BTC 节点。; 在区块链中存储所有交易信息。; 每个节点上会存储一个区块链的完整副本。; 一些节点会收集网络上广播的交易，打包写入最新的一个区块，然后将新区块广播给其它节点。; 基于 PoW ">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="HSAIO">
    <meta property="article:author" content="MIFSH">
    <meta name="baidu-site-verification" content="code-E87rwPtGLL">
    <meta name="google-site-verification" content="i9llgSGLwQ5xvWGIdJRONZfTeCpJZxhjTPnZxfljuGo">
    <meta name="msvalidate.01" content="B9A0C43AD3B1BD529335A2616F235E46">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.e485dc9d.css" as="style"><link rel="preload" href="/assets/js/app.79d9fc16.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.cf571703.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.3798fe66.js" as="script"><link rel="preload" href="/assets/js/page-BTC.28113b2e.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.416fc3ad.js" as="script"><link rel="preload" href="/assets/js/435.b5a1071e.js" as="script"><link rel="prefetch" href="/assets/js/432.80a891de.js"><link rel="prefetch" href="/assets/js/433.9ac00d52.js"><link rel="prefetch" href="/assets/js/434.9d79c72b.js"><link rel="prefetch" href="/assets/js/436.819d45bb.js"><link rel="prefetch" href="/assets/js/437.a0a44049.js"><link rel="prefetch" href="/assets/js/438.39e63266.js"><link rel="prefetch" href="/assets/js/439.e0655ea4.js"><link rel="prefetch" href="/assets/js/440.9c540a31.js"><link rel="prefetch" href="/assets/js/441.26adff23.js"><link rel="prefetch" href="/assets/js/442.14b1ab1b.js"><link rel="prefetch" href="/assets/js/443.9330d45f.js"><link rel="prefetch" href="/assets/js/layout-Blog.5d593ec2.js"><link rel="prefetch" href="/assets/js/layout-Layout.654ca600.js"><link rel="prefetch" href="/assets/js/layout-NotFound.98a71a57.js"><link rel="prefetch" href="/assets/js/layout-Slide.ee761a40.js"><link rel="prefetch" href="/assets/js/page--0efb9cf8.2df6aa1e.js"><link rel="prefetch" href="/assets/js/page--21fd6a94.ae334c85.js"><link rel="prefetch" href="/assets/js/page--24724ff8.0d7ade5a.js"><link rel="prefetch" href="/assets/js/page--26ccb544.d169372c.js"><link rel="prefetch" href="/assets/js/page--46b43eb4.0c322145.js"><link rel="prefetch" href="/assets/js/page--54bd2a10.bf6961ee.js"><link rel="prefetch" href="/assets/js/page--5b048be4.36ce9c0c.js"><link rel="prefetch" href="/assets/js/page--7fc1c0c4.5867d498.js"><link rel="prefetch" href="/assets/js/page--fc75f4b8.03afa55e.js"><link rel="prefetch" href="/assets/js/page-API.a61859c7.js"><link rel="prefetch" href="/assets/js/page-APIReference.cfafd346.js"><link rel="prefetch" href="/assets/js/page-APIv1.7d98aeb9.js"><link rel="prefetch" href="/assets/js/page-ActiveMQ.ec9b1405.js"><link rel="prefetch" href="/assets/js/page-Alertmanager.42f3f3b9.js"><link rel="prefetch" href="/assets/js/page-Ansible.960f3a42.js"><link rel="prefetch" href="/assets/js/page-Artifactory.4dc12e8f.js"><link rel="prefetch" href="/assets/js/page-AryaStark.c137ec2b.js"><link rel="prefetch" href="/assets/js/page-Attribute.58b43976.js"><link rel="prefetch" href="/assets/js/page-Batch.07977d68.js"><link rel="prefetch" href="/assets/js/page-BenjenStark.5e3fd20e.js"><link rel="prefetch" href="/assets/js/page-Bitmaps.d5339304.js"><link rel="prefetch" href="/assets/js/page-Bootstrap.42434e57.js"><link rel="prefetch" href="/assets/js/page-BrandonStark.20f355eb.js"><link rel="prefetch" href="/assets/js/page-BryndenTully.743f1bd7.js"><link rel="prefetch" href="/assets/js/page-CPU.3627558d.js"><link rel="prefetch" href="/assets/js/page-CSS.e36d1660.js"><link rel="prefetch" href="/assets/js/page-CatelynStark.52619e0f.js"><link rel="prefetch" href="/assets/js/page-Ceph.bb891479.js"><link rel="prefetch" href="/assets/js/page-CerseiLannister.04004206.js"><link rel="prefetch" href="/assets/js/page-Chevereto.5db10aa8.js"><link rel="prefetch" href="/assets/js/page-ClickHouse.0c08c26b.js"><link rel="prefetch" href="/assets/js/page-Consul.e46da45c.js"><link rel="prefetch" href="/assets/js/page-C语言.3ac50d84.js"><link rel="prefetch" href="/assets/js/page-DNS.f59c34fe.js"><link rel="prefetch" href="/assets/js/page-DaenerysTargaryen.6085162b.js"><link rel="prefetch" href="/assets/js/page-Docker.91cb5095.js"><link rel="prefetch" href="/assets/js/page-DockerCompose.a0e9c2a4.js"><link rel="prefetch" href="/assets/js/page-Dockerfile.a65d52e5.js"><link rel="prefetch" href="/assets/js/page-ELK.4a07e090.js"><link rel="prefetch" href="/assets/js/page-ETH.8dba695d.js"><link rel="prefetch" href="/assets/js/page-EddardStark.81538fe0.js"><link rel="prefetch" href="/assets/js/page-EdmureTully.3116b914.js"><link rel="prefetch" href="/assets/js/page-ElasticSearch.09e43ee9.js"><link rel="prefetch" href="/assets/js/page-Email.0f1ee335.js"><link rel="prefetch" href="/assets/js/page-FAQ.6019ea92.js"><link rel="prefetch" href="/assets/js/page-FTP.b64533e0.js"><link rel="prefetch" href="/assets/js/page-Fail2Ban设置.f52367be.js"><link rel="prefetch" href="/assets/js/page-FastDFS.be3c9917.js"><link rel="prefetch" href="/assets/js/page-Filebeat.99a1e365.js"><link rel="prefetch" href="/assets/js/page-Frontmatter.d0d1ddc7.js"><link rel="prefetch" href="/assets/js/page-GEO.2c11c7eb.js"><link rel="prefetch" href="/assets/js/page-GameofThones.eab62a3b.js"><link rel="prefetch" href="/assets/js/page-GendryBaratheon.5e5e6ebd.js"><link rel="prefetch" href="/assets/js/page-GettingStarted.08a40277.js"><link rel="prefetch" href="/assets/js/page-Git.ba4ff48f.js"><link rel="prefetch" href="/assets/js/page-GitBook.49aff7b9.js"><link rel="prefetch" href="/assets/js/page-GitHub.16837adb.js"><link rel="prefetch" href="/assets/js/page-GitLab.fbb6b63f.js"><link rel="prefetch" href="/assets/js/page-Golang.266be49d.js"><link rel="prefetch" href="/assets/js/page-Grafana.5a52528e.js"><link rel="prefetch" href="/assets/js/page-Groovy.ba2d8260.js"><link rel="prefetch" href="/assets/js/page-HTML.d5aaea65.js"><link rel="prefetch" href="/assets/js/page-HTTP.23999090.js"><link rel="prefetch" href="/assets/js/page-HTTPS.b926ca1e.js"><link rel="prefetch" href="/assets/js/page-Harbor.678feed2.js"><link rel="prefetch" href="/assets/js/page-Home.d7f01cf5.js"><link rel="prefetch" href="/assets/js/page-HosterTully.d9ebd086.js"><link rel="prefetch" href="/assets/js/page-HouseBaratheon.fe011c60.js"><link rel="prefetch" href="/assets/js/page-HouseLannister.9236ddd3.js"><link rel="prefetch" href="/assets/js/page-HouseStark.9a436137.js"><link rel="prefetch" href="/assets/js/page-HouseTargaryen.d2636f1e.js"><link rel="prefetch" href="/assets/js/page-HouseTully.fc2acd7a.js"><link rel="prefetch" href="/assets/js/page-HouseTyrell.5aa4bab8.js"><link rel="prefetch" href="/assets/js/page-HyperLogLog.ac1a0743.js"><link rel="prefetch" href="/assets/js/page-INI.ecd55fe8.js"><link rel="prefetch" href="/assets/js/page-IP.da67ed5d.js"><link rel="prefetch" href="/assets/js/page-IP屏蔽.ff153b92.js"><link rel="prefetch" href="/assets/js/page-Introduction.0f10713d.js"><link rel="prefetch" href="/assets/js/page-JaimeLannister.b0e4c31f.js"><link rel="prefetch" href="/assets/js/page-Java.43e6741f.js"><link rel="prefetch" href="/assets/js/page-Java性能优化.a084de01.js"><link rel="prefetch" href="/assets/js/page-Jekyll.bc9f0053.js"><link rel="prefetch" href="/assets/js/page-Jenkins.3c65bbb9.js"><link rel="prefetch" href="/assets/js/page-Jenkinsfile.8e37c7c4.js"><link rel="prefetch" href="/assets/js/page-Jinja.d3095667.js"><link rel="prefetch" href="/assets/js/page-JoffreyBaratheon.4b2215ed.js"><link rel="prefetch" href="/assets/js/page-JonSnow.ce22233d.js"><link rel="prefetch" href="/assets/js/page-Jumpserver.03d7e7b4.js"><link rel="prefetch" href="/assets/js/page-Kafka.75bc8e98.js"><link rel="prefetch" href="/assets/js/page-KevanLannister.33d0ed51.js"><link rel="prefetch" href="/assets/js/page-Kibana.ad8d9531.js"><link rel="prefetch" href="/assets/js/page-Kubernetes.d7254663.js"><link rel="prefetch" href="/assets/js/page-Kubernetes部署.b3ba5b89.js"><link rel="prefetch" href="/assets/js/page-LDAP.99b1ae7d.js"><link rel="prefetch" href="/assets/js/page-LancelLannister.77a2b656.js"><link rel="prefetch" href="/assets/js/page-LdapAdmin.e95d74ca.js"><link rel="prefetch" href="/assets/js/page-Linux.3ed397e7.js"><link rel="prefetch" href="/assets/js/page-Lisp.83287116.js"><link rel="prefetch" href="/assets/js/page-Logrotate示例.20698978.js"><link rel="prefetch" href="/assets/js/page-Logstash.57b447ee.js"><link rel="prefetch" href="/assets/js/page-LorasTyrell.cbdce696.js"><link rel="prefetch" href="/assets/js/page-Lua.90a38821.js"><link rel="prefetch" href="/assets/js/page-Lua详解.d629a678.js"><link rel="prefetch" href="/assets/js/page-LyannaStark.683827b1.js"><link rel="prefetch" href="/assets/js/page-LysaArryn.a5355b41.js"><link rel="prefetch" href="/assets/js/page-MQTT.5fd08614.js"><link rel="prefetch" href="/assets/js/page-MaceTyrell.0929d9ab.js"><link rel="prefetch" href="/assets/js/page-MargaeryTyrell.db41190a.js"><link rel="prefetch" href="/assets/js/page-Markdown介绍.dd1a04b6.js"><link rel="prefetch" href="/assets/js/page-Markdown高级技巧.174cb98b.js"><link rel="prefetch" href="/assets/js/page-MartynLannister.6768f7da.js"><link rel="prefetch" href="/assets/js/page-MinIO.3e703ce0.js"><link rel="prefetch" href="/assets/js/page-MongoDB.bd8bbe2e.js"><link rel="prefetch" href="/assets/js/page-MySQL.73c22209.js"><link rel="prefetch" href="/assets/js/page-MyrcellaBaratheon.e990c092.js"><link rel="prefetch" href="/assets/js/page-Nacos.63ee4cc7.js"><link rel="prefetch" href="/assets/js/page-Network.18c1bf2b.js"><link rel="prefetch" href="/assets/js/page-Nextcloud.d7f58307.js"><link rel="prefetch" href="/assets/js/page-Nexus.4289b874.js"><link rel="prefetch" href="/assets/js/page-Nginx.9d114a7e.js"><link rel="prefetch" href="/assets/js/page-OAuth.2e1197c0.js"><link rel="prefetch" href="/assets/js/page-OlennaTyrell.ef7e2eb3.js"><link rel="prefetch" href="/assets/js/page-OpenLDAP.bc3326a3.js"><link rel="prefetch" href="/assets/js/page-OpenSearch.fac40de5.js"><link rel="prefetch" href="/assets/js/page-Option.27f5ba7b.js"><link rel="prefetch" href="/assets/js/page-PHP.af118037.js"><link rel="prefetch" href="/assets/js/page-Perl.816e5680.js"><link rel="prefetch" href="/assets/js/page-Pipeline.7ed52aaf.js"><link rel="prefetch" href="/assets/js/page-Pod.0f78811d.js"><link rel="prefetch" href="/assets/js/page-Prometheus.7da74900.js"><link rel="prefetch" href="/assets/js/page-Pushgateway.ffc748b6.js"><link rel="prefetch" href="/assets/js/page-Python.d4354842.js"><link rel="prefetch" href="/assets/js/page-Redis.33f68450.js"><link rel="prefetch" href="/assets/js/page-RedisShel.a209f194.js"><link rel="prefetch" href="/assets/js/page-RedisTemplate使用详解.839b20d9.js"><link rel="prefetch" href="/assets/js/page-RenlyBaratheon.f56269dd.js"><link rel="prefetch" href="/assets/js/page-RhaegarTargaryen.eb24ea3e.js"><link rel="prefetch" href="/assets/js/page-RickonStark.7fcb515f.js"><link rel="prefetch" href="/assets/js/page-RobbStark.a30c6b81.js"><link rel="prefetch" href="/assets/js/page-RobertBaratheon.0366b945.js"><link rel="prefetch" href="/assets/js/page-RobinArryn.a506c50a.js"><link rel="prefetch" href="/assets/js/page-Ruby.14b3fd30.js"><link rel="prefetch" href="/assets/js/page-SMTP配置.9515411c.js"><link rel="prefetch" href="/assets/js/page-SQLite.c438c5f1.js"><link rel="prefetch" href="/assets/js/page-SSH.cb3f6bc8.js"><link rel="prefetch" href="/assets/js/page-SWIG.adb0703e.js"><link rel="prefetch" href="/assets/js/page-SansaStark.54fbe065.js"><link rel="prefetch" href="/assets/js/page-Selenium.9a09c00c.js"><link rel="prefetch" href="/assets/js/page-ShareX.23c3f03e.js"><link rel="prefetch" href="/assets/js/page-Shell.9b68fc3e.js"><link rel="prefetch" href="/assets/js/page-ShireenBaratheon.b7bdbce9.js"><link rel="prefetch" href="/assets/js/page-Socket.3aad674d.js"><link rel="prefetch" href="/assets/js/page-SonarQube.26d4c90a.js"><link rel="prefetch" href="/assets/js/page-StannisBaratheon.4dd9775f.js"><link rel="prefetch" href="/assets/js/page-Supervisor.3f87e94c.js"><link rel="prefetch" href="/assets/js/page-TCPUDP.2545cdec.js"><link rel="prefetch" href="/assets/js/page-Tomcat.602a5ec8.js"><link rel="prefetch" href="/assets/js/page-TommenBaratheon.7c416f42.js"><link rel="prefetch" href="/assets/js/page-TypeScript.850a4ffc.js"><link rel="prefetch" href="/assets/js/page-TyrionLannister.7a889adb.js"><link rel="prefetch" href="/assets/js/page-TywinLannister.03055148.js"><link rel="prefetch" href="/assets/js/page-VSCode.f2abf308.js"><link rel="prefetch" href="/assets/js/page-Vaultwarden.edf63a48.js"><link rel="prefetch" href="/assets/js/page-VaultwardenWiki中文版.2ebb6280.js"><link rel="prefetch" href="/assets/js/page-ViserysTargaryen.1de2c8e6.js"><link rel="prefetch" href="/assets/js/page-Volume.c9361222.js"><link rel="prefetch" href="/assets/js/page-VuePress.4c8c14b0.js"><link rel="prefetch" href="/assets/js/page-Vuejs.c53f3295.js"><link rel="prefetch" href="/assets/js/page-Web安全.d8520262.js"><link rel="prefetch" href="/assets/js/page-Web技术.b5b28ac4.js"><link rel="prefetch" href="/assets/js/page-Web爬虫.819f5274.js"><link rel="prefetch" href="/assets/js/page-WillemLannister.25284493.js"><link rel="prefetch" href="/assets/js/page-WordPress.86aa8e35.js"><link rel="prefetch" href="/assets/js/page-XML.aebf033b.js"><link rel="prefetch" href="/assets/js/page-YApi.38397b6a.js"><link rel="prefetch" href="/assets/js/page-Zabbix.e2eabb86.js"><link rel="prefetch" href="/assets/js/page-Zipkin.ae14c1c7.js"><link rel="prefetch" href="/assets/js/page-ZooKeeper.ee401fc0.js"><link rel="prefetch" href="/assets/js/page-cPanel.e5f9933f.js"><link rel="prefetch" href="/assets/js/page-docsify.380b1032.js"><link rel="prefetch" href="/assets/js/page-etcd.f988efb0.js"><link rel="prefetch" href="/assets/js/page-exporter.6046d699.js"><link rel="prefetch" href="/assets/js/page-go-fastdfs.3cccaa18.js"><link rel="prefetch" href="/assets/js/page-h5ai.3ac6f0b5.js"><link rel="prefetch" href="/assets/js/page-indextemplate.1ac73ad8.js"><link rel="prefetch" href="/assets/js/page-int.c6fdfe0d.js"><link rel="prefetch" href="/assets/js/page-list.74cbf260.js"><link rel="prefetch" href="/assets/js/page-pybind11.8e9aca6b.js"><link rel="prefetch" href="/assets/js/page-pyecharts.dbf1737a.js"><link rel="prefetch" href="/assets/js/page-str.4ecc3c5c.js"><link rel="prefetch" href="/assets/js/page-♢Cython.e6b2bef3.js"><link rel="prefetch" href="/assets/js/page-♢Django.972b65a6.js"><link rel="prefetch" href="/assets/js/page-♢Matplotlib.0746698c.js"><link rel="prefetch" href="/assets/js/page-♢NetworkX.e567de21.js"><link rel="prefetch" href="/assets/js/page-♢Pillow.34619450.js"><link rel="prefetch" href="/assets/js/page-♢PyMySQL.574da213.js"><link rel="prefetch" href="/assets/js/page-♢ctypes.0364d04c.js"><link rel="prefetch" href="/assets/js/page-♢decimal.8ae7155f.js"><link rel="prefetch" href="/assets/js/page-♢http.2033b1e8.js"><link rel="prefetch" href="/assets/js/page-♢io.198e62d8.js"><link rel="prefetch" href="/assets/js/page-♢logging.8813c39f.js"><link rel="prefetch" href="/assets/js/page-♢math.72fa8e08.js"><link rel="prefetch" href="/assets/js/page-♢numpy.902096ce.js"><link rel="prefetch" href="/assets/js/page-♢os.931f6271.js"><link rel="prefetch" href="/assets/js/page-♢pathlib.9036a71b.js"><link rel="prefetch" href="/assets/js/page-♢pymongo.cd48213c.js"><link rel="prefetch" href="/assets/js/page-♢random.cc134b5a.js"><link rel="prefetch" href="/assets/js/page-♢redis-py.2ce9bdf0.js"><link rel="prefetch" href="/assets/js/page-♢requests.fd70bd5a.js"><link rel="prefetch" href="/assets/js/page-♢sqlite3.eaffc306.js"><link rel="prefetch" href="/assets/js/page-♢subprocess.01d62f67.js"><link rel="prefetch" href="/assets/js/page-♢typing.5edfa8a5.js"><link rel="prefetch" href="/assets/js/page-♢unittest.6c95a08c.js"><link rel="prefetch" href="/assets/js/page-♢urllib.df5496c5.js"><link rel="prefetch" href="/assets/js/page-与上游API实现的区别.c8e4366f.js"><link rel="prefetch" href="/assets/js/page-个人项目列表.8a810a24.js"><link rel="prefetch" href="/assets/js/page-主页.8545e19c.js"><link rel="prefetch" href="/assets/js/page-主题.cfe450ea.js"><link rel="prefetch" href="/assets/js/page-事务.95014ff8.js"><link rel="prefetch" href="/assets/js/page-云计算.f4727946.js"><link rel="prefetch" href="/assets/js/page-交换机.422e43cd.js"><link rel="prefetch" href="/assets/js/page-介绍.1e14e2b7.js"><link rel="prefetch" href="/assets/js/page-从Keepass或KeepassX导入数据.1a10e690.js"><link rel="prefetch" href="/assets/js/page-从LDAP同步用户.50bc9b8a.js"><link rel="prefetch" href="/assets/js/page-从MariaDB(MySQL)迁移到SQLite.972ea357.js"><link rel="prefetch" href="/assets/js/page-代理示例.4fff1831.js"><link rel="prefetch" href="/assets/js/page-代码库.1a53ef78.js"><link rel="prefetch" href="/assets/js/page-仪表盘.f954bf05.js"><link rel="prefetch" href="/assets/js/page-优化.d8f477d8.js"><link rel="prefetch" href="/assets/js/page-使用DockerCompose.ad37e219.js"><link rel="prefetch" href="/assets/js/page-使用Let'sEncrypt证书运行私有Vaultwarden实例.90ecdb3a.js"><link rel="prefetch" href="/assets/js/page-使用MariaDB(MySQL)后端.32c8b623.js"><link rel="prefetch" href="/assets/js/page-使用Podman.f4cfb5e3.js"><link rel="prefetch" href="/assets/js/page-使用PostgreSQL后端.7ff855b7.js"><link rel="prefetch" href="/assets/js/page-使用systemddocker运行.1acb5592.js"><link rel="prefetch" href="/assets/js/page-使用哪个容器镜像.60354ffb.js"><link rel="prefetch" href="/assets/js/page-使用备用基本目录(子目录).3acd744d.js"><link rel="prefetch" href="/assets/js/page-使私有CA和自签名证书兼容Chrome.b537fda0.js"><link rel="prefetch" href="/assets/js/page-六大原则.c07f1a33.js"><link rel="prefetch" href="/assets/js/page-其他设置.3858e53f.js"><link rel="prefetch" href="/assets/js/page-其他配置.aaf28bc3.js"><link rel="prefetch" href="/assets/js/page-其它功能.e84aef5b.js"><link rel="prefetch" href="/assets/js/page-内存.33bf62ab.js"><link rel="prefetch" href="/assets/js/page-内容.71725c72.js"><link rel="prefetch" href="/assets/js/page-内容警告.dc881ce1.js"><link rel="prefetch" href="/assets/js/page-内核.5a1ec5bb.js"><link rel="prefetch" href="/assets/js/page-函数.0dfc382f.js"><link rel="prefetch" href="/assets/js/page-分类.1175dcf6.js"><link rel="prefetch" href="/assets/js/page-列表.6993594f.js"><link rel="prefetch" href="/assets/js/page-创建systemd服务.f0de52f8.js"><link rel="prefetch" href="/assets/js/page-初始设置.86755d95.js"><link rel="prefetch" href="/assets/js/page-初接触指南.3d649cb1.js"><link rel="prefetch" href="/assets/js/page-初识Redis.95a11127.js"><link rel="prefetch" href="/assets/js/page-前端构建.35ea4b4f.js"><link rel="prefetch" href="/assets/js/page-加密算法.35150f9e.js"><link rel="prefetch" href="/assets/js/page-区块链.dc8da928.js"><link rel="prefetch" href="/assets/js/page-升级.8652d191.js"><link rel="prefetch" href="/assets/js/page-单例模式.dac59d6c.js"><link rel="prefetch" href="/assets/js/page-原理.f3a0317e.js"><link rel="prefetch" href="/assets/js/page-发布订阅.fc0ec3f8.js"><link rel="prefetch" href="/assets/js/page-变量.d868cdf1.js"><link rel="prefetch" href="/assets/js/page-后端框架.f610a6d2.js"><link rel="prefetch" href="/assets/js/page-启动一个容器.26a80331.js"><link rel="prefetch" href="/assets/js/page-启用WebSocket通知.118822e0.js"><link rel="prefetch" href="/assets/js/page-启用管理页面.ead73563.js"><link rel="prefetch" href="/assets/js/page-命令.f7e1240d.js"><link rel="prefetch" href="/assets/js/page-哈希.b232f9ed.js"><link rel="prefetch" href="/assets/js/page-哈希算法.fb1d166b.js"><link rel="prefetch" href="/assets/js/page-图片上传.b2bea6e6.js"><link rel="prefetch" href="/assets/js/page-图片相似算法.206c91e5.js"><link rel="prefetch" href="/assets/js/page-在没有启用WAL的情况下运行.d5609255.js"><link rel="prefetch" href="/assets/js/page-基础认知.78f2bb56.js"><link rel="prefetch" href="/assets/js/page-备份你的密码库.db201432.js"><link rel="prefetch" href="/assets/js/page-外存.ce271ab9.js"><link rel="prefetch" href="/assets/js/page-外部存储.24f7ce76.js"><link rel="prefetch" href="/assets/js/page-外部服务.608340be.js"><link rel="prefetch" href="/assets/js/page-大数据.705bc12a.js"><link rel="prefetch" href="/assets/js/page-字符串.f0c147c3.js"><link rel="prefetch" href="/assets/js/page-字符串匹配.c77880cc.js"><link rel="prefetch" href="/assets/js/page-字符编码.40079375.js"><link rel="prefetch" href="/assets/js/page-字节编码.67cb21c7.js"><link rel="prefetch" href="/assets/js/page-存储引擎.54b2a24d.js"><link rel="prefetch" href="/assets/js/page-安全.1df35695.js"><link rel="prefetch" href="/assets/js/page-安装.3b1b07e6.js"><link rel="prefetch" href="/assets/js/page-安装软件.398a4c18.js"><link rel="prefetch" href="/assets/js/page-定时任务.9f9aedf0.js"><link rel="prefetch" href="/assets/js/page-客户端Jedis详解.ead89c26.js"><link rel="prefetch" href="/assets/js/page-客户端Lettuce详解.eb053a62.js"><link rel="prefetch" href="/assets/js/page-容器.f0e15a5c.js"><link rel="prefetch" href="/assets/js/page-密码提示显示.9336b830.js"><link rel="prefetch" href="/assets/js/page-工具.066dfc09.js"><link rel="prefetch" href="/assets/js/page-带有CloudflareDNS的Caddy2x.7d449c34.js"><link rel="prefetch" href="/assets/js/page-序列化.4e32cc93.js"><link rel="prefetch" href="/assets/js/page-开启HTTPS.301e16c9.js"><link rel="prefetch" href="/assets/js/page-开启U2F认证.99d8d351.js"><link rel="prefetch" href="/assets/js/page-开启YubiKeyOTP认证.63fa9fd3.js"><link rel="prefetch" href="/assets/js/page-开机.7288729d.js"><link rel="prefetch" href="/assets/js/page-弹出上传插件.283ec1c7.js"><link rel="prefetch" href="/assets/js/page-强化指南.96331729.js"><link rel="prefetch" href="/assets/js/page-性能优化.8891a0a4.js"><link rel="prefetch" href="/assets/js/page-恶意代码.eccc9a73.js"><link rel="prefetch" href="/assets/js/page-慢查询分析.8453bc15.js"><link rel="prefetch" href="/assets/js/page-批量内容导入器.3cc585a7.js"><link rel="prefetch" href="/assets/js/page-排序算法.504a8016.js"><link rel="prefetch" href="/assets/js/page-插件.0dd4c57d.js"><link rel="prefetch" href="/assets/js/page-支持上游开发.bb785e48.js"><link rel="prefetch" href="/assets/js/page-改变Worker数量.53ac15e5.js"><link rel="prefetch" href="/assets/js/page-数据传输.b5f78824.js"><link rel="prefetch" href="/assets/js/page-数据库.a74c3fd0.js"><link rel="prefetch" href="/assets/js/page-数据类型.b2764797.js"><link rel="prefetch" href="/assets/js/page-数据结构.325d3313.js"><link rel="prefetch" href="/assets/js/page-数据编码.24f1966b.js"><link rel="prefetch" href="/assets/js/page-文件.59d11d9d.js"><link rel="prefetch" href="/assets/js/page-文件处理.ffaebe9d.js"><link rel="prefetch" href="/assets/js/page-文件对象.2ec2f010.js"><link rel="prefetch" href="/assets/js/page-文件属性.dce95fcb.js"><link rel="prefetch" href="/assets/js/page-文件权限.eb602685.js"><link rel="prefetch" href="/assets/js/page-文本处理.4f5f9d4e.js"><link rel="prefetch" href="/assets/js/page-日志.ed2a3164.js"><link rel="prefetch" href="/assets/js/page-时间.f84828de.js"><link rel="prefetch" href="/assets/js/page-更改API请求大小限制.2f9c6d04.js"><link rel="prefetch" href="/assets/js/page-更改持久数据位置.9e364399.js"><link rel="prefetch" href="/assets/js/page-更新.d2d6e4c3.js"><link rel="prefetch" href="/assets/js/page-更新密码管理的管理员图片.e63466c3.js"><link rel="prefetch" href="/assets/js/page-有序集合.802751b9.js"><link rel="prefetch" href="/assets/js/page-本主题Markdown增强.8cf1369b.js"><link rel="prefetch" href="/assets/js/page-权限.acc901af.js"><link rel="prefetch" href="/assets/js/page-构建.21689930.js"><link rel="prefetch" href="/assets/js/page-构建二进制.86d1faa0.js"><link rel="prefetch" href="/assets/js/page-构建你自己的docker镜像.2af210e5.js"><link rel="prefetch" href="/assets/js/page-查询.3883fbc2.js"><link rel="prefetch" href="/assets/js/page-概览.56667fb1.js"><link rel="prefetch" href="/assets/js/page-模块与包.7b0b9f39.js"><link rel="prefetch" href="/assets/js/page-横幅广告.cb015cde.js"><link rel="prefetch" href="/assets/js/page-欢迎大家在下方留言.49ab8f4d.js"><link rel="prefetch" href="/assets/js/page-正则匹配.3b9a6589.js"><link rel="prefetch" href="/assets/js/page-注册表.1f189727.js"><link rel="prefetch" href="/assets/js/page-流程控制.ad614f02.js"><link rel="prefetch" href="/assets/js/page-版本.5780ab7c.js"><link rel="prefetch" href="/assets/js/page-环境.44e0d089.js"><link rel="prefetch" href="/assets/js/page-用户.fb3011c5.js"><link rel="prefetch" href="/assets/js/page-用法.ccb357d4.js"><link rel="prefetch" href="/assets/js/page-电子图片.8550febd.js"><link rel="prefetch" href="/assets/js/page-电子邮件.de2dc31e.js"><link rel="prefetch" href="/assets/js/page-登录.3240fc63.js"><link rel="prefetch" href="/assets/js/page-监控k8s.cbec21e6.js"><link rel="prefetch" href="/assets/js/page-目录.0264d83a.js"><link rel="prefetch" href="/assets/js/page-相关命令.8bb502cc.js"><link rel="prefetch" href="/assets/js/page-相关概念.68cd33e6.js"><link rel="prefetch" href="/assets/js/page-磁盘管理.61339515.js"><link rel="prefetch" href="/assets/js/page-社交登录.14ae5464.js"><link rel="prefetch" href="/assets/js/page-社交网络.bb27b60e.js"><link rel="prefetch" href="/assets/js/page-禁止新用户注册.75d0e31c.js"><link rel="prefetch" href="/assets/js/page-禁用admintoken.53233d92.js"><link rel="prefetch" href="/assets/js/page-禁用或覆盖Vault接口托管.bf912274.js"><link rel="prefetch" href="/assets/js/page-禁用邀请.1d4503c0.js"><link rel="prefetch" href="/assets/js/page-第三方包.ce7783ce.js"><link rel="prefetch" href="/assets/js/page-简介.b5e60f56.js"><link rel="prefetch" href="/assets/js/page-简单动态字符串.90992952.js"><link rel="prefetch" href="/assets/js/page-管理单元.dac470b5.js"><link rel="prefetch" href="/assets/js/page-管理进程.bc9cd697.js"><link rel="prefetch" href="/assets/js/page-系统.6d67f951.js"><link rel="prefetch" href="/assets/js/page-系统信息.07f91270.js"><link rel="prefetch" href="/assets/js/page-线程.c0926e9c.js"><link rel="prefetch" href="/assets/js/page-终端.54b3a6b5.js"><link rel="prefetch" href="/assets/js/page-综合测试.9ca34400.js"><link rel="prefetch" href="/assets/js/page-缓存.1ff65b58.js"><link rel="prefetch" href="/assets/js/page-缓存击穿.e8190a81.js"><link rel="prefetch" href="/assets/js/page-缓存穿透.1721b530.js"><link rel="prefetch" href="/assets/js/page-缓存雪崩.fd3c1067.js"><link rel="prefetch" href="/assets/js/page-编译.feb6aeff.js"><link rel="prefetch" href="/assets/js/page-网站.827d960b.js"><link rel="prefetch" href="/assets/js/page-网络代理.3cf77867.js"><link rel="prefetch" href="/assets/js/page-网络体系结构.f857a8b0.js"><link rel="prefetch" href="/assets/js/page-网络安全.0c421986.js"><link rel="prefetch" href="/assets/js/page-网络测试.15f527b5.js"><link rel="prefetch" href="/assets/js/page-自我检测.fcfcd236.js"><link rel="prefetch" href="/assets/js/page-要求.89b52608.js"><link rel="prefetch" href="/assets/js/page-覆盖范围.de2ae103.js"><link rel="prefetch" href="/assets/js/page-解释器.e17f5b76.js"><link rel="prefetch" href="/assets/js/page-设备.8a60b23b.js"><link rel="prefetch" href="/assets/js/page-设置cron.84476f83.js"><link rel="prefetch" href="/assets/js/page-设置文件.e1075460.js"><link rel="prefetch" href="/assets/js/page-设置邮箱.c2da07dc.js"><link rel="prefetch" href="/assets/js/page-访问控制.5fda8406.js"><link rel="prefetch" href="/assets/js/page-语法.09e78d04.js"><link rel="prefetch" href="/assets/js/page-语言.84fb6c61.js"><link rel="prefetch" href="/assets/js/page-调试.4f87cdda.js"><link rel="prefetch" href="/assets/js/page-路径.0acea274.js"><link rel="prefetch" href="/assets/js/page-路由器.69e6049d.js"><link rel="prefetch" href="/assets/js/page-路由转发.f05509a5.js"><link rel="prefetch" href="/assets/js/page-路线.7390bbb8.js"><link rel="prefetch" href="/assets/js/page-身份认证.9a4fa15a.js"><link rel="prefetch" href="/assets/js/page-运行.7820083f.js"><link rel="prefetch" href="/assets/js/page-进程.966d092a.js"><link rel="prefetch" href="/assets/js/page-进程测试.8ff0a6c8.js"><link rel="prefetch" href="/assets/js/page-通信协议.1cd66738.js"><link rel="prefetch" href="/assets/js/page-通信线路.6dcf151f.js"><link rel="prefetch" href="/assets/js/page-通用(不是docker).6e6b3b93.js"><link rel="prefetch" href="/assets/js/page-通配符.e53713ae.js"><link rel="prefetch" href="/assets/js/page-部署.d52f7fb1.js"><link rel="prefetch" href="/assets/js/page-部署在云端.081f47dd.js"><link rel="prefetch" href="/assets/js/page-部署示例.1b924fa3.js"><link rel="prefetch" href="/assets/js/page-配置.6f97bf0f.js"><link rel="prefetch" href="/assets/js/page-错误.18a466ad.js"><link rel="prefetch" href="/assets/js/page-键管理分析.2400b71b.js"><link rel="prefetch" href="/assets/js/page-镜像.c28cfd23.js"><link rel="prefetch" href="/assets/js/page-问题.b3bdd3cc.js"><link rel="prefetch" href="/assets/js/page-防洪保护.a0a93602.js"><link rel="prefetch" href="/assets/js/page-防火墙.c50e9ffa.js"><link rel="prefetch" href="/assets/js/page-集合.dfadd60b.js"><link rel="prefetch" href="/assets/js/page-静态文件.b85da046.js"><link rel="prefetch" href="/assets/js/page-非root用户身份运行容器.74987c81.js"><link rel="prefetch" href="/assets/js/page-面试题.06cad256.js"><link rel="prefetch" href="/assets/js/page-页面.839ee6bf.js"><link rel="prefetch" href="/assets/js/page-页面列表.eb24fafe.js"><link rel="prefetch" href="/assets/js/page-预建二进制文件.9af1c85d.js"><link rel="prefetch" href="/assets/js/vendors~docs-searchbar.b34e26d8.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.b653a4cd.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.8747ad8a.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.33433742.js"><link rel="prefetch" href="/assets/js/vendors~waline.5b082819.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e485dc9d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/assets/img/quan.svg" alt="HSAIO" class="logo light"> <img src="/assets/img/quan-dark.svg" alt="HSAIO" class="logo dark"> <span class="site-name can-hide">HSAIO</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">主题色:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">主题模式:</label> <div class="darkmode-switch"><div class="switch"><input id="switch" type="checkbox" checked="checked" class="switch-input"> <label for="switch" class="label"><span class="label-content"></span></label></div></div> <!----></div></div></div></button> <form id="search-form" role="search" class="meilisearch-search-wrapper search-box"><input id="meilisearch-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-zhuye1"></i>
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link"><i class="iconfont icon-kaishixunjian"></i>
  Start
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="类目" class="dropdown-title"><span class="title"><i class="iconfont icon-leimu"></i>
        类目
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/category/" class="nav-link"><i class="iconfont icon-notebook"></i>
  分类
</a></li><li class="dropdown-item"><a href="/tag/" class="nav-link"><i class="iconfont icon-biaoqian1"></i>
  标签
</a></li><li class="dropdown-item"><a href="/projects/" class="nav-link"><i class="iconfont icon-project-o"></i>
  项目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="朋友们" class="dropdown-title"><span class="title"><i class="iconfont icon-pengyouquan3"></i>
        朋友们
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/friends.html" class="nav-link"><i class="iconfont icon-pengyouquan"></i>
  友链
</a></li><li class="dropdown-item"><a href="/message.html" class="nav-link"><i class="iconfont icon-shuoshuo"></i>
  留言板
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont icon-liebiao"></i>
  时光鸡
</a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><img property="image" alt="Blogger Avatar" src="/assets/img/AvatarMaker.svg" class="avatar round"> <div property="name" class="name">MIFSH</div> <meta property="url" content="/author"></div> <div class="num-wrapper"><div><div class="num">407</div> <div>文章</div></div> <div><div class="num">4</div> <div>分类</div></div> <div><div class="num">6</div> <div>标签</div></div> <div><div class="num">407</div> <div>时间轴</div></div></div> <div class="media-links-wrapper"><a href="/rss.xml" rel="noopener noreferrer" target="_blank" aria-label="Rss" data-balloon-pos="up" class="media-link"><span class="sr-only">Rss</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-rss"><circle cx="512" cy="512" r="512" fill="#FD9B00"></circle> <path d="M687.981 740.39c0-225.92-183.617-409.777-409.21-409.777v-97.205c279.353 0 506.617 227.506 506.617 506.98H687.98zm-74.841 0h-97.538c0-63.567-24.688-123.245-69.43-167.993-44.762-44.856-104.24-69.556-167.54-69.556v-97.176c184.44 0 334.508 150.046 334.508 334.725zM346.038 605.166c37.35 0 67.514 30.357 67.514 67.39 0 37.146-30.163 67.177-67.514 67.177-37.219 0-67.458-30.03-67.458-67.176 0-37.034 30.24-67.391 67.458-67.391z" fill="#FFF"></path></svg></a><a href="https://github.com/Smart-Chou" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="https://qm.qq.com/cgi-bin/qm/qr?k=hH6gqBpGrQ80a0kBI-69N6OWXMIJ7825&amp;noverify=0" rel="noopener noreferrer" target="_blank" aria-label="QQ" data-balloon-pos="up" class="media-link"><span class="sr-only">QQ</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-qq"><circle cx="512" cy="512" r="512" fill="#5EAADE"></circle> <path d="M729.46 627.3c-3.157-39.628-24.045-83.747-32.624-105.91l-22.084-57.047c-.702-23.73 6.312-78.322-30.511-146.61s-110.82-74.446-124.497-75.147c-13.677-.701-99.248-1.403-141.331 72.945-42.084 74.347-30.745 148.812-30.745 148.812l-23.523 57.478c-.001.002-10.962 26.223-20.43 58.135-9.469 31.914-18.938 82.064-9.469 92.234 9.47 10.17 43.837-46.643 46.993-51.903 0 0 2.456 27.18 8.943 41.383l.81 1.776.33.723.38.826.3.652.444.96.203.436a281.465 281.465 0 0 0 1.917 4.025l.189.386c.231.473.468.953.711 1.442l.146.292c6.886 13.807 18.61 33.823 37.443 50.42l.018.016-1.184.387c-10.667 3.516-31.694 11.21-40.625 19.82-1.717 1.655-2.987 3.344-3.65 5.045-5.376 13.794 4.208 15.43 20.575 16.366 16.366.934 94.923 3.04 132.564-2.221.407-.056.787-.114 1.17-.171 2.711.094 5.324.142 7.83.16l.151.002c.836.005 1.663.008 2.475.008.496 0 1.015-.002 1.542-.006l.21-.001a222.593 222.593 0 0 0 5.462-.107c.26.038.508.076.778.114 37.642 5.26 116.198 3.156 132.564 2.22 16.366-.934 25.951-2.571 20.574-16.365-4.302-11.037-34.175-21.62-45.956-25.413a141.388 141.388 0 0 0 7.958-7.645l.237-.245a142.494 142.494 0 0 0 2.53-2.702c42.435-46.643 38.928-76.101 40.682-92.935 0 0 35.775 51.553 43.488 53.306 7.713 1.754 10.169-6.31 7.012-45.94z" fill="#FFF"></path></svg></a><a href="/assets/img/qr_weixin.png" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a><a href="https://www.zhihu.com/people/ChouCong" rel="noopener noreferrer" target="_blank" aria-label="Zhihu" data-balloon-pos="up" class="media-link"><span class="sr-only">Zhihu</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-zhihu"><circle cx="512" cy="512" r="512" fill="#006CE2"></circle> <path d="M513.65 491.261H411.551c1.615-16.154 5.815-60.095 5.815-84.973 0-24.88-.323-60.742-.323-60.742h102.744V329.39c0-21.647-9.37-31.34-17.124-31.34h-178.67s5.169-17.77 10.015-36.186c4.846-18.417 15.832-44.264 15.832-44.264-63.003 4.2-67.958 50.941-81.743 92.729-13.787 41.785-24.556 62.356-44.586 107.912 27.786 0 55.249-13.57 66.879-32.309 11.631-18.74 16.908-40.71 16.908-40.71h62.035v59.019c0 21.107-3.878 87.45-3.878 87.45H254.742c-19.386 0-29.724 48.894-29.724 48.894h133.76c-8.4 75.82-26.493 106.191-51.91 152.716-25.418 46.525-92.728 99.406-92.728 99.406 41.033 11.63 86.589-3.555 105.974-21.972 19.386-18.417 35.863-49.756 47.817-72.838 11.954-23.081 21.972-65.124 21.972-65.124L498.462 766.86s4.846-24.233 6.461-39.418c1.616-15.186-.755-26.385-4.63-35.433-3.878-9.046-15.509-21.54-31.018-39.634-15.507-18.094-48.034-52.879-48.034-52.879s-15.832 11.63-28.108 21.001c9.046-21.97 16.262-79.695 16.262-79.695h122.343v-20.249c.003-17.66-7.319-29.29-18.089-29.29zm287.337-200.747h-234.35a4.308 4.308 0 0 0-4.309 4.308v435.099a4.308 4.308 0 0 0 4.308 4.308h40.226l14.7 50.402 81.096-50.402h98.328a4.308 4.308 0 0 0 4.308-4.308v-435.1a4.308 4.308 0 0 0-4.308-4.308zM755.97 684.47h-52.343l-61.548 39.095-10.823-39.095h-18.738V338.116H755.97v346.355z" fill="#FFF"></path></svg></a><a href="mailto:ChouCong912@gmial.com" rel="noopener noreferrer" target="_blank" aria-label="Gmail" data-balloon-pos="up" class="media-link"><span class="sr-only">Gmail</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-gmail"><circle cx="512" cy="512" r="512" fill="#DB4437"></circle> <path d="M277.48 285.567h465.767v441.362H277.48V285.567z" fill="#E67C73"></path> <path d="M282.543 285.567h-10.645c-25.962 0-47.122 21.808-47.122 48.705v343.952c0 26.897 21.08 48.705 47.122 48.705h24.976V407.954l213.49 169.95 213.489-169.95V726.93h24.975c26.04 0 47.123-21.809 47.123-48.705V334.272c0-26.897-21.134-48.705-47.123-48.705h-10.644L510.364 480.44 282.542 285.567z" fill="#FFF"></path></svg></a></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-zhuye1"></i>
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link"><i class="iconfont icon-kaishixunjian"></i>
  Start
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="类目" class="dropdown-title"><span class="title"><i class="iconfont icon-leimu"></i>
      类目
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/" class="nav-link"><i class="iconfont icon-notebook"></i>
  分类
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont icon-biaoqian1"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/projects/" class="nav-link"><i class="iconfont icon-project-o"></i>
  项目
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="朋友们" class="dropdown-title"><span class="title"><i class="iconfont icon-pengyouquan3"></i>
      朋友们
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends.html" class="nav-link"><i class="iconfont icon-pengyouquan"></i>
  友链
</a></li><li class="dropdown-item"><!----> <a href="/message.html" class="nav-link"><i class="iconfont icon-shuoshuo"></i>
  留言板
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont icon-liebiao"></i>
  时光鸡
</a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <!----> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/Notes/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">Home</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a href="/Notes/Distributed/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name"></span></a> <meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">BTC</span></a> <meta property="position" content="3"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">BTC</span></h1> <div class="page-info"><!----> <span aria-label="作者🖊" data-balloon-pos="down" categoryPath="/category/$category/" tagPath="/tag/$tag/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">MIFSH</span></span><span aria-label="访问量🔢" data-balloon-pos="down" defaultAuthor="MIFSH" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html" data-flag-title="BTC" class="leancloud_visitors waline-visitor-count"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="写作日期📅" data-balloon-pos="down" defaultAuthor="MIFSH" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-3-24</span></span><!----><!----><span aria-label="阅读时间⌛" data-balloon-pos="down" defaultAuthor="MIFSH" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>大约 32 分钟</span> <meta property="timeRequired" content="PT32M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#架构" class="anchor-link heading2"><div>架构</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#区块" class="anchor-link heading2"><div>区块</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#账户" class="anchor-link heading2"><div>账户</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#交易" class="anchor-link heading2"><div>交易</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#发起交易" class="anchor-link heading3"><div>发起交易</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#pkscript" class="anchor-link heading3"><div>pkScript</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#sigscript" class="anchor-link heading3"><div>sigScript</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#segwit" class="anchor-link heading3"><div>SegWit</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#合约交易" class="anchor-link heading2"><div>合约交易</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#多重签名" class="anchor-link heading3"><div>多重签名</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#闪电交易" class="anchor-link heading3"><div>闪电交易</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#coinjoin" class="anchor-link heading3"><div>CoinJoin</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#网络" class="anchor-link heading2"><div>网络</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#共识" class="anchor-link heading3"><div>共识</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#矿工" class="anchor-link heading2"><div>矿工</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#挖矿难度" class="anchor-link heading3"><div>挖矿难度</div></a></li><li class="anchor"><a href="/Notes/Distributed/%E5%8C%BA%E5%9D%97%E9%93%BE/BTC.html#相关历史" class="anchor-link heading2"><div>相关历史</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="btc"><a href="#btc" class="header-anchor">#</a> BTC</h1> <p>：比特币（Bitcoin），一种数字货币，由 BTC 区块链发行。</p> <ul><li><a href="https://developer.bitcoin.org/devguide/index.html" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="架构"><a href="#架构" class="header-anchor">#</a> 架构</h2> <ul><li>一些主机根据 BTC 协议相互通信，组成了 BTC 网络。这些主机称为 BTC 节点。</li> <li>在区块链中存储所有交易信息。
<ul><li>每个节点上会存储一个区块链的完整副本。</li> <li>一些节点会收集网络上广播的交易，打包写入最新的一个区块，然后将新区块广播给其它节点。</li> <li>基于 PoW 共识算法决定哪个节点有权生成最新的一个区块。</li></ul></li> <li>用户可以运行专门的程序，作为节点，接入 BTC 网络。然后下载区块链，查询历史交易，或者广播新交易。</li></ul> <h2 id="区块"><a href="#区块" class="header-anchor">#</a> 区块</h2> <ul><li><p>如下图，一条区块链由多个区块串联组成，后一个区块会记录前一个区块的哈希值，构成哈希链。
<img src="data:image/jpeg;base64,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" alt="" loading="lazy"></p> <ul><li>哈希运算时采用 SHA256 算法。</li> <li>存储字节流时采用小端序。</li> <li>每个区块最多允许包含 1MB 的数据，超过则视作无效区块。</li> <li>区块高度（Height）：从最早一个区块往后数，给各个区块分配一个从 0 开始递增的编号，用于索引。</li> <li>区块深度（Depth）：从最新一个区块往前数，给各个区块分配一个从 1 开始递增的编号。
<ul><li>假设区块链的总高度为 H ，则对于高度为 h 的区块，其深度为 H-h+1 。</li></ul></li></ul></li> <li><p>一个区块的数据结构分为两部分：</p> <ul><li>header ：用于存储该区块的元数据。</li> <li>body ：用于存储交易信息。</li></ul></li> <li><p>区块 header 的长度固定为 80 bytes ，按顺序记录以下信息：</p> <ul><li>nVersion
<ul><li>：区块链协议的版本。</li> <li>4 bytes ，int32_t 。</li></ul></li> <li>previous block header hash
<ul><li>：上一个区块的 header 的哈希值。用于确保它们不会被篡改。</li> <li>32 bytes ，char[32] 。</li></ul></li> <li>merkle root hash
<ul><li>：当前区块 body 中所有交易信息的 Merkle Tree 的根哈希。用于确保它们不会被篡改。</li> <li>32 bytes ，char[32] 。</li></ul></li> <li>timestamp
<ul><li>：矿工打包当前区块时的 Unix time 时间戳。必须大于前 11 个区块的平均时间戳、不大于当前实际时间 +2 小时。</li> <li>4 bytes ，uint32_t 。</li></ul></li> <li>nBits（target threshold）
<ul><li>：nonce 的目标阈值。</li> <li>4 bytes ，uint32_t 。</li></ul></li> <li>nonce
<ul><li>：一个随机数。</li> <li>4 bytes ，uint32_t 。</li></ul></li></ul></li></ul> <h2 id="账户"><a href="#账户" class="header-anchor">#</a> 账户</h2> <ul><li><p>BTC 协议中，用户可以根据 ECDSA 算法随机生成一对私钥、公钥，代表一个 BTC 账户，相当于一个银行账户的密码、账户名。</p> <ul><li>示例：<div class="language-sh line-numbers-mode"><pre class="language-sh"><code>0xL3HpQs5M7tZLN1m6zmJ9YSPuFzA4gJDJy8Ru2hd5nAwcZC4tPm1T  <span class="token comment"># 私钥</span>
0x1N8nCD314Z87BgYsK1y3vwRpAk8S1qbRcg                    <span class="token comment"># 公钥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>前缀 0x 表示十六进制。</li> <li>私钥需要保密，而公钥公开给其他人。</li></ul></li> <li>BTC 采用椭圆曲线数字签名算法（ECDSA）生成数字签名，其中采用的椭圆曲线为 secp256k1 。
<ul><li>用户可以编写一个消息，将消息的哈希值用私钥加密之后公布，称为数字签名。其他人可使用对应的公钥解读数字签名，从而验证该消息的内容没有被篡改，并且是由该公钥对应的私钥签署的。</li></ul></li> <li>BTC 协议中，账户之间可以直接转账交易，只需用账户私钥生成交易的数字签名，相当于盖章授权。
<ul><li>不需要经过银行等第三方平台中转，实现了去中心化交易。</li></ul></li> <li>虚荣地址（Vanity Addresses）：虽然 BTC 私钥、公钥是随机的，但用户可以尝试生成大量私钥、公钥，直到公钥中包含有意义的单词，比如 ILoveU 。</li> <li><a href="https://www.bitaddress.org/" target="_blank" rel="noopener noreferrer">bitaddress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ：一个网站，用于随机生成 BTC 账户，支持离线使用。</li></ul></li> <li><p>生成一对私钥、公钥的步骤：</p> <ol><li><p>用户生成一个很大的随机整数，作为私钥（private key）。</p> <ul><li>私钥的长度为 256 bits = 32 bytes  。通常经过 Base58Check 编码，表示成 52 位长度的十六进制数。</li> <li>用户选择私钥时应该尽量随机，避免与其他人相同。</li></ul></li> <li><p>根据 ECDSA 算法，计算出私钥在椭圆曲线上对应的一个点，其坐标 x、y 作为公钥。</p> <ul><li>通过私钥可以计算出对应的公钥，但不能通过公钥反推出私钥。而且值域庞大，使得穷举几乎不可能。</li> <li>未压缩公钥（uncompressed）：由坐标 x、y 的值组成，并加上前缀 0x04 作为标识，总长度为 1+32+32 = 65 bytes 。</li> <li>压缩公钥（compressed）：由坐标 x 的值组成，并加上前缀 0x02 或 0x03 表示坐标 y 为偶数或奇数，总长度为 33 bytes 。
<ul><li>椭圆曲线关于 x 轴对称，一个坐标 x 对应两个 y 点。且在 secp256k1 曲线中，这两个 y 点分别为偶数、奇数，因此需要通过前缀区分。</li> <li>使用压缩公钥时，需要给私钥加上后缀 0x01 作为标识，其长度增加 1 字节。</li> <li>压缩格式的公钥、私钥更方便记录，是用户通常看到的格式，也是一般钱包采用的导入格式（Wallet Import Format，WIF）。</li> <li>钱包软件在实际使用公钥时，会从压缩格式转换成非压缩格式。</li></ul></li></ul></li> <li><p>计算压缩公钥的 SHA256 哈希值，再计算其结果的 RIPEMD-160 哈希值。</p></li> <li><p>将公钥哈希值（public key hash）经过 Base58Check 编码，表示成 34 位长度的十六进制数，称为账户地址（address）。</p></li></ol></li> <li><p>Base58Check 编码是为了将数据表示成更短的值，并加上校验码，并不会加密原数据。过程如下：</p> <ol><li>输入原数据 payload 。</li> <li>在 payload 之前加上 1 字节的地址版本号 version 。</li> <li>对 version、payload 串联成一个字符串，计算两次哈希值，取结果开头的 4 字节作为校验码 checksum 。
<ul><li>如果网络传输之后，再次计算两次哈希值，发现结果开头与校验码不一致，则说明编码值出错。</li></ul></li> <li>将 version、payload、checksum 串联成一个字符串，进行 base58 编码。
<ul><li>与 base64 相比，base58 的特点：
<ul><li>移除了 <code>+/</code> 两个特殊字符，只允许使用大小写字母、数字。</li> <li>移除了 <code>0OIi</code> 四个容易混淆的字母。</li></ul></li> <li>P2PKH 地址的 version 为 0x00 ，因此编码之后，开头为 1 。</li> <li>P2SH 地址的 version 为 0x05 ，因此编码之后，开头为 3 。</li> <li>BTC 私钥的 version 为 0x80 ，因此编码之后，未压缩格式的开头为 5 ，压缩格式的开头为 K 或 L 。</li></ul></li></ol></li></ul> <h2 id="交易"><a href="#交易" class="header-anchor">#</a> 交易</h2> <ul><li><p>一个交易（transaction）记录成特定格式的数据，像账本中的一条记录，主要包含以下信息：</p> <ul><li>version ：交易格式的版本号，占 4 bytes 。</li> <li>in-counter ：表示输入项的数量。</li> <li>inputs ：包含 n≥1 个输入项。
<ul><li>每个输入项的主要内容：
<ul><li>index ：输入项在 inputs 中的序号，从 0 开始递增。</li> <li>previous txid ：引用一个历史交易，表示将该交易的 UTXO 全部输入当前交易。</li> <li>sigScript</li></ul></li></ul></li> <li>out-counter ：表示输出项的数量。</li> <li>outputs ：包含 n≥1 个输出项。
<ul><li>每个输出项的主要内容：
<ul><li>index</li> <li>value ：输出的 BTC 数量。</li> <li>pkScript</li></ul></li> <li>一个交易的总输入减去总输出的差值，会被矿工当作交易费拿走，即 <code>fee = sum(inputs) – sum(outputs)</code> 。</li></ul></li> <li>locktime ：表示允许将该交易打包到区块中的最早时间，占 4 bytes 。
<ul><li>如果取值小于 5 亿，则视作区块高度。</li> <li>如果取值大于 5 亿，则视作 Unix 时间戳。</li> <li>交易通常将 locktime 设置为 0x00000000 ，表示不限制。</li></ul></li></ul></li> <li><p>区块 body 中可以记录 n≥1 个交易，最大数量取决于区块的容量限制。</p> <ul><li>记录的第一个交易必须是 coinbase 交易。
<ul><li>coinbase 交易不存在输入，凭空产生一定量可以输出的 BTC ，作为打包该区块的网络节点的激励。</li></ul></li> <li>coinbase 交易之后可以记录 m≥0 个普通交易。
<ul><li>通常采用交易的哈希值作为其标识符，称为 txid 。</li> <li>BTC 交易时，最小的单位为聪（satoshis），1 BTC = 10^8 聪。</li></ul></li> <li>一个交易数据的体积没有上限，只受到区块的容量限制。
<ul><li>增加交易体积时，通常需要增加交易费，吸引矿工打包该交易。</li> <li>通常以 satoshi/Byte 为单位计算平均的交易费。</li></ul></li></ul></li></ul> <h3 id="发起交易"><a href="#发起交易" class="header-anchor">#</a> 发起交易</h3> <ul><li><p>如果一个账户拥有一些 BTC ，则可以发起一个交易，输入一些 BTC ，然后输出给其它账户。</p> <ul><li>所有账户收到的 BTC ，都来自历史交易的输出，且源头都是 coinbase 交易。</li> <li>如果一个交易输出的 BTC ，尚未被目标账户花费，则称为未花费交易输出（Unspent TX Output，UTXO）。
<ul><li>一个账户拥有的所有 UTXO 总和，称为该账户的余额。</li> <li>一个交易的 UTXO 要么不被花费，要么被一次性全部花费，不能拆开花费。
<ul><li>例如 UTXO 为 5 BTC 时，用户可以新建一个交易，发送 1 BTC 给别人，然后将剩下的 BTC 发送给自己，从而实现找零。</li></ul></li></ul></li> <li>统计 BTC 区块链上所有交易的输入、输出，筛选出所有 UTXO ，保存为一个数据库，就可以知道所有账户的余额。
<ul><li>BTC 协议并没有直接提供 UTXO 数据库，但一些区块链浏览器提供了这种查询功能。</li></ul></li></ul></li> <li><p>用户发起一个交易的步骤：</p> <ol><li>编写一个交易。
<ul><li>此时需要连接到 BTC 网络，获取最新的区块链数据，从中查询账户的历史交易，选择将哪些交易的 UTXO 作为当前交易的输入。</li></ul></li> <li>生成交易的 sigScript ，存放在交易的 inputs 中。</li> <li>将交易广播到 BTC 网络上，等待矿工将它打包入新区块。</li></ol></li> <li><p>用户广播一个交易之后，需要等待矿工将它写入区块，才算交易成功。分为多个阶段：</p> <ul><li>0 次确认
<ul><li>：交易还没有被写入区块。</li></ul></li> <li>1 次确认
<ul><li>：交易被写入最新的一个区块。</li> <li>但可能有多个矿工同时打包出不同的最新区块，需要等待哪个最新区块最终被大部分矿工承认，因此交易还不算持久保存到区块链。</li></ul></li> <li>2 次确认
<ul><li>：交易被写入一个区块，该区块的深度为 2 。</li> <li>BTC 网络中，篡改最近的两个区块需要超过 50% 的哈希算力，成本很大，因此一般可靠。</li></ul></li> <li>6 次确认
<ul><li>：交易被写入一个区块，该区块的深度为 6 ，几乎不可能被篡改。</li> <li>由于 BTC 平均每隔 10 分钟生成一个区块，6 次确认需要等待 60 分钟。</li></ul></li></ul></li> <li><p>双花：一种攻击方式，指将同一个 UTXO 花费多次。</p> <ul><li>攻击方式举例：
<ul><li>一个不诚实的用户，同时广播多个交易，重复花费同一个 UTXO 。此时，诚实的矿工只会将其中一个交易写入新区块，将之后的交易视作无效。因此双花攻击无效。</li> <li>一个不诚实的矿工，明知当前区块链高度为 N ，但依然从高度 N-i 处重新生成一条区块链，从而重写最近 i 个历史区块中的交易。<br>
此时网络上同时存在新链和原链。根据 BTC 协议，所有矿工应该在最长的那条区块链上工作。不诚实的矿工需要掌握全网哈希算力的 50% 以上，使得新链生成新区块的速度比原链更快，在一段时间之后长度超越原链。<br>
因此这种双花攻击几乎不可能，需要消耗大量哈希算力和时间成本。</li></ul></li></ul></li></ul> <h3 id="pkscript"><a href="#pkscript" class="header-anchor">#</a> pkScript</h3> <p>：公钥脚本（Pubkey Script，pkScript），采用一种专用的脚本语言编写，包含一些指令。</p> <ul><li>该脚本语言的特点：
<ul><li>基于堆栈。</li> <li>非图灵完备，不支持循环。因此不能实现复杂的逻辑，但减少了出错的可能性。</li></ul></li> <li>pkScript 可以声明一些条件，当 sigScript 满足条件时才能花费其 UTXO 。
<ul><li>例如 P2PKH 的条件通常是：输出 n 个 BTC ，并指定一个公钥。只有拥有该公钥对应私钥的人，才有权花费该 UTXO 。</li></ul></li> <li>pkScript 又称为锁定脚本（locking script），因为它输出的 BTC 一直不可用，直到有人提供满足条件的 sigScript ，又称为解锁脚本。</li></ul> <p>pkScript 有多种类型：</p> <ul><li>Pay To Pubkey（P2PK）
<ul><li>：将 BTC 转账给公钥。</li></ul></li> <li>Pay To Public Key Hash（P2PKH）
<ul><li>：将 BTC 转账给公钥哈希。</li> <li>P2PK 常用于 BTC 早期的交易，后来被 P2PKH 取代。主要原因：
<ul><li>P2PKH 地址更短。</li> <li>转账给 P2PKH 地址时，采用公钥哈希，隐藏了公钥，提供了额外的安全性。直到用户花费该账户时，才会公开公钥。</li></ul></li></ul></li> <li>Pay To Script Hash（P2SH）
<ul><li>：将 BTC 转账给脚本哈希。
<ul><li>如果其他人提供的 sigScript 中，包含与 P2SH 哈希一致的脚本，称为赎回脚本（redeem script），则有权花费该 UTXO 。</li></ul></li> <li>基于赎回脚本可实现复杂的功能，例如多重签名、SegWit 兼容地址。</li></ul></li> <li>Pay to Witness Pubkey Hash（P2WPKH）
<ul><li>：与 P2PKH 类似，但启用了 SegWit 。</li></ul></li> <li>Pay to Witness Script Hash（P2WSH）</li> <li>Null Data（空数据）
<ul><li>：pkScript 的开头是一个操作符 OP_RETURN ，表示终止脚本执行。
<ul><li>OP_RETURN 之后可以添加任意内容的数据，反正不会被执行。</li> <li>该交易的 UTXO 不能被花费。</li></ul></li> <li>BTC 区块链原本用于记录交易信息，但一些用户想用区块链记录自定义的数据，比如一段文字广告。
<ul><li>有的用户在 coinbase 交易的剩余位置记录自定义数据。</li> <li>有的用户在普通交易的 pkScript 位置记录自定义数据，导致该交易被发送到无效地址，不能花费 UTXO 。</li> <li>推荐用户使用 OP_RETURN 记录自定义数据，此时将 UTXO 设置为 0 ，只需支付交易费。</li></ul></li></ul></li></ul> <h3 id="sigscript"><a href="#sigscript" class="header-anchor">#</a> sigScript</h3> <p>：签名脚本（Signature Script，sigScript）。</p> <ul><li>sigScript 包含以下内容：
<ul><li>pubKey ：账户公钥。</li> <li>sig ：交易数据的数字签名，使用账户私钥生成。</li></ul></li> <li>交易延展性（Transaction Malleability）攻击
<ul><li>：一种攻击方式，指改变未打包交易中的签名，使得整个交易的哈希值改变，导致引用该交易 txid 的其它交易失效。
<ul><li>由于椭圆曲线的对称性，可以计算出两个有效的签名，还可以根据其中一个签名推算出另一个签名。因此，可以替换交易中的签名。</li></ul></li> <li>常见的解决办法：
<ul><li>等待一个交易被打包，再引用它的 txid 。但这就不能实现闪电交易。</li> <li>规定只采用取值较小的那个签名。</li> <li>使用 SegWit 。</li></ul></li></ul></li></ul> <h3 id="segwit"><a href="#segwit" class="header-anchor">#</a> SegWit</h3> <p>：隔离见证，一种 BTC 的扩容方案，属于软分叉升级。</p> <ul><li><p>原理：给区块附加一个称为 witness 的结构，将交易中的见证数据（主要包含 sigScript ）移出，存放在 witness 区域。</p> <ul><li>这会减小交易的一大半体积，可以在区块中打包更多交易。</li> <li>witness 区域的 tree 哈希记录在 coinbase 交易中，从而嵌入 Merkle Tree 。</li> <li>此时的区块称为 SegWit 格式。基础容量（称为 size ）依然限制为 1MB ，附加 witness 数据时的总体积（称为 weight ）限制为 4MB 。</li> <li>此时交易的哈希值称为 wtxid 。改变 sigScript 时，不会影响 wtxid ，避免了 Transaction Malleability 攻击。</li></ul></li> <li><p>使用 SegWit 时，账户地址有两种格式：</p> <ul><li>原生地址（Native）：采用 Bech32 编码格式，只允许使用小写字母、数字，长度为 42 位，开头为 bc1 。</li> <li>兼容地址（Nested）：采用 P2SH 地址，开头为 3 。
<ul><li>原生地址地址的效率比兼容地址更高。</li> <li>传统地址（Legacy）不支持与 SegWit 原生地址转账。</li> <li>SegWit 兼容地址支持与传统地址、SegWit 原生地址转账。</li></ul></li></ul></li> <li><p>SegWit 软分叉还涉及到 BTC 社区的治理问题，相关历史：</p> <ul><li>2015 年，Bitcoin Core 开发人员提出了 BIP141 ，提议 SegWit ，是此时 BTC 变动最大的一次软分叉升级。</li> <li>2016 年，Bitcoin Core 按 BIP9 方式开始 SegWit 软分叉，但支持 SegWit 的矿工远未达到 95% 的激活阈值，主要原因：
<ul><li>SegWit 尚未推广，早期升级的收益较小。</li> <li>旧区块可通过 AsicBoost 算法提高挖矿的哈希算力。</li> <li>SegWit 增加了区块的复杂性，需要修改很多客户端代码，不如硬分叉简单。</li></ul></li> <li>2017 年 2 月，社区的开发人员提出了 BIP148 ，提议用户激活软分叉（User Activated Soft Fork，UASF），逼迫矿工激活 SegWit 。
<ul><li>BIP148 大意为：从 8 月开始，采用 BIP148 的节点会拒绝不支持 SegWit 的新区块，导致发生硬分叉。</li> <li>BIP9 让矿工投票决定软分叉升级，而 UASF 使得用户也拥有了控制权。但这更像一个抗议行动，不支持的矿工只是少了打包这部分用户的交易费。</li></ul></li> <li>2017 年 4 月，Charlie Lee 与矿工协商之后，成功在 LTC 上激活 SegWit 。</li> <li>2017 年 5 月，一些公司和矿池签署了纽约共识（New York Agreement，NYA），表示作为激活 SegWit 的交换，要求也激活 SegWit2x 。
<ul><li>原理：与 SegWit 不同，直接将区块的基础容量限制从 1MB 增加到 2MB ，属于硬分叉升级</li> <li>SegWit2x 与 BCH 的区块扩容类似，受到 Bitcoin Core 开发人员的反对，最终在 11 月放弃了该提议。</li></ul></li> <li>2017 年 5 月，一个开发人员提出了 BIP91 ，使得 BIP148 与 SegWit2x 两派可以兼容，避免发生硬分叉。
<ul><li>BIP91 的内容与 BIP148 相似，但没有限制时间。</li> <li>BIP91 部署之后，激活它的阈值为 80% 。当 BIP141 被激活或失败时，BIP91 就会停止。</li></ul></li> <li>2017 年 7 月，市场担心 BIP148 硬分叉的风险，BTC 价格从 $2700 跌到 $2000 ，促使矿工们支持 BIP91 并激活它。</li> <li>2017 年 8 月，SegWit2x 终于激活。
<ul><li>此时，大部分矿工、钱包软件依然没有升级 SegWit 。但是采用 SegWit 原生地址的用户越来越多，为了服务这部分用户，矿工、钱包软件会逐渐升级 SegWit 。</li></ul></li></ul></li></ul> <h2 id="合约交易"><a href="#合约交易" class="header-anchor">#</a> 合约交易</h2> <p>基于 P2SH 脚本可实现一些合约交易，提供多种功能。</p> <h3 id="多重签名"><a href="#多重签名" class="header-anchor">#</a> 多重签名</h3> <p>：多重签名（multi-signature，multisig），一种基于 P2SH 的交易方式。</p> <ul><li>原理：将 BTC 转账到一个 P2SH 地址，通过 pkScript 指定 n 个公钥，要求 sigscript 至少用 m 个对应的私钥签名才有效。
<ul><li>其中 1≤m≤n≤15 ，又称为 m-of-n 交易。</li></ul></li> <li>1of2 是允许两个账户中的任意一个都有权花费 UTXO 。</li> <li>2of3 适合三方交易。例如 A 想花费 BTC 从 B 处购买商品，先将 BTC 转账到 2of3 多签地址。
<ul><li>如果仲裁方判断交易成功，则与 B 一起签名，将 BTC 转账给 B 。</li> <li>如果仲裁方判断交易失败，则与 A 一起签名，将 BTC 转账给 A 。</li> <li>没有 A 或 B 的同意，仲裁方不能私自转走 BTC 。</li></ul></li></ul> <h3 id="闪电交易"><a href="#闪电交易" class="header-anchor">#</a> 闪电交易</h3> <p>：闪电交易（Lightning Network，LN），一种 layer2 技术，基于链下交易（Off-Chain）。</p> <ul><li><p><a href="https://github.com/lightning/bolts" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>原理：在区块链下进行任意数量的交易，然后将这些交易的结果保存到区块链。主要步骤如下：</p> <ol><li>开启通道：两个账号将一笔 BTC 转账到一个多签地址，暂时锁定，称为开启一个闪电交易通道（channel）。</li> <li>使用通道：双方建立对等连接（Peer connection），私下进行一些交易。</li> <li>关闭通道：双方根据交易结果，将多签地址的 BTC 分配给双方。</li></ol></li> <li><p>在通道中，双方私下进行的交易只需要互相知道，不必公布到区块链上，称为承诺交易（commitment transaction）。</p> <ul><li>每个承诺交易，表示此时的通道状态，即双方应该分别拥有通道的多少 UTXO 。</li> <li>每创建一个新的承诺交易，就撤销旧的承诺交易。
<ul><li>为此双方要交换一个承诺撤销密钥，证明它已撤销。</li> <li>如果一方将已撤销的承诺交易广播到链上，企图双花攻击。则另一方可以根据撤销密钥，广播一个更新的惩罚交易（Penalty transaction），将通道的全部资产转给自己。</li></ul></li> <li>每个承诺交易设置了 locktime ，如果某方离线，则另一方等待 locktime 时间之后就可以将承诺交易公布到链上，从而关闭通道。
<ul><li>每个承诺交易的 locktime 依次递减，因此越新的承诺交易能越早公布到链上。</li> <li>准备关闭通道时，双方签署最后一笔承诺交易，立即公布到链上。</li></ul></li></ul></li> <li><p>闪电交易通道只能连通两个账户，但大量相互开启通道的账户可以组成闪电交易网络。</p> <ul><li>假设 A 与 B 之间存在通道，B 与 C 之间存在通道，则 A 可以通过 B 间接转账给 C 。此时 B 称为路由节点，像计算机网络的路由转发。</li> <li>哈希时间锁定合约（Hash Time Locked Contracts，HTLC）：一种智能合约，用于保证路由节点的可信任。工作流程如下：
<ol><li>A 创建一个密钥 secret ，私下发送给 C 。</li> <li>A 在 A、B 之间的通道，使用 secret 的哈希值签署一个 HTLC 合约，将 BTC 转入合约。合约大意为：如果 B 能在 locktime 时间内发现 secret ，则有权获得合约的 UTXO ，否则资金将返回给 A 。</li> <li>B 在 B、C 之间的通道，也创建一个使用同样 secret 哈希值的 HTLC 合约，请求 C 提供 secret 。但是合约锁定的 UTXO 微少一点，因为 B 收取了交易费。locktime 也更短一点。</li> <li>C 提供 secret ，完成 B 的 HTLC 合约，得到 UTXO 。然后 B 再提供 secret ，完成 A 的 HTLC 合约。
<ul><li>即使 B 下线，C 依然可以完成 B 的 HTLC 合约，只有 B 会受到损失。</li></ul></li></ol></li> <li>一些大型的路由节点可连接大量用户，像中心化网络。</li> <li>一些路由节点会担任瞭望塔（watchtower），监控网络，广播惩罚交易。</li></ul></li> <li><p>优点：</p> <ul><li>能快速处理大量新交易。</li> <li>交易费很低：支付给路由节点的费用很低，适合以 satoshis 为单位的小额交易。</li> <li>耗时短：每个交易不超过一分钟，不需要等待区块链打包、确认。</li> <li>隐私：只有开启通道、关闭通道的两次交易需要公布到链上，期间的交易不会上链，路由节点也不会知道整个交易的源头、终点。</li> <li>通道中的交易不必打包到区块链，因此节省了区块空间，降低了区块链的负载。</li></ul></li> <li><p>相关历史：</p> <ul><li>2017 年 5 月，LTC 区块链进行了第一次闪电交易。</li> <li>2019 年 1 月，twitter 用户发起了一场称为闪电火炬（Lightning Torch）的行动，用于推广闪电交易。
<ul><li>规则：通过闪电交易发送一笔小额 BTC ，收到转账的账户添加 10w satoshis 之后再发送给下一个账户，以此类推。</li> <li>这笔 BTC 传递了将近 300 次，最终被捐赠。</li></ul></li></ul></li></ul> <h3 id="coinjoin"><a href="#coinjoin" class="header-anchor">#</a> CoinJoin</h3> <p>：一种混币方案。</p> <ul><li><p>原理：n 个账户共同发起一笔 BTC 交易，分别输入 C 数量的 BTC ，然后分别输出 C 数量到 n 个账户。</p> <ul><li>如果输出账户与输入账户都是不同的地址，则难以确定它们之间的对应关系。</li> <li>n 的数量越大，混淆度越高。</li></ul></li> <li><p>假设用户 A 参与了一次 CoinJoin 混币，从自己的一个账户发送 BTC 到自己的另一个账户。</p> <ul><li>虽然混币交易是公开的，其他人知道了 A 参与了混币，但并不知道哪个输出账户是由 A 控制，任意一个输出账户是由 A 控制的概率为 1/n 。</li> <li>因此即使输入账户暴露了现实身份，输出账户也重新得到了匿名性。</li></ul></li> <li><p>BTC 账户具有匿名性，但账户的交易过程、余额都是公开的，难以保护隐私。</p> <ul><li>例如用户 A 使用一个 BTC 账户在网上购物，转账记录都是公开的，其他人可以知道他购买的所有商品，推测他的消费习惯、个人喜好。
<ul><li>如果购物时的 IP 地址、物流信息被泄露，账户就失去了匿名性。即使 A 将 BTC 转入其它账户，其他人也知道新账户的地址，推测新账户很可能属于他。</li></ul></li></ul></li> <li><p>混币（Coin Mixing）</p> <ul><li>：指混淆多个账户的交易过程，使得难以确定每个账户的收入来自哪个账户、支出去向哪个账户，只能知道每个账户收入、支出的数量以及余额。</li> <li>常见的混币方案：
<ul><li>通过第三方平台转账：比如将币转入中心化交易所，再由从交易所转出到其它账户地址。但这样需要担心交易所的提现风险，而且交易所也能查出交易过程、记录 KYC 信息。</li> <li>CoinJoin</li></ul></li> <li>闪电交易也加强了隐私，但并不属于混币，而是避免交易过程上链。</li></ul></li></ul> <h2 id="网络"><a href="#网络" class="header-anchor">#</a> 网络</h2> <ul><li><p>一些主机根据 BTC 协议相互通信，组成了 BTC 网络。这些主机称为 BTC 节点。</p> <ul><li>基于 TCP/IP 协议进行通信。</li> <li>通信模式为点对点（P2P），即主机之间两两建立对等连接。
<ul><li>如果两个节点建立对等连接，则称为相邻节点。</li> <li>一个节点可以将消息发送给所有相邻节点，后者再转发给它们的相邻节点，以此类推，就可以将该消息广播给网络的大部分节点。</li></ul></li> <li>通常人们使用的是 BTC 主网络，但还有测试网络等其它网络。每个网络中存在一条独立的区块链。</li></ul></li> <li><p>节点分类：</p> <ul><li>全节点（Full Node）
<ul><li>：存储了 BTC 区块链的所有区块，是 BTC 网络的基础。</li> <li>可以接收并验证网络上广播的交易、区块，如果有效则广播给其它节点。</li> <li>允许其它节点连接到自己，从而下载区块链。</li></ul></li> <li>挖矿节点（Mining Node）
<ul><li>：属于全节点，但还会收集交易、打包新区块，即更新区块链。</li></ul></li> <li>轻节点（Lightweight Node）
<ul><li>：只存储所有区块的的 header ，需要读取区块内容时，再从全节点下载。
<ul><li>可根据自己存储的 header ，验证全节点提供的各个区块是否正确。</li></ul></li> <li>全节点能够独立验证一个交易、区块是否有效，而轻节点需要依赖全节点。</li> <li>大部分的钱包软件属于轻节点，通过 SPV 验证指定账户的历史交易、UTXO 。
<ul><li>简单支付验证（Simplified Payment Verification，SPV）：普通节点连接到全节点，发送布隆过滤器（bloom filter），筛选出与指定账户相关的所有历史交易，然后下载这些交易。</li></ul></li></ul></li></ul></li> <li><p>一个全节点的启动步骤：</p> <ol><li>与至少一个全节点建立对等连接，加入 BTC 网络。
<ul><li>通常在本机存储了一些全节点的 IP 地址，可在启动时快速连接它们。</li> <li>可以发现并连接新的全节点。也可以广播自己的 IP 地址，供其它节点连接。</li> <li>默认监听 TCP 8333 端口，供其它节点连接自己。也可以不监听，只允许自己主动连接其它节点。</li></ul></li> <li>从其它全节点下载区块数据，更新本机存储的区块链。
<ul><li>如果本机之前没有存储区块链，则需要从第一个区块开始下载并验证各个区块。</li> <li>如果本机已经存储了旧的区块链，则只需下载并验证最新的一些区块。</li></ul></li> <li>保持运行，接收网络上广播的消息。例如：
<ul><li>接收新产生的区块，如果验证通过则存储到本机。</li> <li>接收新的未打包交易，如果验证通过则广播给相邻节点。</li></ul></li></ol></li> <li><p>相关概念：</p> <ul><li><a href="https://bitnodes.io/" target="_blank" rel="noopener noreferrer">bitnodes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>：一个网站，统计了全球各地的 BTC 全节点的数量。</li></ul></li> <li><a href="https://github.com/bitcoin/bitcoin" target="_blank" rel="noopener noreferrer">Bitcoin Core<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>：一个 C++ 程序，实现了标准、完整的 BTC 协议，可用于运行一个全节点，还提供了挖矿、钱包的功能。
<ul><li>包含一个守护进程 bitcoind ，进行 RPC 通信。</li> <li>包含一个命令行工具 bitcoin-cli ，供用户操作。</li> <li>基于 Qt 提供了 GUI 界面，又称为 Bitcoin-Qt 。</li></ul></li> <li>最初由中本聪开发，后来作为一个开源项目托管在 GitHub 上。</li></ul></li> <li><a href="https://github.com/bitcoinj/bitcoinj" target="_blank" rel="noopener noreferrer">bitcoinj<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>：一个实现了 BTC 协议的 Java 库，可用于编写钱包软件。</li></ul></li></ul></li></ul> <h3 id="共识"><a href="#共识" class="header-anchor">#</a> 共识</h3> <ul><li><p>所有 BTC 节点遵循一些相同的共识规则，比如如何验证一个交易、区块是否有效。</p></li> <li><p>BTC 改进提案（Bitcoin Improvement Proposals，BIP）：BTC 社区通过提案来讨论一些改进方案。</p> <ul><li><a href="https://github.com/bitcoin/bips" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>实施一个新的共识规则时，根据兼容性，分为两种情况：</p> <ul><li>软分叉（Soft Fork）：新的共识规则向前兼容旧规则，因此旧节点依然接受新节点打包的区块。
<ul><li>但旧节点打包的区块，要符合新共识规则才会被新节点接受，否则网络分叉成两条区块链。</li></ul></li> <li>硬分叉（Hard Fork）：新的共识规则不向前兼容，因此旧节点不会接受新节点打包的区块，导致新、旧网络分叉成两条区块链。</li></ul></li> <li><p>根据 BIP9 ，一个软分叉升级的流程如下：</p> <ol><li>将软分叉部署到网络上，进入 started 状态。</li> <li>矿工们修改新区块的 nVersion 中的标志位，表示是否支持该软分叉。</li> <li>如果在超时之前，该软分叉获得 95% 矿工（占全网哈希算力的比例）的支持，则锁定（lock_in）成为共识规则。然后在一段时间之后激活（activate），给其它节点留有准备时间。
<ul><li>如果超时，则部署失败，变为 failed 状态。</li></ul></li></ol></li></ul> <h2 id="矿工"><a href="#矿工" class="header-anchor">#</a> 矿工</h2> <ul><li><p>打包新区块的节点，有权得到 coinbase 交易产生的 BTC 。因此该过程称为挖矿，运行挖矿节点的人们称为矿工（miner）。</p></li> <li><p>矿工挖矿的流程：</p> <ol><li>接收网络上广播的多个交易，打包成一个候选区块。
<ul><li>为了收益，矿工会优先打包交易费高、体积小的交易。</li> <li>矿工需要验证交易是否有效，比如 sigScript、locktime 。否则打包的区块不符合共识规则，不会被其他矿工承认。</li></ul></li> <li>尝试穷举区块的 nonce 值，直到满足挖矿难度，使得候选区块变成有效区块。
<ul><li>如果发现其他矿工抢先打包了新区块，则放弃打包当前区块，开始打包下一个区块。</li></ul></li></ol></li> <li><p>矿工打包一个新区块时，能得到两种收益：</p> <ul><li>coinbase 奖励
<ul><li>BTC 协议规定，BTC 币总量为 2100 万个。初期的每个区块 coinbase 会产生 50 个 BTC 。每隔 4 年，即大概 21 万个区块，新区块的产量减少一半。</li> <li>因此 coinbase 奖励会越来越少，矿工越来越依赖交易费的收益。</li></ul></li> <li>区块内所有交易的交易费
<ul><li>假设 coinbase 奖励为 25 个 BTC ，总交易费为 0.1 个，则矿工可以编写 coinbase 交易，将 25.1 个发送到指定账户。</li></ul></li></ul></li> <li><p>矿工需要付出一定成本，主要是运行挖矿节点的设备费用、电费、网络费。</p> <ul><li>独自挖矿时，矿工自己算力占全网算力的比例，就是挖矿成功率，可能隔很多天才能挖矿成功。</li> <li>早期的 BTC 主要采用 CPU 挖矿，后来过渡到效率更高的 GPU 挖矿，再后来过渡到专业矿机，采用特制的集成电路芯片（ASIC）。
<ul><li>目前的全文哈希算力极高，竞争极大，使用家用电脑独自挖矿的成功概率趋近于零。</li></ul></li></ul></li> <li><p>一些矿工会组成一个矿池，一起挖矿。然后根据贡献的算力，分配挖矿收益。</p> <ul><li>矿池下的矿工不需要作为节点加入 BTC 网络，而只需要连接到矿池服务器，执行运算、提交工作量证明。</li> <li>与独自挖矿相比，矿池每天都能获得稳定收益。而且即使算力较低，也可以到矿池出售。</li></ul></li></ul> <h3 id="挖矿难度"><a href="#挖矿难度" class="header-anchor">#</a> 挖矿难度</h3> <ul><li><p>矿工打包新区块时，需要尝试指定 nonce 值，比如穷举。如果使得当前 header 的哈希值小于等于 target threshold ，则有权打包该区块，被其他矿工承认。</p> <ul><li>SHA256 哈希值的长度为 32 bytes ，而 target threshold 以有损压缩形式存储为 nBits ，长度为 4 bytes 。</li> <li>例：根据 nBits 计算出 target threshold<div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> nBits  <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0x170cfecf'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>                              <span class="token comment"># 假设 nBits 的取值</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> target <span class="token operator">=</span> <span class="token number">256</span><span class="token operator">**</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0x17'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0x0cfecf'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>   <span class="token comment"># 将第一个字节作为 256 的幂，再乘以后三个字节</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'0x'</span> <span class="token operator">+</span> <span class="token string">&quot;{:064x}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
<span class="token string">'0x0000000000000000000cfecf0000000000000000000000000000000000000000'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>可见 nBits 第一个字节的值越大，会使 taget 越大，开头连续的 0 越少，因此挖矿难度越小。</li></ul></li></ul></li> <li><p>difficulty 表示挖矿难度。</p> <ul><li>计算公式如下：<div class="language-py line-numbers-mode"><pre class="language-py"><code>diffculty <span class="token operator">=</span> difficulty_1_target <span class="token operator">/</span> target
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>可见 difficulty 与 target 成反比，取值越小则挖矿难度越小，最小为 1 。</li></ul></li> <li>difficulty_1_target 表示区块链的初始难度，是一个常数：<div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> difficulty_1_target <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">**</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'0x'</span> <span class="token operator">+</span> <span class="token string">&quot;{:064x}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>difficulty_1_target<span class="token punctuation">)</span>
<span class="token string">'0x00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> difficulty_1_target <span class="token operator">/</span> target
<span class="token number">21659675333681.926</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li>当 difficulty 为 1 时，target 达到允许的最大值 0x1d00FFFF 。因为有损压缩丢失了右侧的所有 0xF ，所以有的程序会将 difficulty_1_target 计算成偏小的值：<div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> _target <span class="token operator">=</span> <span class="token number">256</span><span class="token operator">**</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0x1d'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0x00FFFF'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'0x'</span> <span class="token operator">+</span> <span class="token string">&quot;{:064x}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>_target<span class="token punctuation">)</span>
<span class="token string">'0x00000000ffff0000000000000000000000000000000000000000000000000000'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> _target <span class="token operator">/</span> target
<span class="token number">21659344833264.848</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>丢失右侧 0xF 的 difficulty_1_target 常用于快速估算难度，称为 bdiff（Bitcoin difficulty）。</li> <li>标准的 difficulty_1_target 常用于正式挖矿，称为 pdiff（Pool difficulty）。</li></ul></li> <li>例：根据 nBits 估算出 difficulty<div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> nBits      <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0x170cfecf'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> difficulty <span class="token operator">=</span> <span class="token number">256</span><span class="token operator">**</span><span class="token punctuation">(</span><span class="token number">29</span> <span class="token operator">-</span> <span class="token punctuation">(</span>nBits <span class="token operator">&gt;&gt;</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">65535.0</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nBits <span class="token operator">&amp;</span> <span class="token number">0xFFFFFF</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> difficulty
<span class="token number">21659344833264.848</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li>BTC 预计每隔 10 分钟生成一个新区块。为了维持这一速率，所有节点会每隔 2016 个区块调整一次挖矿难度，重新计算 nBits ：<div class="language-py line-numbers-mode"><pre class="language-py"><code>expected_time  <span class="token operator">=</span> <span class="token number">2016</span><span class="token operator">*</span><span class="token number">10</span>    <span class="token comment"># 理论上最近 2016 个区块应该消耗 2016*10 分钟即 2 周</span>
actual_time    <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># 填入实际上最近 2016 个区块消耗的时长</span>
new_difficulty <span class="token operator">=</span> old_difficulty <span class="token operator">*</span> <span class="token punctuation">(</span> actual_time <span class="token operator">/</span> expected_time <span class="token punctuation">)</span>
new_nBits      <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># 根据 new_difficulty 算出 new_nBits</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>理论上，SHA256 哈希值有 2^256 种可能性，而 nonce 只有 2^32 种可能性，因此可能穷举 nonce 的所有值之后依然不满足 target threshold 。</p> <ul><li>例如 2020 年发布的蚂蚁矿机 S19 ，额定算力为 95 THash/s ，遍历 nonce 所有值的耗时不超过 1 秒：<div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">**</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">95</span><span class="token operator">*</span><span class="token number">10</span><span class="token operator">**</span><span class="token number">9</span><span class="token punctuation">)</span>
<span class="token number">0.045</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li>当 nonce 被穷举完时，矿工通常会在 coinbase 交易中加入一个 4 bytes 的随机数，称为 extraNonce ，从而增加到 2^64 种可能性。</li> <li>例如 2020 年 BTC 全网算力达到了 150 EHash/s = 150 * 10^3 PHash/s = 150 * 10^6 THash/s ，遍历 nonce + extraNonce 消耗的秒数为：<div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">**</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">150</span><span class="token operator">*</span><span class="token number">10</span><span class="token operator">**</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>因此挖矿难度自动上调得很大，从而限制产生新区块的耗时依然为 10 分钟。矿工需要增加 extraNonce 的位数到 8 bytes 。</li></ul></li></ul> <h2 id="相关历史"><a href="#相关历史" class="header-anchor">#</a> 相关历史</h2> <ul><li><p>2008 年，一个网名为 Satoshi Nakamoto（中本聪）的人发布了 <a href="https://bitcoin.org/bitcoin.pdf" target="_blank" rel="noopener noreferrer">比特币白皮书<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，设计了 BTC 的最初架构：</p> <ul><li>去中心化交易：属于点对点的交易系统。用户之间可以直接转账交易，不需要经过第三方机构中转、审批。</li> <li>基于区块链，存储已发生的转账交易，防止被篡改。
<ul><li>所有交易是公开记录的，容易溯源。但账户地址是匿名的，不需绑定身份信息。</li> <li>工作量证明（Proof-of-Work）：各节点都可以尝试开采新区块，但只有最先满足挖矿难度的节点有权开采新区块，并提交 nonce 作为哈希运算的工作量证明。</li> <li>激励：成功创建新区块的节点，可以获得一定量的 BTC 。</li> <li>如果同时存在多条区块链，则最长的那条拥有的工作量证明最多，被各节点接受。</li></ul></li></ul></li> <li><p>2009 年 1 月，中本聪生成了第一个 BTC 区块，称为创世区块（Genesis Block）。</p> <ul><li>中本聪在该区块的 coinbase 中记录了一个字符串，是泰晤士报的一个新闻标题：<code>The Times 03/Jan/2009 Chancellor on brink of second bailout for banks.</code> ，是指英国政府在 2008 年金融危机后，对银行进行第二次救助。</li> <li>这表示中本聪希望发明一种货币，摆脱传统金融机构的弊端。</li></ul></li> <li><p>2010 年 5 月，一个美国程序员在 bitcointalk.org 论坛发帖，愿意花费 10000 BTC 换取两个披萨，最后在当地披萨店换取 40 美元左右的披萨。这标志着 BTC 首次兑换实物。</p></li> <li><p>2010 年 8 月，有人利用 BTC 协议的一个严重漏洞，在一次交易中向两个地址分别发送了 900 多亿 BTC 。</p> <ul><li>该漏洞是因为 BTC 代码没有考虑到交易输出值过大的情况，以至于求和值溢出。</li> <li>发现区块中打包了这个错误交易之后，Bitcore 开发者在几个小时之后升级了代码，通过软分叉拒绝这种错误交易。这引发了网络分叉，新区块链很快超过了旧区块链的长度。</li></ul></li> <li><p>2011 年 2 月，BTC 单价达到 1 美元，区块高度达到 10w ，已开采 500w 个 BTC ，全网算力达到 10 GHash/s 。</p></li> <li><p>2011 年 4 月，中本聪向 Bitcoin Core 一个开发者发送了一封电子邮件作为告别，从此从互联网消失。</p></li> <li><p>2011 年 6 月，日本交易所 Mt.Gox 的用户数据库被泄露，导致几百个弱密码哈希的用户被盗号，总共损失 25000 BTC 。几天之后又被黑客登录了一个管理员账户，提取了 2000 BTC 。</p> <ul><li>2013 年，Mt.Gox 成为全球最大交易所，交易量占全球 70% 。</li> <li>2014 年，Mt.Gox 突然申请破产保护，停止交易、提币，宣称过去几年累计丢失了 85w BTC 。不确定是黑客攻击还是监守自盗。</li></ul></li></ul></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/Smart-Chou/HSAIO/edit/main/docs/Notes/Distributed/区块链/BTC.md" target="_blank" rel="noopener noreferrer">编辑此页</a></div> <div class="meta-item update-time"><span class="label">上次编辑于:</span> <span class="info">2022年3月24日 14:25</span></div> <!----></footer> <!----> <div class="comments-wrapper"><div class="waline-wrapper"><div id="waline-comment"></div></div></div> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><div class="media-links-wrapper"><a href="/rss.xml" rel="noopener noreferrer" target="_blank" aria-label="Rss" data-balloon-pos="up" class="media-link"><span class="sr-only">Rss</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-rss"><circle cx="512" cy="512" r="512" fill="#FD9B00"></circle> <path d="M687.981 740.39c0-225.92-183.617-409.777-409.21-409.777v-97.205c279.353 0 506.617 227.506 506.617 506.98H687.98zm-74.841 0h-97.538c0-63.567-24.688-123.245-69.43-167.993-44.762-44.856-104.24-69.556-167.54-69.556v-97.176c184.44 0 334.508 150.046 334.508 334.725zM346.038 605.166c37.35 0 67.514 30.357 67.514 67.39 0 37.146-30.163 67.177-67.514 67.177-37.219 0-67.458-30.03-67.458-67.176 0-37.034 30.24-67.391 67.458-67.391z" fill="#FFF"></path></svg></a><a href="https://github.com/Smart-Chou" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="https://qm.qq.com/cgi-bin/qm/qr?k=hH6gqBpGrQ80a0kBI-69N6OWXMIJ7825&amp;noverify=0" rel="noopener noreferrer" target="_blank" aria-label="QQ" data-balloon-pos="up" class="media-link"><span class="sr-only">QQ</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-qq"><circle cx="512" cy="512" r="512" fill="#5EAADE"></circle> <path d="M729.46 627.3c-3.157-39.628-24.045-83.747-32.624-105.91l-22.084-57.047c-.702-23.73 6.312-78.322-30.511-146.61s-110.82-74.446-124.497-75.147c-13.677-.701-99.248-1.403-141.331 72.945-42.084 74.347-30.745 148.812-30.745 148.812l-23.523 57.478c-.001.002-10.962 26.223-20.43 58.135-9.469 31.914-18.938 82.064-9.469 92.234 9.47 10.17 43.837-46.643 46.993-51.903 0 0 2.456 27.18 8.943 41.383l.81 1.776.33.723.38.826.3.652.444.96.203.436a281.465 281.465 0 0 0 1.917 4.025l.189.386c.231.473.468.953.711 1.442l.146.292c6.886 13.807 18.61 33.823 37.443 50.42l.018.016-1.184.387c-10.667 3.516-31.694 11.21-40.625 19.82-1.717 1.655-2.987 3.344-3.65 5.045-5.376 13.794 4.208 15.43 20.575 16.366 16.366.934 94.923 3.04 132.564-2.221.407-.056.787-.114 1.17-.171 2.711.094 5.324.142 7.83.16l.151.002c.836.005 1.663.008 2.475.008.496 0 1.015-.002 1.542-.006l.21-.001a222.593 222.593 0 0 0 5.462-.107c.26.038.508.076.778.114 37.642 5.26 116.198 3.156 132.564 2.22 16.366-.934 25.951-2.571 20.574-16.365-4.302-11.037-34.175-21.62-45.956-25.413a141.388 141.388 0 0 0 7.958-7.645l.237-.245a142.494 142.494 0 0 0 2.53-2.702c42.435-46.643 38.928-76.101 40.682-92.935 0 0 35.775 51.553 43.488 53.306 7.713 1.754 10.169-6.31 7.012-45.94z" fill="#FFF"></path></svg></a><a href="/assets/img/qr_weixin.png" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a><a href="https://www.zhihu.com/people/ChouCong" rel="noopener noreferrer" target="_blank" aria-label="Zhihu" data-balloon-pos="up" class="media-link"><span class="sr-only">Zhihu</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-zhihu"><circle cx="512" cy="512" r="512" fill="#006CE2"></circle> <path d="M513.65 491.261H411.551c1.615-16.154 5.815-60.095 5.815-84.973 0-24.88-.323-60.742-.323-60.742h102.744V329.39c0-21.647-9.37-31.34-17.124-31.34h-178.67s5.169-17.77 10.015-36.186c4.846-18.417 15.832-44.264 15.832-44.264-63.003 4.2-67.958 50.941-81.743 92.729-13.787 41.785-24.556 62.356-44.586 107.912 27.786 0 55.249-13.57 66.879-32.309 11.631-18.74 16.908-40.71 16.908-40.71h62.035v59.019c0 21.107-3.878 87.45-3.878 87.45H254.742c-19.386 0-29.724 48.894-29.724 48.894h133.76c-8.4 75.82-26.493 106.191-51.91 152.716-25.418 46.525-92.728 99.406-92.728 99.406 41.033 11.63 86.589-3.555 105.974-21.972 19.386-18.417 35.863-49.756 47.817-72.838 11.954-23.081 21.972-65.124 21.972-65.124L498.462 766.86s4.846-24.233 6.461-39.418c1.616-15.186-.755-26.385-4.63-35.433-3.878-9.046-15.509-21.54-31.018-39.634-15.507-18.094-48.034-52.879-48.034-52.879s-15.832 11.63-28.108 21.001c9.046-21.97 16.262-79.695 16.262-79.695h122.343v-20.249c.003-17.66-7.319-29.29-18.089-29.29zm287.337-200.747h-234.35a4.308 4.308 0 0 0-4.309 4.308v435.099a4.308 4.308 0 0 0 4.308 4.308h40.226l14.7 50.402 81.096-50.402h98.328a4.308 4.308 0 0 0 4.308-4.308v-435.1a4.308 4.308 0 0 0-4.308-4.308zM755.97 684.47h-52.343l-61.548 39.095-10.823-39.095h-18.738V338.116H755.97v346.355z" fill="#FFF"></path></svg></a><a href="mailto:ChouCong912@gmial.com" rel="noopener noreferrer" target="_blank" aria-label="Gmail" data-balloon-pos="up" class="media-link"><span class="sr-only">Gmail</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-gmail"><circle cx="512" cy="512" r="512" fill="#DB4437"></circle> <path d="M277.48 285.567h465.767v441.362H277.48V285.567z" fill="#E67C73"></path> <path d="M282.543 285.567h-10.645c-25.962 0-47.122 21.808-47.122 48.705v343.952c0 26.897 21.08 48.705 47.122 48.705h24.976V407.954l213.49 169.95 213.489-169.95V726.93h24.975c26.04 0 47.123-21.809 47.123-48.705V334.272c0-26.897-21.134-48.705-47.123-48.705h-10.644L510.364 480.44 282.542 285.567z" fill="#FFF"></path></svg></a></div> <div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">豫ICP备20006179号</a></div> <div class="copyright">ChouCong | Theme-Hope</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="关闭" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">该应用可以安装在您的 PC 或移动设备上。这将使该 Web 应用程序外观和行为与其他应用程序相同。它将在出现在应用程序列表中，并可以固定到主屏幕，开始菜单或任务栏。此 Web 应用程序还将能够与其他应用程序和您的操作系统安全地进行交互。</p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>详情</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        安装 <span></span></button> <button class="cancel-button">
        取消
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="关闭" aria-label="关闭" class="pswp__button pswp__button--close"></button> <button title="分享" aria-label="分享" class="pswp__button pswp__button--share"></button> <button title="切换全屏" aria-label="切换全屏" class="pswp__button pswp__button--fs"></button> <button title="缩放" aria-label="缩放" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="上一个 (左箭头)" aria-label="上一个 (左箭头)" class="pswp__button pswp__button--arrow--left"></button> <button title="下一个 (右箭头)" aria-label="下一个 (右箭头)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!----></div></div>
    <script src="/assets/js/app.79d9fc16.js" defer></script><script src="/assets/js/vendors~layout-Layout.cf571703.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.3798fe66.js" defer></script><script src="/assets/js/page-BTC.28113b2e.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.416fc3ad.js" defer></script><script src="/assets/js/435.b5a1071e.js" defer></script>
  </body>
</html>
