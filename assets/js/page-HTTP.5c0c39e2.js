(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{749:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"http"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[s._v("#")]),s._v(" HTTP")]),s._v(" "),a("h2",{attrs:{id:"curl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#curl"}},[s._v("#")]),s._v(" curl")]),s._v(" "),a("p",[s._v("：一个命令行工具，常用于访问 HTTP 服务器。")]),s._v(" "),a("ul",[a("li",[s._v("基于 libcurl 库开发，支持 HTTP、HTTPS、FTP、SMTP 等多种通信协议。")])]),s._v(" "),a("p",[s._v("命令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("URL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问指定网址（默认为 GET 方法），并将 HTTP 响应内容打印到 stdout")]),s._v("\n      -X POST                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用指定类型的 HTTP 方法")]),s._v("\n      -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Connection: Keep-Alive"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加上 header（可以重复使用该命令选项）")]),s._v("\n      -b "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=leo"')]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加上 cookies")]),s._v("\n      -I                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示 response header ，这会发出 HEAD 请求")]),s._v("\n      -L                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果 HTTP 响应报文是重定向，则自动跟随")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关于下载")]),s._v("\n      -o "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --output ，将 URL 指向的资源保存为指定路径的文件")]),s._v("\n      -O                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存为当前目录下的同名文件")]),s._v("\n      -C "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("offset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --continue-at ，从 offset 处继续下载，offset 为 - 则会自动计算。这需要响应报文包含 Content-Range 字段，声明数据片段的起始、结束位置")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关于身份认证")]),s._v("\n      -k                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --insecure ，不验证网站的 SSL 证书是否有效，但依然会建立 SSL 连接")]),s._v("\n      -u "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":PASSWORD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送用户名，或者用户名加密码")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送 POST body 的选项")]),s._v("\n      -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id=001&name=leo"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# --data ，在请求报文的 body 中，以纯文本形式发送数据。此时默认采用 POST 方法，并设置 header ："Content-Type : application/x-www-form-urlencoded"')]),s._v("\n      --data-ascii "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价于 -d")]),s._v("\n      --data-urlencode "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 经过 URLencode 之后再以纯文本形式发送")]),s._v("\n      --data-binary "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以二进制形式发送")]),s._v("\n      --data-binary @f1           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上述选项都可以通过 @filepath 的格式发送文件的内容。不过 --data-binary 是以二进制格式发送，避免乱码")]),s._v("\n      -F "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Hello               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 发送 form 表单格式的 POST body ，此时默认采用 POST 方法，并设置 header ： "Content-Type: multipart/form-data"')]),s._v("\n      -F "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("file1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@f1                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该选项可以多次使用")]),s._v("\n      -T f1                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传文件，此时默认采用 PUT 方法")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关于通信协议")]),s._v("\n      --ipv4                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制 curl 将目标域名解析到 ipv4 地址")]),s._v("\n      --ipv6\n      --tlsv1.3                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用 TLS 1.3 协议")]),s._v("\n      --http1.0                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用 HTTP/1.0 协议。默认优先采用 HTTP/1.1")]),s._v("\n      --http2                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用 HTTP/2.0 协议，这需要 curl 7.43 以上版本")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关于通信过程")]),s._v("\n      -v                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示通信过程的详细信息（包括请求报文、响应报文）")]),s._v("\n      --progress-bar              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示进度条")]),s._v("\n      -m "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置整个操作的超时时间（单位为秒）")]),s._v("\n      --connect-timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置连接上 Web 服务器的超时时间（单位为秒）")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用代理")]),s._v("\n      -x "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PROTOCOL://"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user:password@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("HOST:PORT   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --proxy")]),s._v("\n      -x http://admin:123456@10.0.0.1:80\n      -x socks5://10.0.0.1:1080\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br")])]),a("ul",[a("li",[s._v("如果 URL 包含特殊字符，则要用单引号或双引号作为定界符，以免引发歧义。")]),s._v(" "),a("li",[s._v("用 "),a("code",[s._v("curl ip:port")]),s._v(" 也可以测试网络端口能否连通，与 telnet 类似。")]),s._v(" "),a("li",[s._v("使用 curl 时，默认不会显示进度表。\n"),a("ul",[a("li",[s._v("通过 -o 或 -O 选项下载文件时，会显示进度表。")]),s._v(" "),a("li",[s._v("将 stdout 从终端重定向到其它位置时，会通过 stderr 显示一个进度表。如下："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 127.0.0.1 | grep ok")]),s._v("\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                Dload  Upload   Total   Spent    Left  Speed\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("495")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("495")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   905k      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" --:--:-- --:--:-- --:--:--  483k\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("可以改为显示一行简单的进度条："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 127.0.0.1 --progress-bar > /dev/null")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################################################################## 100.0%")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[s._v("或者隐藏进度条，但这样可能隐藏其它报错信息："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(" /dev/null\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])])])]),s._v(" "),a("h2",{attrs:{id:"wget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wget"}},[s._v("#")]),s._v(" wget")]),s._v(" "),a("p",[s._v("：一个命令行工具，与 curl 类型，只支持 HTTP、HTTPS、FTP 协议。")]),s._v(" "),a("p",[s._v("命令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("URL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问指定网址（默认为 GET 方法），并将 HTTP 响应内容保存为当前目录下的文件")]),s._v("\n       -b                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在后台下载")]),s._v("\n       -c                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --continue ，如果要保存的文件已存在，则从该文件的长度之后继续下载（默认是保存为另一个文件，文件名加上递增的编号后缀）")]),s._v("\n       -O f1.zip                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存为指定路径的文件")]),s._v("\n       -t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置下载失败时的重试次数（0 是无限次）")]),s._v("\n\n       --http-user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送用户名")]),s._v("\n       --http-password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送密码")]),s._v("\n       --limit-rate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("300k        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制下载速度")]),s._v("\n       --no-check-certificate   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不检查 HTTPS 网址的证书")]),s._v("\n       --spider                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不下载文件，可用于检测该网址是否有效")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("wget 相当于 curl -LO 。")]),s._v(" "),a("li",[s._v("例：爬取网页"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("robots")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("off -r -np -p -k "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("网址"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("robots")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("off "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 忽略 robot 协议")]),s._v("\n      -r            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归下载该目录下的所有文件")]),s._v("\n      -np           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归下载时不遍历上层目录")]),s._v("\n      -p            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载显示在网页中的所有文件")]),s._v("\n      -k            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将网页中的绝对链接改为本地链接")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])])])}),[],!1,null,null,null);t.default=n.exports},885:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"http"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[s._v("#")]),s._v(" HTTP")]),s._v(" "),a("p",[s._v("：超文本传输协议（Hyper Text Transfer Protocol），可以传输文本或文件，是 Web 服务器的核心通信协议。")]),s._v(" "),a("h2",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),a("ul",[a("li",[s._v("属于应用层协议，基于 TCP 通信。")]),s._v(" "),a("li",[s._v("采用 C/S 架构，工作流程如下：\n"),a("ol",[a("li",[s._v("client 访问 server 的 TCP 端口，进行 TCP 握手。")]),s._v(" "),a("li",[s._v("client 发送 HTTP 请求报文。")]),s._v(" "),a("li",[s._v("server 回复 HTTP 响应报文。")])])])]),s._v(" "),a("h2",{attrs:{id:"版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本"}},[s._v("#")]),s._v(" 版本")]),s._v(" "),a("ul",[a("li",[s._v("HTTP 协议存在多个版本，服务器、客户端程序不一定兼容该协议的所有版本、特性。")])]),s._v(" "),a("h3",{attrs:{id:"http-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-1-0"}},[s._v("#")]),s._v(" HTTP/1.0")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("1996 年发布。")])]),s._v(" "),a("li",[a("p",[s._v("特点：无连接。")]),s._v(" "),a("ul",[a("li",[s._v("：server 每次回复响应报文之后，server 和 client 就可以断开 TCP 连接。")]),s._v(" "),a("li",[s._v("因此每次 client 发出请求报文时，都要重新建立 TCP 连接，在网络延迟较大时有明显耗时。")]),s._v(" "),a("li",[s._v("如果在报文 Headers 中添加 "),a("code",[s._v("Connection: keep-alive")]),s._v(" ，则会保持 TCP 连接，直到 server 或 client 主动断开连接。\n"),a("ul",[a("li",[s._v("使用长连接时，可通过一个 TCP 连接，先后传输多个 HTTP 报文，即串行传输，避免了多次 TCP 握手的耗时。")]),s._v(" "),a("li",[s._v("服务器通常会限制长连接的数量、存在时间。")])])])])]),s._v(" "),a("li",[a("p",[s._v("特点：无状态。")]),s._v(" "),a("ul",[a("li",[s._v("：HTTP 协议不会记录通信过程中的任何信息，每次通信都是独立的。")]),s._v(" "),a("li",[s._v("尽管如此，server 或 client 的程序可以自己记录通信过程中的一些信息。\n"),a("ul",[a("li",[s._v("比如 server 可以通过 IP 地址、cookie 记录 client 的身份。")])])])])])]),s._v(" "),a("h3",{attrs:{id:"http-1-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-1-1"}},[s._v("#")]),s._v(" HTTP/1.1")]),s._v(" "),a("ul",[a("li",[s._v("1997 年发布。向下兼容 HTTP/1.0 。")]),s._v(" "),a("li",[s._v("默认启用 TCP 长连接，除非在报文 Headers 中添加 "),a("code",[s._v("Connection: close")]),s._v(" 。")]),s._v(" "),a("li",[s._v("增加 PUT、DELETE 等请求方法。")]),s._v(" "),a("li",[s._v("增加 Host、Upgrade、If-Modified-Since、Cache-Control 等 Headers 。")])]),s._v(" "),a("h3",{attrs:{id:"http-2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-2-0"}},[s._v("#")]),s._v(" HTTP/2.0")]),s._v(" "),a("ul",[a("li",[s._v("2015 年发布。")]),s._v(" "),a("li",[s._v("采用二进制格式传输报文。")]),s._v(" "),a("li",[s._v("压缩报文 header 。大幅减小其体积。")]),s._v(" "),a("li",[s._v("支持 TCP 连接的多路复用：可通过同一个 TCP 连接，并行传输多个指向同一个域名的 HTTP 请求，互不干扰。")]),s._v(" "),a("li",[s._v("支持服务器主动推送报文到客户端。")])]),s._v(" "),a("h2",{attrs:{id:"uri"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[s._v("#")]),s._v(" URI")]),s._v(" "),a("p",[s._v("：统一资源标识符（Uniform Resource Identifier)，用于表示网络中某个资源的名称或位置。")]),s._v(" "),a("ul",[a("li",[s._v("资源可以是实际存在的图片、文本文件，也可以是提供某种服务的 API 。")]),s._v(" "),a("li",[s._v("HTTP 通信中，客户端通常通过 URI 定位服务器上的资源。")]),s._v(" "),a("li",[s._v("URI 分为两种形式：\n"),a("ul",[a("li",[s._v("统一资源名称（Uniform Resource Name ，URN）：用于表示资源的名称。")]),s._v(" "),a("li",[s._v("统一资源定位符（Uniform Resource Locator ，URL）：用于表示资源的位置。")])])])]),s._v(" "),a("h3",{attrs:{id:"url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[s._v("#")]),s._v(" URL")]),s._v(" "),a("p",[s._v("URL 的一般格式为："),a("code",[s._v("protocol://host:port/path/?querystring#fragment")])]),s._v(" "),a("ul",[a("li",[s._v("protocol\n"),a("ul",[a("li",[s._v("：采用的通信协议，比如 HTTP、HTTPS、FTP 。")])])]),s._v(" "),a("li",[s._v("host\n"),a("ul",[a("li",[s._v("：服务器主机，可以是主机名、域名或 IP 地址。")]),s._v(" "),a("li",[s._v("protocol、host 不区分大小写，但一般小写。")])])]),s._v(" "),a("li",[s._v("port\n"),a("ul",[a("li",[s._v("：端口号。")]),s._v(" "),a("li",[s._v("如果省略不填，则使用当前通信协议的默认端口。比如 HTTP 的默认端口为 80 。")]),s._v(" "),a("li",[s._v("一个主机上可能运行了多个服务器软件，分别监听不同的端口。通过 host、port 才能定位一个唯一的服务器。")])])]),s._v(" "),a("li",[s._v("path\n"),a("ul",[a("li",[s._v("：服务器上某个资源的路径。")]),s._v(" "),a("li",[s._v("如果省略不填，则会访问根目录 / 。比如 www.baidu.com 相当于 www.baidu.com/ 。")]),s._v(" "),a("li",[s._v("path 是否区分大小写，取决于服务器是否支持。比如 Linux 的文件系统区分大小写，因此运行的 HTTP 服务器默认区分大小写。而 Windows 的 NTFS 文件系统不区分大小写。")])])]),s._v(" "),a("li",[s._v("querystring\n"),a("ul",[a("li",[s._v("：查询字符串，用于传递一些键值对形式的参数（称为 Query Param）。")]),s._v(" "),a("li",[s._v("其语法格式如下：\n"),a("ol",[a("li",[s._v("将每个键值对的内部用 = 连接，外部用 & 分隔，拼接成一个字符串。")]),s._v(" "),a("li",[s._v("将该字符串经过 URLencode 编码，放到 URL 的 ? 之后。例如："),a("code",[s._v("HTTPS://www.baidu.com/s?ie=UTF-8&wd=hello%20world")])])])]),s._v(" "),a("li",[s._v("某些浏览器、服务器限制了 URL 的最大长度（比如 1M），因此不能通过 querystring 传递较多的数据。")])])]),s._v(" "),a("li",[s._v("fragment\n"),a("ul",[a("li",[s._v("：片段，以 # 开头。用于定位到资源中的某一片段。")]),s._v(" "),a("li",[s._v("querystring、fragment 都区分大小写。")])])])]),s._v(" "),a("h2",{attrs:{id:"请求方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求方法"}},[s._v("#")]),s._v(" 请求方法")]),s._v(" "),a("p",[s._v("HTTP/1.0 定义了 GET、HEAD、POST 三种请求方法，HTTP/1.1 增加了六种请求方法。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("GET")]),s._v(" "),a("ul",[a("li",[s._v("：用于请求获得（根据 URL 指定的）资源。")]),s._v(" "),a("li",[s._v("客户端发送 GET 请求报文时，报文的第一行包含了请求的 URL 。服务器一般会将回复的内容放在响应报文的 body 中，发给客户端。")])])]),s._v(" "),a("li",[a("p",[s._v("HEAD")]),s._v(" "),a("ul",[a("li",[s._v("：与 GET 相似，但要求服务器不返回报文 body 。")])])]),s._v(" "),a("li",[a("p",[s._v("POST")]),s._v(" "),a("ul",[a("li",[s._v("：用于向（根据 URL 指定的）资源提交数据。比如上传 HTML 表单数据、上传文件。")]),s._v(" "),a("li",[s._v("客户端发送 POST 请求报文时，通常将要提交的数据放在报文 body 中，发给服务器。服务器一般会回复一个状态码为 200 的报文，表示已成功收到。")]),s._v(" "),a("li",[s._v("GET 偏向于只读操作，而 POST 偏向于写操作。")])])]),s._v(" "),a("li",[a("p",[s._v("PUT")]),s._v(" "),a("ul",[a("li",[s._v("：用于向（根据 URL 指定的）资源更新数据。")]),s._v(" "),a("li",[s._v("POST 偏向于新增数据，而 PUT 偏向于用新数据覆盖原数据，通常具有幂等性。")])])]),s._v(" "),a("li",[a("p",[s._v("DELETE")]),s._v(" "),a("ul",[a("li",[s._v("：用于删除资源。")])])]),s._v(" "),a("li",[a("p",[s._v("CONNECT")]),s._v(" "),a("ul",[a("li",[s._v("：用于与代理服务器建立连接。")])])]),s._v(" "),a("li",[a("p",[s._v("OPTIONS")]),s._v(" "),a("ul",[a("li",[s._v("：用于询问指定的 URL 允许使用哪些请求方法。")]),s._v(" "),a("li",[s._v("服务器可以在响应报文中加入 "),a("code",[s._v("Allow: GET, HEAD")]),s._v(" 形式的 Header ，作为答复。")])])]),s._v(" "),a("li",[a("p",[s._v("TRACE")]),s._v(" "),a("ul",[a("li",[s._v("：用于测试网络连通性。")]),s._v(" "),a("li",[s._v("要求服务器将 request body 作为 response body 。")])])]),s._v(" "),a("li",[a("p",[s._v("PATCH")]),s._v(" "),a("ul",[a("li",[s._v("：用于给资源添加数据。")]),s._v(" "),a("li",[s._v("PUT 偏向于覆盖式更新，而 PATCH 偏向于追加式更新。")])])])]),s._v(" "),a("h2",{attrs:{id:"报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#报文"}},[s._v("#")]),s._v(" 报文")]),s._v(" "),a("p",[s._v("HTTP 协议以报文为单位传输消息，分为两种：")]),s._v(" "),a("ul",[a("li",[s._v("请求报文：Request message ，由客户端发出。")]),s._v(" "),a("li",[s._v("响应报文：Response message ，由服务器发出。")])]),s._v(" "),a("p",[s._v("一个 HTTP 报文的结构类似于一个文本文件，从上到下分为以下几部分：")]),s._v(" "),a("ul",[a("li",[s._v("请求行 / 状态行\n"),a("ul",[a("li",[s._v("：报文的第一行内容，用于简单介绍该报文。")])])]),s._v(" "),a("li",[s._v("头部（headers）\n"),a("ul",[a("li",[s._v("：每行声明一个 "),a("code",[s._v("header: value")]),s._v(" 格式的参数，用于描述报文的属性。")]),s._v(" "),a("li",[s._v("header 名称不区分大小写。")]),s._v(" "),a("li",[s._v("HTTP 协议有一些规范用途的 header ，用户也可以自定义 header 。")])])]),s._v(" "),a("li",[s._v("一个空行\n"),a("ul",[a("li",[s._v("：用于标志头部的结束。")])])]),s._v(" "),a("li",[s._v("主体（body）\n"),a("ul",[a("li",[s._v("：可以为空，也可以存放一段任意内容的数据。")]),s._v(" "),a("li",[s._v("HTTP 报文的 url、header、body 都可以用于传递有意义的数据，不过 body 适合承载大量数据。")])])])]),s._v(" "),a("h3",{attrs:{id:"请求报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求报文"}},[s._v("#")]),s._v(" 请求报文")]),s._v(" "),a("p",[s._v("例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("GET /index.html HTTP/1.1\naccept: text/html,application/xhtml+xml,application/xml\ncookie: gid=1311812194.1563255462; t=1\n\nie=UTF-8&wd=1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("请求行：由请求方法名、请求的 URL 路径（域名之后的部分）、协议版本组成。")]),s._v(" "),a("li",[s._v("请求报文的多种 Headers 示例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Content-Encoding: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该报文 body 的编码")]),s._v("\nContent-Length: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("348")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该报文 body 的长度")]),s._v("\nContent-Type: text/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf-8      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该报文 body 的类型")]),s._v("\n\nHost: www.baidu.com                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请求的服务器地址，可以包含端口号")]),s._v("\nConnection: keep-alive                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表示本次 HTTP 通信之后怎么处理 TCP 连接，默认为 close 。设置成 keep-alive 则保持连接")]),s._v("\nX-Requested-With: XMLHTTPRequest            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 说明该请求是 AJAX 异步请求")]),s._v("\nOrigin: http://test.com                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 说明客户端从哪个网站发出 HTTP 请求")]),s._v("\nReferer: HTTPS://test.com/                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 说明客户端从哪个 URL 跳转到当前 URL")]),s._v("\nCookie: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1311812194.1563255462")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("t")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nUser-Agent: Chrome/75.0.3770.100            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端的信息")]),s._v("\nAccept: text/html,application/xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("q")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端能接受的响应 body 的 Content-Type 。可以声明多个方案，用逗号分隔。q 表示选择这种方案的优先级，默认为 1")]),s._v("\nAccept-Charset: GB2312,utf-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("q")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v(",*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("q")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端能接受的响应 body 编码格式")]),s._v("\nAccept-Encoding: gzip,deflate               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端能接受的响应 body 压缩格式")]),s._v("\nUpgrade: HTTP/2.0,websocket                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仅 HTTP/1.1 支持该字段，表示客户端除了 HTTP/1.1 ，可切换到哪些通信协议。设置了此字段时必须设置 Connection: Upgrade ，表示切换通信协议")]),s._v("\n\nIf-Modified-Since: Fri, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":00:00 GMT "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果响应报文在 Last-Modified 时刻之后并没有被修改，则请服务器返回 304 报文，让客户端使用本地缓存")]),s._v("\nIf-None-Match: 5edd15a5-e42                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果响应报文的 Etag 值等于它，则请服务器返回 304 报文，让客户端使用本地缓存")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"响应报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应报文"}},[s._v("#")]),s._v(" 响应报文")]),s._v(" "),a("p",[s._v("例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("HTTP/1.1 200 OK\nServer: nginx/1.20.1\nContent-Type: text/html; charset=utf-8\n\n<html><head><title>Index</html></head><body><h1>Hello world!</h1></body></html>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("状态行：由协议版本、状态码、状态码的简单描述组成。")])]),s._v(" "),a("li",[a("p",[s._v("响应报文的多种 Headers 示例：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Status Code: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回的状态码")]),s._v("\nAllow: GET, HEAD      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务器允许的 HTTP 请求方法")]),s._v("\nServer: Tengine       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务器的名字")]),s._v("\n\nLocation: http://127.0.0.1/index.html         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用于重定向的响应报文，声明一个 URL 让客户端去访问")]),s._v("\nRefresh: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("                                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让客户端 5 秒之后重新请求本页面")]),s._v("\nRefresh: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://127.0.0.1/index.html   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让客户端 5 秒之后重定向到该 URL")]),s._v("\n\nDate: Wed, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":00:00 GMT           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务器生成该响应报文的时刻（代理服务器不会改变该值）")]),s._v("\nAge: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2183")]),s._v("                                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表示该响应报文来自代理服务器的缓存，这是该缓存的存在时长")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有多种控制缓存的字段，可同时启用")]),s._v("\nCache-Control: max-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 缓存策略")]),s._v("\nExpires: Wed, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":00:00 GMT        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该响应的过期时刻，采用 GMT 时区。过期之前建议客户端使用本地缓存，过期之后再重新请求")]),s._v("\nLast-Modified: Fri, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":00:00 GMT   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该响应报文 body 最后一次修改的时刻（用于判断内容是否变化）")]),s._v("\nETag: 5edd15a5-e42                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 响应 body 的标签值（用于判断内容是否变化，比 Last-Modified 更准确）")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("浏览器可以将服务器的返回的 HTML 文件缓存在本地，下次再请求该资源时就直接从本地缓存中读取数据。")]),s._v(" "),a("ul",[a("li",[s._v("Cache-Control 的取值示例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("max-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该缓存在 10 秒后过期，到时需要重新向服务器请求该资源")]),s._v("\nmax-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该缓存在 0 秒后过期，相当于 no-cache")]),s._v("\nno-cache    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不能直接使用缓存，要先向服务器重新请求该资源，如果服务器返回 304 才可以使用缓存")]),s._v("\nno-store    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不进行缓存")]),s._v("\nprivate     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许客户端缓存")]),s._v("\npublic      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端和代理服务器都可以缓存")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])])])]),s._v(" "),a("h3",{attrs:{id:"content-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#content-type"}},[s._v("#")]),s._v(" Content-Type")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("报文 Headers 中的 Content-Type 用于声明报文 body 的数据类型，便于解析报文 body 。常见的几种 MIME 类型如下：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("Content-Type")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("application/x-www-form-urlencoded")]),s._v(" "),a("td",[s._v("默认格式，与 Query String 格式相同，通常用于传输 form 表单")])]),s._v(" "),a("tr",[a("td",[s._v("application/json")]),s._v(" "),a("td",[s._v("JSON 格式的文本")])]),s._v(" "),a("tr",[a("td",[s._v("application/javascript")]),s._v(" "),a("td",[s._v("js 代码，且会被浏览器自动执行")])]),s._v(" "),a("tr",[a("td",[s._v("application/octet-stream")]),s._v(" "),a("td",[s._v("二进制数据，通常用于传输单个文件")])]),s._v(" "),a("tr",[a("td",[s._v("text/plain")]),s._v(" "),a("td",[s._v("纯文本")])]),s._v(" "),a("tr",[a("td",[s._v("text/html")]),s._v(" "),a("td",[s._v("HTML 格式的文本")])]),s._v(" "),a("tr",[a("td",[s._v("text/javascript")]),s._v(" "),a("td",[s._v("js 代码")])]),s._v(" "),a("tr",[a("td",[s._v("image/jpeg, image/png, image/gif")]),s._v(" "),a("td",[s._v("图片")])]),s._v(" "),a("tr",[a("td",[s._v("multipart/form-data; boundary=----7MA4YWxkT")]),s._v(" "),a("td",[s._v("传输多个键值对，用 boundary 的值作为分隔符")])])])])]),s._v(" "),a("li",[a("p",[s._v("可以在 Content-Type 中同时声明 MIME 类型和编码格式，用分号分隔，例如："),a("code",[s._v("Content-Type: text/html; charset=utf-8")])])])]),s._v(" "),a("h3",{attrs:{id:"状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[s._v("#")]),s._v(" 状态码")]),s._v(" "),a("p",[s._v("服务器返回响应报文时，报文的第一行包含了一个状态码（Status Code），表示对请求报文的处理结果。")]),s._v(" "),a("p",[s._v("根据最高位数字的不同，可将状态码分为 5 类。常见的如下：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("1××：表示服务器收到了请求，请客户端继续它的行为。")])]),s._v(" "),a("li",[a("p",[s._v("2××：表示服务器接受了请求。")]),s._v(" "),a("ul",[a("li",[s._v("200 ：OK 。服务器已执行请求的操作。")]),s._v(" "),a("li",[s._v("201 ：Created ，服务器已创建了请求的资源。")]),s._v(" "),a("li",[s._v("202 ：Accepted ，服务器接受了请求，但还没有执行请求的操作。常用于异步处理。")]),s._v(" "),a("li",[s._v("204 ：No Centent ，服务器没有返回任何内容。常用于不需要返回值的 HTTP 请求。")])])]),s._v(" "),a("li",[a("p",[s._v("3××：表示资源重定向。")]),s._v(" "),a("ul",[a("li",[s._v("301 ：Moved Permanently ，资源被永久移动位置，请客户端重新发送请求到新 URI ，并且以后的请求都这样。\n"),a("ul",[a("li",[s._v("例：客户端访问的 URI 为 /home/login 时，服务器访问 301 响应，并在响应报文的 Headers 中声明新地址 "),a("code",[s._v("Location: /home/login/")]),s._v(" ，请客户端访问它。")]),s._v(" "),a("li",[s._v("浏览器会自动处理重定向请求，访问新 URI 。")])])]),s._v(" "),a("li",[s._v("302 ：Moved Temporarily ，资源被临时移动位置，请客户端重新发送请求到新 URI ，但以后的请求不必使用新 URI 。")]),s._v(" "),a("li",[s._v("303 ：See Other ，资源已找到，但请客户端继续向另一个 URI 发出 GET 请求。\n"),a("ul",[a("li",[s._v("例：当客户端向 /home/login/ 发出 POST 请求进行登录之后，服务器返回 303 报文，让客户端继续向 /home/index.html 发出 GET 请求。")])])]),s._v(" "),a("li",[s._v("304 ：Not Modified ，资源并没有改变。\n"),a("ul",[a("li",[s._v("例：当浏览器刷新网页时，一些静态文件通常使用 304 ，可以从浏览器的缓存中载入。")])])]),s._v(" "),a("li",[s._v("307 ：Temporary Redirect ，临时重定向。与 302 相似，但是要求客户端在重定向之后不要改变请求方法。\n"),a("ul",[a("li",[s._v("例：如果客户端原本发出 POST 请求，则重定向之后重新发出的请求应该依然是 POST 方法。")]),s._v(" "),a("li",[s._v("301、302 表示客户端的请求未被服务器接受，请重新向新 URI 发出之前的请求。而 303 表示客户端的请求已被服务器接受，请继续向新 URI 发出后续请求。\n"),a("ul",[a("li",[s._v("但大部分浏览器将 301、302 像 303 一样处理，因此后来又定义了 307 ，强调了临时重定向的规范。")])])]),s._v(" "),a("li",[s._v("大部分浏览器处理 301、302 响应报文的措施：\n"),a("ul",[a("li",[s._v("如果被重定向的是 GET、HEAD 请求，则浏览器会重新向新 URI 发出请求，沿用之前的 Query String 和 Headers 。")]),s._v(" "),a("li",[s._v("如果被重定向的是 POST、PUT、DELETE 请求，则浏览器会重新向新 URI 发出 GET 请求，但是丢掉了之前的 POST 报文 body 。")])])])])])])]),s._v(" "),a("li",[a("p",[s._v("4××：表示客户端出错。")]),s._v(" "),a("ul",[a("li",[s._v("400 ：Bad Request ，请求报文有错误。")]),s._v(" "),a("li",[s._v("401 ：Unauthorized ，拒绝客户端访问该资源，因为没有通过身份认证。")]),s._v(" "),a("li",[s._v("403 ：Forbidden ，禁止客户端访问该资源，且不说明理由。")]),s._v(" "),a("li",[s._v("404 ：Not Found ，服务器找不到该资源。")]),s._v(" "),a("li",[s._v("405 ：Method Not Allowed ，服务器不支持这种 HTTP 请求方法。比如向 POST 接口发送 GET 请求时会报错 405 。")])])]),s._v(" "),a("li",[a("p",[s._v("5××：表示服务器出错。")]),s._v(" "),a("ul",[a("li",[s._v("500 ：Internal Server Error ，通常是因为服务器执行内部代码时出错。")]),s._v(" "),a("li",[s._v("502 ：Bad Gateway ，通常是因为作为网关或代理的服务器，从上游服务器收到的 HTTP 响应报文出错。")]),s._v(" "),a("li",[s._v("503 ：Service Unavailable ，请求的服务不可用。比如服务器过载时不能提供服务。")]),s._v(" "),a("li",[s._v("504 ：Gateway Timeout ，通常是因为作为网关或代理的服务器，没有及时从上游服务器收到 HTTP 响应报文。")]),s._v(" "),a("li",[s._v("505 ：HTTP Version Not Supported ，服务器不支持该请求报文采用的 HTTP 版本。")])])])]),s._v(" "),a("h2",{attrs:{id:"basic-auth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-auth"}},[s._v("#")]),s._v(" Basic Auth")]),s._v(" "),a("p",[s._v("：HTTP 协议定义的一种简单的身份认证方式。")]),s._v(" "),a("ul",[a("li",[s._v("原理：HTTP 客户端将用户名、密码以明文方式发送给 HTTP 服务器，如果服务器认证通过则允许客户端访问，否则返回 HTTP 401 报文。\n"),a("ul",[a("li",[s._v("例如，当用户使用 Web 浏览器访问该 HTTP 服务器时，通常会显示一个对话框，要求输入用户名、密码即可。")]),s._v(" "),a("li",[s._v("实际上，HTTP 客户端会将 "),a("code",[s._v("username:password")]),s._v(" 经过 Base64 编码之后，放在 HTTP Header 中发送给 HTTP 服务器。如下："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Authorization: Basic YWRtaW46MTIzNA=="')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("大部分 HTTP 客户端也支持按以下格式发送用户名、密码："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://username:password@127.0.0.1:80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("Basic Auth 没有通过 Cookie 记录用户登录状态，因此浏览器重启之后，用户需要重新登录。")])])]),s._v(" "),a("li",[s._v("优点：过程简单，容易实现。")]),s._v(" "),a("li",[s._v("缺点：通过 HTTP Header 将用户名、密码以明文方式传输，容易泄露。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);