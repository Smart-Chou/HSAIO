(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{640:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"selenium"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selenium"}},[s._v("#")]),s._v(" Selenium")]),s._v(" "),a("p",[s._v("：一个用于 Web 自动化测试的开源项目。")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.selenium.dev/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("发音为 "),a("code",[s._v("/səˈliːniəm/")]),s._v(" 。")]),s._v(" "),a("li",[s._v("Selenium 项目提供了多个工具：\n"),a("ul",[a("li",[s._v("WebDriver")]),s._v(" "),a("li",[s._v("IDE ：一个浏览器插件，用于记录用户在浏览器中的操作，记录成 Selenium 命令，便于快速创建测试用例。")]),s._v(" "),a("li",[s._v("Grid")])])])]),s._v(" "),a("h2",{attrs:{id:"webdriver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webdriver"}},[s._v("#")]),s._v(" WebDriver")]),s._v(" "),a("p",[s._v("：一个 HTTP 服务器，用于调用浏览器的 API 来访问网站。")]),s._v(" "),a("ul",[a("li",[s._v("支持调用 Firefox、Chrome 等浏览器。")])]),s._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装 webdriver 。")]),s._v(" "),a("ul",[a("li",[s._v("如果安装在本机，则需要安装某种浏览器，再下载对应版本的 webdriver 二进制文件。")]),s._v(" "),a("li",[s._v("也可以在其它主机部署 Grid 服务器，然后在本机调用。")])])]),s._v(" "),a("li",[a("p",[s._v("安装 Python 的第三方库作为客户端："),a("code",[s._v("pip install selenium")])])])]),s._v(" "),a("h3",{attrs:{id:"用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[s._v("#")]),s._v(" 用法")]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://selenium-python.readthedocs.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("例：在本机启动 webdriver 服务器")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n\ndriver "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 webdriver 。这会创建一个 webdriver 子进程，它又会创建几个 Chrome 子进程")]),s._v("\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止 webdriver")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("例：调用远程的 Grid 服务器")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" webdriver\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("desired_capabilities "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" DesiredCapabilities\n\ndriver "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Remote"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    command_executor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://10.0.0.1:4444"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    desired_capabilities"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DesiredCapabilities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CHROME\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("例：浏览网页")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://www.baidu.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让浏览器返回一个 URL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取浏览器的名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chrome'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("current_url     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取当前网页的 URL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com/'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取当前网页的标题")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'百度一下，你就知道'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("page_source     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取当前网页的 HTML 内容")]),s._v("\n'"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("head"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("meta http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("equiv"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type"')]),s._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text/html;charset=utf-8"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("save_screenshot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存网页截图（即使调用 Grid ，也能保存到本机）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("例：在网页输入信息")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keys "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Keys\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kw'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找 HTML 中的元素")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入字符串")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RETURN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入一个键盘快捷键")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("例：切换浏览器的窗口")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("current_window_handle        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取当前窗口的句柄")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CDwindow-C88E17197FCFDE3459E9E81F7498A3EA'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" windows "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window_handles     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取浏览器所有窗口的句柄，返回一个 list")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("close"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭当前窗口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("switch_to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换窗口")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("浏览器可以打开多个窗口，而 driver 同时只能操纵一个窗口。")])])])]),s._v(" "),a("h2",{attrs:{id:"grid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grid"}},[s._v("#")]),s._v(" Grid")]),s._v(" "),a("p",[s._v("：一个 Web 服务器，采用 Java 开发，用于在多个主机上执行 WebDriver 任务。")]),s._v(" "),a("h2",{attrs:{id:"架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[s._v("#")]),s._v(" 架构")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Grid 包含以下组件：")]),s._v(" "),a("ul",[a("li",[s._v("Node\n"),a("ul",[a("li",[s._v("：负责执行 WebDriver 任务。")]),s._v(" "),a("li",[s._v("默认会自动发现本机上可用的 WebDriver ，注册到 Distributor 。")]),s._v(" "),a("li",[s._v("每个 Node 提供了一定数量的 slot ，用于执行客户端 session 的任务。")])])]),s._v(" "),a("li",[s._v("Hub ：包含以下组件：\n"),a("ul",[a("li",[s._v("Router\n"),a("ul",[a("li",[s._v("：作为 Grid 的入口，负责将客户端请求转发到对应的组件。")]),s._v(" "),a("li",[s._v("例如收到客户端请求时，如果属于已有会话，则转发到 Session Map ，否则转发到 New Session Queue 。")])])]),s._v(" "),a("li",[s._v("Distributor\n"),a("ul",[a("li",[s._v("负责为每个新的会话分配 Node 来执行任务。")])])]),s._v(" "),a("li",[s._v("Session Map\n"),a("ul",[a("li",[s._v("负责记录每个 Session ID ，与执行该 Session 任务的 Node 的对应关系。")])])]),s._v(" "),a("li",[s._v("New Session Queue")]),s._v(" "),a("li",[s._v("Event Bus\n"),a("ul",[a("li",[s._v("负责实现 Grid 各组件之间的通信。")])])])])])])]),s._v(" "),a("li",[a("p",[s._v("Grid 可以部署成分布式集群，也可以以 Standalone 模式部署单节点。")])])]),s._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("下载 jar 包，然后执行：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("java -jar selenium-server.jar\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("用 docker-compose 部署：")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selenium")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" selenium\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" selenium/standalone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("92.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20210804")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" unless"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("stopped\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("shm_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 2g\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 4444"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4444")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# volumes:")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - ./config.toml:/opt/selenium/config.toml")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("该 selenium 镜像会基于 supervisor 运行浏览器、webdriver、Grid 等多个进程。")]),s._v(" "),a("li",[s._v("容器启动时总是会重新生成配置文件 config.toml ，除非没有写入权限。可以挂载 config.toml ，内容示例："),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("network")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("relax-checks")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true               # 是否放宽检查客户端 HTTP 请求的 Headers、Content-Type")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# detect-drivers = true           # 是否自动发现本机上可用的 WebDriver")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# session-timeout = "300"         # 删除超过一定时长未活动的 session')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# max-sessions = 1                # 每个 node 可以分配的最大 session 数，默认等于 CPU 核数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# override-max-sessions = false   # 是否允许设置的 max-sessions 超过 CPU 核数")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("username")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("admin                  # 给网站开启 Basic Auth 认证")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("password")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("******")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [server]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# port = 4444")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);