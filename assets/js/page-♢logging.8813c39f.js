(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{827:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"♢-logging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#♢-logging"}},[s._v("#")]),s._v(" ♢ logging")]),s._v(" "),a("p",[s._v("：Python 的标准库，用于记录日志。")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.python.org/3/library/logging.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"用法示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用法示例"}},[s._v("#")]),s._v(" 用法示例")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" logging\n\nformatter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Formatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个格式器")]),s._v("\n    fmt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{asctime} {levelname:5} {threadName:15}  {message}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    datefmt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Y-%m-%d %H:%M:%S'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nhandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FileHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error.log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个 handler 实例")]),s._v("\nhandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置日志级别，它会忽略该级别以下的日志")]),s._v("\nhandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setFormatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("formatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置该 handler 的格式器")]),s._v("\n\nhandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FileHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error.log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个 handler 实例")]),s._v("\nconsole_handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole_handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setFormatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("formatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nlogger "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getLogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logger1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个 logger 实例")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置日志级别，它会忽略该级别以下的日志")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为该 logger 添加一个 handle")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("console_handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一个 logger 可以添加多个 handle ，将日志同时传给它们")]),s._v("\n\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'测试日志'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录一条 DEBUG 级别的日志事件")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'测试日志'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("上例中输出的日志为：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("2020-01-12 12:27:14 ERROR MainThread      测试日志\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),a("ul",[a("li",[s._v("开发应用程序时，应该让程序自动记录日志（log），描述程序运行时发生的某些事件，以便于用户了解程序的运行状态，排查问题。\n"),a("ul",[a("li",[s._v("日志通常以文本形式记录，可以输出到终端，也可以保存到文件中。")]),s._v(" "),a("li",[s._v("有的日志还保存成 JSON 格式，便于通过其它软件解析日志。")])])]),s._v(" "),a("li",[s._v("日志文本中通常每行记录一个事件。\n"),a("ul",[a("li",[s._v("通常将事件按重要程度分成多种级别（level），以便于过滤出重要的日志。")]),s._v(" "),a("li",[s._v("每个事件通常记录了日志级别、发生时间、发生位置、具体描述等信息。")])])]),s._v(" "),a("li",[s._v("logging 模块定义了多种日志级别，它们分别用一个 int 数值代表。"),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[s._v("FATAL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" CRITICAL\nCRITICAL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用于记录致命的错误，比如程序无法启动、基本功能无法实现")]),s._v("\nERROR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用于记录报错信息，比如程序的某些功能无法实现")]),s._v("\nWARNING "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用于记录警告信息")]),s._v("\nWARN "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" WARNING\nINFO "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用于记录重要但不算报错的信息，比如程序是否在正常运行")]),s._v("\nDEBUG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用于记录调试信息，比如程序正在执行哪个函数")]),s._v("\nNOTSET "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("用户可以通过 "),a("code",[s._v("logging.DEBUG")]),s._v(" 的形式引用这些日志级别，也可以直接指定 int 数值。")]),s._v(" "),a("li",[s._v("FATAL 的重要级别最高， NOTSET 的重要级别最低。\n"),a("ul",[a("li",[s._v("调试程序时，通常记录 DEBUG 或 INFO 级别以上的详细日志。")]),s._v(" "),a("li",[s._v("程序正常运行时，通常只记录 WARNING 或 ERROR 级别以上的日志，从而简化日志数量、避免频繁写入日志文件。")])])])])])]),s._v(" "),a("h2",{attrs:{id:"日志类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志类"}},[s._v("#")]),s._v(" 日志类")]),s._v(" "),a("p",[s._v("logging 模块的主要功能分别由四个类实现：")]),s._v(" "),a("ul",[a("li",[s._v("Logger ：日志的记录器。")]),s._v(" "),a("li",[s._v("Formatter ：日志的格式器，负责根据日志事件的内容、当前时间等信息，按特定格式生成日志文本。")]),s._v(" "),a("li",[s._v("Filter ：日志的过滤器，可以定义比日志级别更复杂的过滤规则。")]),s._v(" "),a("li",[s._v("Handler ：日志的处理器，负责将日志输出到某个地方。")])]),s._v(" "),a("p",[s._v("一个日志事件的处理过程：")]),s._v(" "),a("ol",[a("li",[s._v("程序调用 logger 实例，输入一个字符串，产生一个日志事件。")]),s._v(" "),a("li",[s._v("logger 根据 filter 过滤日志，然后将日志传给 handle 。")]),s._v(" "),a("li",[s._v("handle 根据 formatter 生成日志文件，然后输出。")])]),s._v(" "),a("h3",{attrs:{id:"logger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logger"}},[s._v("#")]),s._v(" logger")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("调用 "),a("code",[s._v("logging.getLogger(name)")]),s._v(" 会创建一个指定名称的 logger 实例。")]),s._v(" "),a("ul",[a("li",[s._v("如果指定的 name 与某个已存在的 logger 相同，则返回那个 logger 的引用（可以跨源文件引用）。")]),s._v(" "),a("li",[s._v("如果不指定 name ，则默认返回名为 root 的 logger 。\n"),a("ul",[a("li",[s._v("root logger 默认采用 WARN 日志级别，将日志输出到 sys.stderr 。")])])]),s._v(" "),a("li",[s._v("例："),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getLogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logger1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger             \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Logger logger1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logger1'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("level\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("name 可以声明多个层级，用 . 作为分隔符。")]),s._v(" "),a("ul",[a("li",[s._v("例如 "),a("code",[s._v("logger1.logger2.logger3")]),s._v(" ， 当最低层的 logger3 收到一条日志时，会将日志传递给更高层的 logger1.logger2 。\n"),a("ul",[a("li",[s._v("传递时不受 filter 限制。")]),s._v(" "),a("li",[s._v("此时应该只对最高层的 logger3 分配 handle ，以免重复输出日志。")])])]),s._v(" "),a("li",[s._v("执行 "),a("code",[s._v("logging.getLogger(__name__)")]),s._v(" 时，就是使用 Python 的模块路径作为 name 。")]),s._v(" "),a("li",[s._v("例："),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parent\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("RootLogger root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("WARNING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logger2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回指定后缀的低层 logger 实例")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Logger logger1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logger2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("用户可以调用 logger 实例的以下方法，记录不同级别的日志：")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[s._v("logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fatal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("level"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如 logger.log(logging.ERROR, '测试日志')")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("logger 的其它成员：")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("filters \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("handlers\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("FileHandler D"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\\error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("StreamHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("stderr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"formatter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#formatter"}},[s._v("#")]),s._v(" Formatter")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("例：")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[s._v("formatter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Formatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("                                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个格式器")]),s._v("\n    fmt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{asctime} {levelname:5} {threadName:15}  {message}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置每个日志事件的格式化字符串")]),s._v("\n    datefmt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Y-%m-%d %H:%M:%S'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 asctime 时间字段的格式化字符串")]),s._v("\n    style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("在 fmt 中嵌入字段的格式：\n"),a("ul",[a("li",[s._v("默认采用 "),a("code",[s._v("%")]),s._v(" 风格，使用格式如同 "),a("code",[s._v("%(asctime)s")]),s._v(" 。")]),s._v(" "),a("li",[s._v("可以采用 "),a("code",[s._v("{")]),s._v(" 风格，使用格式如同 "),a("code",[s._v("{asctime}")]),s._v(" 。")])])])])]),s._v(" "),a("li",[a("p",[s._v("logging 模块提供了一些可以嵌入到日志中的字段：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("asctime     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前时间")]),s._v("\nname        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前日志器的名称")]),s._v("\nlevelname   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前日志器的日志级别的名称")]),s._v("\nmessage     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志事件的内容")]),s._v("\n\npathname    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前程序文件的绝对路径")]),s._v("\nfilename    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pathname 的文件名部分，包含扩展名")]),s._v("\nmodule      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pathname 的文件名部分，不包含扩展名")]),s._v("\nfuncName    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前代码所在函数名")]),s._v("\nlineno      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前代码所在行号")]),s._v("\n\nprocess     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前的进程 ID")]),s._v("\nprocessName "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前的进程名称")]),s._v("\nthread      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前的线程 ID")]),s._v("\nthreadName  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前的线程名称")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"dictconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dictconfig"}},[s._v("#")]),s._v(" dictConfig")]),s._v(" "),a("p",[s._v("可以用字典形式声明 logging 模块的全局配置，如下：")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" logging\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" datetime "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" datetime\n\n\nLOGGING "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'version'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 声明配置格式的版本")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'disable_existing_loggers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否禁用已存在的其它 logger 实例")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'formatters'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'verbose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个日志的格式器")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'format'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{asctime} {levelname:5} {threadName:15}  {message}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'datefmt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Y/%m/%d %H:%M:%S'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'filters'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'handlers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'console'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个日志的处理器")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'level'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DEBUG'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录 DEBUG 级别以上的日志")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'formatter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'verbose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'class'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logging.StreamHandler'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将日志输出到终端")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logfile'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'level'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DEBUG'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'formatter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'verbose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'class': 'logging.FileHandler',   # 将日志输出到文件")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'class'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logging.handlers.TimedRotatingFileHandler'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将日志输出到文件，并按时间自动翻转文件")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'filename'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'main.log.'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("strftime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Y-%m-%d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否采用 UTC 时间")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'when'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'D'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定计时的单位，可以是 S、M、H、D 等")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'interval'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从午夜开始计算，每隔 interval x when 时长就创建一个日志文件")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backupCount'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最多保留多少个日志文件")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这会先创建一个以 filename 命名的日志文件，如果当前时间需要翻转日志，则将原日志文件重命名，比如改成 main.log.2020-01-12")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'loggers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logger1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个日志的记录器")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'handlers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'console'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logfile'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将日志传给这些 handle 处理")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'level'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'WARN'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'propagate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否将日志传递给更高层的 logger")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dictConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LOGGING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addLevelName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WARNING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'WARN'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义 WARNING 日志级别显示的字符串名称")]),s._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addLevelName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CRITICAL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'FATAL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getLogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logger1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'测试日志'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);