(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{1061:function(a,e,t){"use strict";t.r(e);var s=t(1),n=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("传统上，Vaultwarden 仅限于驻留在子域的根，例如"),t("code",[a._v("https://vaultwarden.example.com")]),a._v("。")]),a._v(" "),t("p",[a._v("此限制源于后端和 Web 密码管理，它们并非旨在容纳备用基础目录(请参阅 "),t("a",{attrs:{href:"https://github.com/bitwarden/server/issues/277",target:"_blank",rel:"noopener noreferrer"}},[a._v("bitwarden/server#277"),t("OutboundLink")],1),a._v(")。移动/桌面应用程序和浏览器扩展实际上没有问题，使用带有路径的基本 URL。")]),a._v(" "),t("p",[a._v("在 vaultwarden 中，随着 "),t("a",{attrs:{href:"https://github.com/dani-garcia/vaultwarden/pull/868",target:"_blank",rel:"noopener noreferrer"}},[a._v("PR#868"),t("OutboundLink")],1),a._v("(后端)和 "),t("a",{attrs:{href:"https://github.com/dani-garcia/bw_web_builds/pull/11",target:"_blank",rel:"noopener noreferrer"}},[a._v("PR#11"),t("OutboundLink")],1),a._v("(网络密码管理)，您可以在备用基本目录中配置功能齐全的实例。")]),a._v(" "),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),t("p",[a._v("只需配置您的域 URL 以包含基本目录。例如，假设您想通过 "),t("code",[a._v("https://vaultwarden.example.com/base-dir")]),a._v(" 访问您的实例。 (请注意，如果需要，您还可以使用多级目录，例如 "),t("code",[a._v("https://vaultwarden.example.com/multi/level/base/dir")]),a._v("。)")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("停止保管人。")])]),a._v(" "),t("li",[t("p",[a._v("如果您通常使用管理页面配置 Vaultwarden，请编辑您的 "),t("code",[a._v("config.json")]),a._v(" 如下所示：")]),a._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"domain"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://vaultwarden.example.com/base-dir"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ... other values ...")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("如果您通常通过环境变量配置 Vaultwarden，请更新您的配置文件/脚本以将 "),t("code",[a._v("DOMAIN")]),a._v(" 环境变量设置为基本 URL。例如：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DOMAIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://vaultwarden.example.com/base-dir"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("重新启动密码管理。")])]),a._v(" "),t("li",[t("p",[a._v("您现在应该可以通过 "),t("code",[a._v("https://vaultwarden.example.com/base-dir/")]),a._v(" 访问网络密码管理(注意尾部斜杠)。出于不完全清楚的原因，如果您使用"),t("code",[a._v("https://vaultwarden.example.com/base-dir")]),a._v("(没有尾部斜杠)，您可能会遇到问题。")])]),a._v(" "),t("li",[t("p",[a._v("将您的应用程序或浏览器扩展程序配置为使用 "),t("code",[a._v("https://vaultwarden.example.com/base-dir")]),a._v("。如果添加尾部斜杠，应用程序和扩展程序将在保存前自动将其删除。")])]),a._v(" "),t("li",[t("p",[a._v("注意"),t("strong",[a._v("5")]),a._v("。尾部斜线"),t("code",[a._v("/")]),a._v(" 问题可以通过在路由位置字符串后附加"),t("code",[a._v("/")]),a._v(" 来解决。例如，在 Nginx 中。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("location /my-base-path {\n  # This config would cause `/` issue\n}\n\nlocation /my-base-path-2/ {\n  # This config works perfectly\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])])])]),a._v(" "),t("h2",{attrs:{id:"反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向代理"}},[a._v("#")]),a._v(" 反向代理")]),a._v(" "),t("p",[a._v("如果您将 vaultwarden 置于反向代理之后，请确保您的代理配置为将请求路径传递到 vaultwarden，因为 vaultwarden API 路由设置为期望基本目录。")]),a._v(" "),t("p",[a._v("因此，如果对 "),t("code",[a._v("https://vaultwarden.example.com/base-dir/api/sync")]),a._v(" 的请求命中了你的反向代理，然后代理到你的 vaultwarden 监听 "),t("code",[a._v("localhost:8080")]),a._v("，请求必须转到 "),t("code",[a._v("http ://localhost:8080/base-dir/api/sync")]),a._v("，而不是"),t("code",[a._v("http://localhost:8080/api/sync")]),a._v("。")])])}),[],!1,null,null,null);e.default=n.exports}}]);