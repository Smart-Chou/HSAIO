(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{1085:function(e,t,a){"use strict";a.r(t);var s=a(1),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("警告")]),e._v(" "),a("p",[e._v("此方法仅用于测试和开发。绝大多数用户不应使用此方法，因为它需要在您的每台设备上加载证书，这既容易出错又需要将来维护。相反，将精力集中在通过 "),a("a",{attrs:{href:"https://letsencrypt.org/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Let's Encrypt"),a("OutboundLink")],1),e._v(" 获取真实证书上。")]),e._v(" "),a("p",[e._v("如果您的 vaultwarden 实例不在公共 Internet 上，这甚至可以工作("),a("RouterLink",{attrs:{to:"/vaultwarden/Deployment/Running-a-private-vaultwarden-instance-with-Let's-Encrypt-certs.html"}},[e._v("使用 Let's Encrypt 证书运行私有 Vaultwarden 实例")]),e._v(")。")],1)]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[e._v("不支持此方法。请不要打开 GitHub 问题或在论坛上发帖询问如何使其工作。")])]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("为了让 bitwarden 使用自签名证书正常工作，Chrome 需要证书在证书的备用名称字段中包含域名。")]),e._v(" "),a("h3",{attrs:{id:"创建-ca-密钥-您自己的小型本地证书颁发机构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-ca-密钥-您自己的小型本地证书颁发机构"}},[e._v("#")]),e._v(" 创建 CA 密钥(您自己的小型本地证书颁发机构)")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("openssl genpkey -algorithm RSA -aes128 -out private-ca.key -outform PEM -pkeyopt rsa_keygen_bits:2048\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("注意：你也可以使用旧的 "),a("code",[e._v("-des3")]),e._v(" 代替 "),a("code",[e._v("-aes128")]),e._v("。")]),e._v(" "),a("h3",{attrs:{id:"创建-ca-证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-ca-证书"}},[e._v("#")]),e._v(" 创建 CA 证书")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("openssl req -x509 -new -nodes -sha256 -days 3650 -key private-ca.key -out self-signed-ca-cert.crt\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("注意："),a("code",[e._v("-nodes")]),e._v(" 参数防止在测试/安全环境中为私钥(密钥对)设置密码短语，否则每次启动/重启服务器时都必须输入密码短语。")]),e._v(" "),a("h3",{attrs:{id:"创建一个bitwarden键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个bitwarden键"}},[e._v("#")]),e._v(" 创建一个bitwarden键")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("openssl genpkey -algorithm RSA -out bitwarden.key -outform PEM -pkeyopt rsa_keygen_bits:2048\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"创建-bitwarden-证书请求文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-bitwarden-证书请求文件"}},[e._v("#")]),e._v(" 创建 bitwarden 证书请求文件")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("openssl req -new -key bitwarden.key -out bitwarden.csr\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("使用以下内容创建一个文本文件"),a("code",[e._v("bitwarden.ext")]),e._v("，将域名更改为您的设置。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("authorityKeyIdentifier=keyid,issuer\nbasicConstraints=CA:FALSE\nkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment\nextendedKeyUsage = serverAuth\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = bitwarden.local\nDNS.2 = www.bitwarden.local\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("h3",{attrs:{id:"创建从根-ca-签名的-bitwarden-证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建从根-ca-签名的-bitwarden-证书"}},[e._v("#")]),e._v(" 创建从根 CA 签名的 bitwarden 证书")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("openssl x509 -req -in bitwarden.csr -CA self-signed-ca-cert.crt -CAkey private-ca.key -CAcreateserial -out bitwarden.crt -days 365 -sha256 -extfile bitwarden.ext\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("注意：截至 2019 年 4 月 iOS 13+ 和 macOS 15+，服务器证书的到期时间不能 > 825，并且必须包含 ExtendedKeyUsage 扩展 "),a("a",{attrs:{href:"https://support.apple.com/en-us/HT210176",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://support.apple.com/en-us/HT210176"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"将根证书和-bitwarden-证书添加到客户端计算机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将根证书和-bitwarden-证书添加到客户端计算机"}},[e._v("#")]),e._v(" 将根证书和 bitwarden 证书添加到客户端计算机")]),e._v(" "),a("p",[e._v("如需参考，请参见此处："),a("a",{attrs:{href:"https://deliciousbrains.com/ssl-certificate-authority-for-local-https-development/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://deliciousbrains.com/ssl-certificate-authority-for-local-https-development/"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);