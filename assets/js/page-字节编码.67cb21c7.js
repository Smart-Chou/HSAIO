(window.webpackJsonp=window.webpackJsonp||[]).push([[289],{834:function(s,t,a){"use strict";a.r(t);var n=a(1),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"字节编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字节编码"}},[s._v("#")]),s._v(" 字节编码")]),s._v(" "),a("ul",[a("li",[s._v("二进制编码（Binary Encoding）：指将一个字符转换成二进制编码值，即从 str 类型转换成 bytes 类型。\n"),a("ul",[a("li",[s._v("其编码值通常以字节为单位，比如长度为 1 字节、2 字节，因此又称为字节编码。")]),s._v(" "),a("li",[s._v("常用于将文本写入到文件中存储。")])])])]),s._v(" "),a("h2",{attrs:{id:"相关概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关概念"}},[s._v("#")]),s._v(" 相关概念")]),s._v(" "),a("ul",[a("li",[s._v("字节：在计算机中，指 8 个 bit 的二进制数据。")]),s._v(" "),a("li",[s._v("字符：在现实世界中，指一个自然语言的文字。在计算机中，指数据类型 char ，存储时可能占用 n 个字节的空间。")]),s._v(" "),a("li",[s._v("字符串：在计算机中，指数据类型 string ，由多个数据类型 char 组成。")]),s._v(" "),a("li",[s._v("文本：在现实世界中，指由一些自然语言文字组成的信息。这些信息传入计算机中时，通常采用数据类型 string 存储。")]),s._v(" "),a("li",[s._v("程序从文件中读写文本的一般过程：\n"),a("ol",[a("li",[s._v('程序将一个字符串 "Hello World!" 按 ASCII 格式编码，转换成二进制数据，写入文件。')]),s._v(" "),a("li",[s._v('程序从文件读取二进制数据，按 ASCII 格式解码，得到一个字符串 "Hello World!" 。\n'),a("ul",[a("li",[s._v("如果解码的格式与编码格式不一致，得到的字符串就可能与原字符串不一致，比如出现乱码。")])])])])]),s._v(" "),a("li",[s._v("如果一个字符的编码值超过一个字节，则称为宽字符。")]),s._v(" "),a("li",[s._v("如果一个数据类型的长度超过 1 个字节，则需要考虑字节序的问题：\n"),a("ul",[a("li",[s._v("大端序（Big-Endian）：高位字节先存储。例如 "),a("code",[s._v("0x11223344")]),s._v(" 存储为 "),a("code",[s._v("0x11 0x22 0x33 0x44")]),s._v(" ，最高位的字节 0x11 存储在地址的最低位。")]),s._v(" "),a("li",[s._v("小端序（Little-Endian） ：低位字节先存储。例如 "),a("code",[s._v("0x11223344")]),s._v(" 存储为 "),a("code",[s._v("0x44 0x33 0x22 0x11")]),s._v(" ，最高位的字节 0x11 存储在地址的最高位。")])])])]),s._v(" "),a("h2",{attrs:{id:"单字节编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单字节编码"}},[s._v("#")]),s._v(" 单字节编码")]),s._v(" "),a("h3",{attrs:{id:"ascii"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ascii"}},[s._v("#")]),s._v(" ASCII")]),s._v(" "),a("ul",[a("li",[s._v("：美国信息交换标准代码（American Standard Code for Information Interchange），一种简单、基础的单字节编码格式。")]),s._v(" "),a("li",[s._v("编码范围为 0x00 ~ 0x7F ，总共定义了 128 个字符。")]),s._v(" "),a("li",[s._v("收录了拉丁字母、一些控制字符。")])]),s._v(" "),a("h3",{attrs:{id:"iso-8859-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iso-8859-1"}},[s._v("#")]),s._v(" ISO-8859-1")]),s._v(" "),a("ul",[a("li",[s._v("：又称为 Latin-1 ，是一种单字节编码格式，编码范围为 0x00 ~ 0xFF 。")]),s._v(" "),a("li",[s._v("是 ASCII 码的超集。")]),s._v(" "),a("li",[s._v("收录了拉丁字母、希腊语、阿拉伯语等字符。")]),s._v(" "),a("li",[s._v("用到了单字节的所有编码，因此可用于存储其它编码格式的字符，并不会有遗漏。")])]),s._v(" "),a("h3",{attrs:{id:"windows-1252"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-1252"}},[s._v("#")]),s._v(" Windows 1252")]),s._v(" "),a("ul",[a("li",[s._v("：又称为 cp1252 、ANSI 字符集，是 ISO-8859-1 的超集。")])]),s._v(" "),a("h2",{attrs:{id:"多字节编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多字节编码"}},[s._v("#")]),s._v(" 多字节编码")]),s._v(" "),a("h3",{attrs:{id:"unicode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unicode"}},[s._v("#")]),s._v(" Unicode")]),s._v(" "),a("ul",[a("li",[s._v("：一种字符集，又称为万国码、国际码、统一码，收录了世界上很多种语言的字符，给每个字符分配了唯一编码。")]),s._v(" "),a("li",[s._v("编码范围为 U+000000 ~ U+10FFFF ，总共大约有 1.1 百万个码位（Code Point），可用于映射字符。\n"),a("ul",[a("li",[s._v("开头两个字节从 U+00 到 U+10 划分为 17 个平面（plane），每个平面包含 2^16=65536 个码位。")]),s._v(" "),a("li",[s._v("第一个平面称为第零平面、基本多语言平面（Basic Multilingual Plane, BMP），其它平面称为辅助平面。")]),s._v(" "),a("li",[s._v("第零平面包含了最常用的字符，其中 D800 ~ DFFF 范围内的码位保留，不映射 Unicode 字符，因此通常被 UTF 编码使用。")])])]),s._v(" "),a("li",[s._v("每个字符编码为 6 个十六进制数，加上 "),a("code",[s._v("U+")]),s._v(" 或 "),a("code",[s._v("\\u")]),s._v(" 作为前缀。\n"),a("ul",[a("li",[s._v("只考虑第零平面时，可以只使用 4 个十六进制数，比如字母 A 表示成 U+0041 。")])])])]),s._v(" "),a("h3",{attrs:{id:"utf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utf"}},[s._v("#")]),s._v(" UTF")]),s._v(" "),a("ul",[a("li",[s._v("：Unicode 转换格式（Unicode Transformation Format）")]),s._v(" "),a("li",[s._v("Unicode 字符的编码较长，大部分码位都用不到，浪费存储空间。因此实际使用时，通常通过 UTF 转换成更短的编码格式。")])]),s._v(" "),a("h4",{attrs:{id:"utf-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utf-8"}},[s._v("#")]),s._v(" UTF-8")]),s._v(" "),a("ul",[a("li",[s._v("：一种编码格式，兼容 ASCII 码。")]),s._v(" "),a("li",[s._v("字符的编码长度可变，为 1 ~ 4 个字节。比如存储 ASCII 码字符时只用 1 个字节，存储中文字符时使用 3 个字节。")]),s._v(" "),a("li",[s._v("编码之后的文本，不存在字节序的问题。")])]),s._v(" "),a("h4",{attrs:{id:"utf-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utf-16"}},[s._v("#")]),s._v(" UTF-16")]),s._v(" "),a("ul",[a("li",[s._v("：一种编码格式，不兼容 ASCII 码。")]),s._v(" "),a("li",[s._v("大部分字符的编码长度是 2 字节，少部分不常用的字符则是 4 字节。")]),s._v(" "),a("li",[s._v("编码之后的文本，可以在开头加上两个字节的标记，用于声明字节序，称为 BOM（Byte-Order Mark）。\n"),a("ul",[a("li",[s._v("如果编码格式为 UTF-16 ，且没有 BOM 标记，则由软件自行选择按大端序还是小端序处理。")]),s._v(" "),a("li",[s._v("如果在编码格式名称中声明了字节序，比如 utf-16be 或 utf-16le ，则不必加上 BOM 标记。")])])]),s._v(" "),a("li",[s._v("根据字节序分类：\n"),a("ul",[a("li",[s._v("UTF-16be ：大端序，BOM 标记为 "),a("code",[s._v("0xFE 0xFF")]),s._v(" 。")]),s._v(" "),a("li",[s._v("UTF-16le ：小端序，BOM 标记为 "),a("code",[s._v("0xFF 0xFE")]),s._v(" 。")])])]),s._v(" "),a("li",[s._v("例："),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-16'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编码格式名称中没有声明字节序，Python 默认会按小端序处理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("b'\\xff\\xfe1\\x002\\x00'")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编码之后，会在开头加上 BOM 标记，末尾加上空字符 \\x00 表示结束")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-16'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("b'\\xff\\xfeA\\x00'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-16be'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果编码格式名称中声明了字节序，则不必再加上 BOM 标记")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("b''")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-16le'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("b'A\\x00'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])]),s._v(" "),a("h4",{attrs:{id:"utf-32"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utf-32"}},[s._v("#")]),s._v(" UTF-32")]),s._v(" "),a("ul",[a("li",[s._v("：一种编码格式，不兼容 ASCII 码。")]),s._v(" "),a("li",[s._v("每个字符的编码长度都是 4 字节。")]),s._v(" "),a("li",[s._v("根据字节序分类：\n"),a("ul",[a("li",[s._v("UTF-32be ：大端序，BOM 标记为 "),a("code",[s._v("0x0000FEFF")]),s._v(" 。")]),s._v(" "),a("li",[s._v("UTF-32le ：小端序，BOM 标记为 "),a("code",[s._v("0xFFFE0000")]),s._v(" 。")])])])]),s._v(" "),a("h3",{attrs:{id:"ucs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ucs"}},[s._v("#")]),s._v(" UCS")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("UCS")]),s._v(" "),a("ul",[a("li",[s._v("：通用编码字符集（Universal Coded Character Set），由 ISO 10646 标准定义，相当于 Unicode 字符集的子集。")])])]),s._v(" "),a("li",[a("p",[s._v("UCS-2")]),s._v(" "),a("ul",[a("li",[s._v("：一种编码格式，是 UTF-16 的子集。")]),s._v(" "),a("li",[s._v("只对 Unicode 第零平面的字符进行编码。")]),s._v(" "),a("li",[s._v("每个字符的编码长度都是 2 字节。")]),s._v(" "),a("li",[s._v("根据字节序分类：\n"),a("ul",[a("li",[s._v("UCS-2be")]),s._v(" "),a("li",[s._v("UCS-2le")])])])])]),s._v(" "),a("li",[a("p",[s._v("UCS-4")]),s._v(" "),a("ul",[a("li",[s._v("：一种编码格式，是 UTF-32 的超集。")]),s._v(" "),a("li",[s._v("每个字符的编码长度都是 4 字节。")])])])]),s._v(" "),a("h3",{attrs:{id:"中文编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#中文编码"}},[s._v("#")]),s._v(" 中文编码")]),s._v(" "),a("h4",{attrs:{id:"gb2312"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gb2312"}},[s._v("#")]),s._v(" GB2312")]),s._v(" "),a("ul",[a("li",[s._v("：一种简体中文的编码格式，于 1980 年发布，已经过时。")]),s._v(" "),a("li",[s._v("在 Windows 中别名为 CP936 。")]),s._v(" "),a("li",[s._v("收录了 6k 多个汉字、拉丁字母等。")])]),s._v(" "),a("h4",{attrs:{id:"big5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#big5"}},[s._v("#")]),s._v(" BIG5")]),s._v(" "),a("ul",[a("li",[s._v("：一种繁体中文的编码格式，又称为大五码，于 1983 年发布。")]),s._v(" "),a("li",[s._v("收录了 1w 多汉字、拉丁字母等。")])]),s._v(" "),a("h4",{attrs:{id:"gbk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gbk"}},[s._v("#")]),s._v(" GBK")]),s._v(" "),a("ul",[a("li",[s._v("：一种中文编码格式，于 1995 年发布。")]),s._v(" "),a("li",[s._v("向下兼容 GB2312 ，向上支持 ISO 10646 标准，也收录了 BIG5 中的繁体汉字。总共收录了 2w 多个汉字。")]),s._v(" "),a("li",[s._v("英文字符的编码长度为 1 字节，中文字符的编码长度为 2 字节。")])]),s._v(" "),a("h4",{attrs:{id:"gb18030"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gb18030"}},[s._v("#")]),s._v(" GB18030")]),s._v(" "),a("ul",[a("li",[s._v("：一种中文编码格式，于 2000 年发布。")]),s._v(" "),a("li",[s._v("是 GBK 的超集。总共收录了 7w 多个汉字。")]),s._v(" "),a("li",[s._v("字符的编码长度可变，包括：\n"),a("ul",[a("li",[s._v("1 字节，向下兼容 ASCII 。")]),s._v(" "),a("li",[s._v("2 字节，向下兼容 GBK 。")]),s._v(" "),a("li",[s._v("4 字节")])])])]),s._v(" "),a("h2",{attrs:{id:"♢-codecs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#♢-codecs"}},[s._v("#")]),s._v(" ♢ codecs")]),s._v(" "),a("p",[s._v("：Python 的标准库，用于管理 Python 的编解码器。")]),s._v(" "),a("ul",[a("li",[s._v("它将编解码器称为 codec ，包括 encoder 和 decoder 。")]),s._v(" "),a("li",[s._v("它为所有编解码器定义了抽象的基类："),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Codec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("encode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" errors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("decode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" errors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[s._v("Python 解释器内置了很多种编码格式的编解码器，它们都在 codecs 模块中注册了。\n"),a("ul",[a("li",[s._v("编码格式的名称不区分大小写。对于连字符 - ，可以替换成下划线 _ ，也可以省略。")]),s._v(" "),a("li",[s._v("例：查询一种编码格式对应的编解码器"),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" codecs\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lookup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CodecInfo "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" encoding utf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x151dc6a99a0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lookup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf_8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CodecInfo "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" encoding utf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x151dcf59400")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lookup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CodecInfo "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" encoding utf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x151dcf59280")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])])])]),s._v(" "),a("h2",{attrs:{id:"♢-chardet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#♢-chardet"}},[s._v("#")]),s._v(" ♢ chardet")]),s._v(" "),a("p",[s._v("：Python 的第三方库，用于检测 bytes 对象采用的字节编码格式。")]),s._v(" "),a("ul",[a("li",[s._v("安装："),a("code",[s._v("pip install chardet")])]),s._v(" "),a("li",[s._v("其原理是通过比对各种字符集的特征字符来猜测编码格式。\n"),a("ul",[a("li",[s._v("检测的数据量太少就容易猜错。")]),s._v(" "),a("li",[s._v("不能处理 str 对象，因为 str 已经是按 Unicode 格式编码了。")])])]),s._v(" "),a("li",[s._v("例：检测一个字符串"),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" chardet\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" chardet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("detect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("b'Hello, world!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ascii'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'confidence'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'language'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# confidence 表示可信度，这里为 100%")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" chardet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("detect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GBK'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'confidence'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'language'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" chardet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("detect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你好'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GBK'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TIS-620'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'confidence'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3598212120361634")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'language'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Thai'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" chardet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("detect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你好，欢迎来到这里！'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GBK'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加检测的字符数量时，检测结果可能改变")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GB2312'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'confidence'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.99")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'language'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Chinese'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 即使 chardet 识别出为 GB2312 格式，建议也当作 GBK 格式解码。以免 chardet 把 GBK 误识别成了 GB2312 。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])]),s._v(" "),a("li",[s._v("例：检测一个文件"),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" chardet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("detect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GB2312'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);