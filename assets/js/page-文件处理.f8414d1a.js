(window.webpackJsonp=window.webpackJsonp||[]).push([[322],{729:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"文件处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件处理"}},[s._v("#")]),s._v(" 文件处理")]),s._v(" "),t("h2",{attrs:{id:"查看文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看文件"}},[s._v("#")]),s._v(" 查看文件")]),s._v(" "),t("h3",{attrs:{id:"ls"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ls"}},[s._v("#")]),s._v(" ls")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出指定目录（默认为当前目录）下的各个文件名（不包括隐藏文件）")]),s._v("\n      -a        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有文件（包括隐藏文件）")]),s._v("\n      -A        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 与 -a 相比，不显示相对目录 . 和 ..")]),s._v("\n      -l        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示文件的详细信息")]),s._v("\n      -h        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以人类容易阅读的单位显示文件大小")]),s._v("\n      -d        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示目录本身，不显示目录下的内容")]),s._v("\n      -i        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示文件指向的 inode 号")]),s._v("\n      -Z        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示一列安全上下文，格式为 user:role:type:level")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\ndr-xr-x---.  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":17 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndr-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" 02:49 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-------   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6318")]),s._v(" Dec  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":44 .bash_history\n-rw-r--r--.  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Dec "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v(" .bash_logout\n-rw-r--r--.  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("176")]),s._v(" Dec "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v(" .bash_profile\n-rw-r--r--.  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("176")]),s._v(" Dec "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v(" .bashrc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("total 表示已显示的这些文件占用的磁盘 block 总数。")]),s._v(" "),t("li",[s._v("第一列，比如 dr-xr-x---. ，开头的 d 表示文件类型为目录，其后的 r-xr-x--- 表示文件的访问权限，末尾的 . 表示该文件使用了 SELinux 。（如果使用了 ACL 就会变成 + ）")]),s._v(" "),t("li",[s._v("第二列的数字表示指向该文件的 inode 的硬链接数。")]),s._v(" "),t("li",[s._v("第三列、第四列表示文件所有者、所有者所属用户组。")]),s._v(" "),t("li",[s._v("第五列表示文件的大小（单位为 Byte）。如果该文件是目录，则不包括目录中各文件的大小。")]),s._v(" "),t("li",[s._v("Nov 27 19:17 表示文件的最后修改时间。")]),s._v(" "),t("li",[s._v("最后一列表示文件名。")])])]),s._v(" "),t("li",[s._v("文件路径中，支持用通配符 ? 匹配单个字符，用通配符 * 匹配任意个字符（包括零个）。如下："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /etc/*-release\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"du"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#du"}},[s._v("#")]),s._v(" du")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("du")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定目录（默认为当前目录）及其子目录下的各个文件占用的磁盘空间")]),s._v("\n      -a       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示非目录文件")]),s._v("\n      -h       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以人类容易阅读的单位显示文件大小")]),s._v("\n      -d n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最多显示 n 层子目录")]),s._v("\n      -s       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示该目录占用的总磁盘空间")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("du")]),s._v(" -ahd "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示当前目录下各个文件的大小，像 Windows 风格")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"tree"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tree"}},[s._v("#")]),s._v(" tree")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ tree "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("目录"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按树形结构显示某个目录（默认为当前目录）下的所有文件")]),s._v("\n       -a          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示隐藏文件")]),s._v("\n       -C          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用不同颜色显示不同类型的文件")]),s._v("\n       -L "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最多显示到第 n 层子目录")]),s._v("\n       -D          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个文件的最后修改时间")]),s._v("\n       -p          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个文件的访问权限")]),s._v("\n       -u          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个文件的所有者")]),s._v("\n       -sh         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以人类容易阅读的单位显示文件大小")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("安装： "),t("code",[s._v("yum install tree")])])]),s._v(" "),t("h3",{attrs:{id:"lsof"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lsof"}},[s._v("#")]),s._v(" lsof")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示目前所有被进程打开的文件")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示打开指定文件的所有进程")]),s._v("\n      -p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定进程打开的所有文件")]),s._v("\n      -u "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("uid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定用户打开的所有文件")]),s._v("\n\n      -i           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示 socket 文件")]),s._v("\n      -i :22       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示指定端口的 socket 文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("安装："),t("code",[s._v("yum install lsof")])])]),s._v(" "),t("h2",{attrs:{id:"查找文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查找文件"}},[s._v("#")]),s._v(" 查找文件")]),s._v(" "),t("h3",{attrs:{id:"find"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#find"}},[s._v("#")]),s._v(" find")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定目录（默认是当前目录）下的所有文件（包括子目录）")]),s._v("\n            -exec "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对每个找到的文件名（用 {} 表示）执行一条命令，该命令以 \\; 结尾")]),s._v("\n\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以添加以下选项作为筛选条件")]),s._v("\n            -maxdepth "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制搜索的目录深度（默认为无限深）")]),s._v("\n            -type f             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制文件类型，类型可以是 f、d、l、s、c 等")]),s._v("\n\n            -name *.py          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 筛选文件名，采用 shell 风格的匹配")]),s._v("\n            -iname *.py         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配时不区分大小写（insensitive）")]),s._v("\n            -path */test/*      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 筛选文件路径")]),s._v("\n            -ipath */test/*\n            -regex .*py         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 筛选文件路径，采用正则匹配")]),s._v("\n            -iregex .*py\n\n            -user root          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 属于指定用户的文件，可以使用 uid")]),s._v("\n            -group root         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 属于指定用户组的文件，可以使用 gid")]),s._v("\n            -perm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件权限等于 mode ，mode 取值可以为 0644、644、u=rw-,g=rw,o=r 等格式，按二进制位进行匹配")]),s._v("\n            -perm -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件权限大于 mode")]),s._v("\n\n            -size -10k          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 小于 10k 的文件")]),s._v("\n            -amin -3            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 过去 3 分钟之内被 access 的文件（同理还有 cmin、mmin ）")]),s._v("\n            -atime -3           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 过去 3 天之内被 access 的文件（同理还有 ctime、mtime ）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("ul",[t("li",[s._v("筛选条件为数值类型时，有三种表示方式："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等于")]),s._v("\n+n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 大于")]),s._v("\n-n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 小于")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("code",[s._v("-size")]),s._v(" 选项可以使用以下单位："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("b     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# blocks ，默认采用这种")]),s._v("\nc     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bytes")]),s._v("\nk     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kilo bytes")]),s._v("\nM     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mega bytes")]),s._v("\nG     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Giga bytes")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch 1.py")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\ndrwxrwxr-x.  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" Jan  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":10 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwx------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jan  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":52 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-rw-r--.  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jan  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":10 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".py\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find . -name *.py")]),s._v("\n./1.py\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find . ! -name *.py            # 在筛选条件之前加冒号 ! 则表示反选")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find . ! -name *.py ! -name .  # 可以重复使用同一种筛选条件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])]),s._v(" "),t("li",[s._v("例：查找并删除文件"),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -name *.log -exec "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -name *.log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"locate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#locate"}},[s._v("#")]),s._v(" locate")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("locate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pattern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示文件路径包含 pattern 的所有文件")]),s._v("\n         -i         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pattern 不区分大小写")]),s._v("\n         -r         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pattern 采用正则表达式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("安装： "),t("code",[s._v("yum install mlocate")])]),s._v(" "),t("li",[s._v("locate 命令会从数据库 /var/lib/mlocate/mlocate.db 中查找文件，速度较快。该数据库一般每天更新一次，执行命令 "),t("code",[s._v("updatedb")]),s._v(" 可立即更新。")])]),s._v(" "),t("h2",{attrs:{id:"移动文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移动文件"}},[s._v("#")]),s._v(" 移动文件")]),s._v(" "),t("h3",{attrs:{id:"cp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cp"}},[s._v("#")]),s._v(" cp")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("源路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("目标路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将文件拷贝到目标路径")]),s._v("\n     -a                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 相当于-dpr")]),s._v("\n     -d                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若源文件为 link file ，则复制 link file 的属性（而非文件本身）")]),s._v("\n     -p                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将源文件的权限、属性也拷贝过去（否则会使用默认属性）")]),s._v("\n     -r                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归操作（用于复制目录）")]),s._v("\n\n     -f                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若目标文件已存在，则删除它再尝试拷贝")]),s._v("\n     -i                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若目标文件已存在，则提示用户是否进行覆盖")]),s._v("\n     -n                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若目标文件已存在，则不覆盖")]),s._v("\n     -u                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --update ，当目标文件不存在，或源文件比目标文件更新时，才执行拷贝")]),s._v("\n     -v                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示执行过程的详细信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ul",[t("li",[s._v("系统一般设置了 "),t("code",[s._v("alias cp='cp -i'")]),s._v(" ，所以-f 选项无效。")]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" f1 f2\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" f1 f2 /tmp\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -r *  /tmp   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 源路径中包含通配符 * 时，不会拷贝隐藏文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  /tmp\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a *  /tmp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[s._v("执行 "),t("code",[s._v("cp f1 f2")]),s._v(" 时，\n"),t("ul",[t("li",[s._v("如果 f2 不存在，则会先创建一个空的 f2 文件，再将 f1 的内容拷贝过去。")]),s._v(" "),t("li",[s._v("如果 f2 已存在，则会先将 f2 的内容清空，再将 f1 的内容拷贝过去，因此目标文件依然使用 f2 的 inode 号。\n如果该过程中有其它进程也在修改 f2 ，则会导致 cp 出错。")])])])]),s._v(" "),t("h3",{attrs:{id:"ln"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ln"}},[s._v("#")]),s._v(" ln")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("源路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("目标路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件的硬链接")]),s._v("\n     -s                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件的软链接")]),s._v("\n     -f                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若目标文件已存在，则覆盖它")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("创建链接时，源路径、目标路径都必须是绝对路径。")]),s._v(" "),t("li",[s._v("例：")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /tmp tmp")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lh")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nlrwxrwxrwx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" Jan  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":21 tmp -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /tmp\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -f tmp/               # 如果软链接文件指向一个目录，删除时不能加上 / 后缀，否则会被视作删除目标目录")]),s._v("\nrm: cannot remove ‘tmp/’: Is a directory\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -f tmp")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"rename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rename"}},[s._v("#")]),s._v(" rename")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rename")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("源字符串"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("目标字符串"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("文件"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换文件名中的字符串")]),s._v("\n         -v                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个被处理的文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("rename 命令主要用于批量重命名文件，不能像 mv 命令一样移动文件。")])]),s._v(" "),t("h3",{attrs:{id:"mv"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mv"}},[s._v("#")]),s._v(" mv")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("源路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("目标路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移动文件（也可以移动目录）")]),s._v("\n     -f                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若目标文件已存在，则覆盖它")]),s._v("\n     -i                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若目标文件已存在，则提示用户是否进行覆盖")]),s._v("\n     -u                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当目标文件不存在，或源文件比目标文件新时，才执行移动（即 update）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("mv 命令可以用于移动文件，也可以用于重命名文件（此时源路径只能有一个）。")]),s._v(" "),t("li",[s._v("如果是在同一文件系统内 mv 文件，则只会重命名文件路径，依然使用源文件的 inode 号 。")]),s._v(" "),t("li",[s._v("如果是跨文件系统 mv 文件，则会先拷贝源文件到目标路径（使用新的 inode 号），再删除源文件，相当于 "),t("code",[s._v("cp f1 f2 && rm f1")]),s._v(" 。\n"),t("ul",[t("li",[s._v("如果 mv 文件、文件夹的过程失败，并不会删除源文件。")])])]),s._v(" "),t("li",[s._v("例：\n"),t("ul",[t("li",[t("code",[s._v("mv f1 f2")]),s._v(" "),t("ul",[t("li",[s._v("如果 f2 不存在，则会将 f1 重命名为 f2 ，依然使用 f1 的 inode 号。")]),s._v(" "),t("li",[s._v("如果 f2 已存在，则会先删除 f2 ，再将 f1 重命名为 f2 ，依然使用 f1 的 inode 号。")])])]),s._v(" "),t("li",[t("code",[s._v("mv dir1/ dir2/")]),s._v(" "),t("ul",[t("li",[s._v("如果 dir2 不存在，则将 dir1 重命名为 dir2 。")]),s._v(" "),t("li",[s._v("如果 dir2 已存在，则将 dir1 移动到 dir2 之下，保存为 dir2/dir1 。")]),s._v(" "),t("li",[s._v("如果 dir2/dir1 已存在且不为空，则会报错 "),t("code",[s._v("cannot move 'dir1' to '/dir2/dir1': Directory not empty")]),s._v(" ，此时可以改用 "),t("code",[s._v("cp -rf dir1 dir2 && rm -rf dir1")]),s._v(" 。")])])]),s._v(" "),t("li",[t("code",[s._v("mv dir1/* dir2/")]),s._v(" "),t("ul",[t("li",[s._v("将 dir1/ 目录下的所有文件移动到 dir2/ 目录下。")]),s._v(" "),t("li",[s._v("当移动多个源文件时，目标路径只能是一个目录，因此末尾不加斜杆 / 也能自动识别。")])])])])])]),s._v(" "),t("h3",{attrs:{id:"rm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rm"}},[s._v("#")]),s._v(" rm")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除文件")]),s._v("\n     -d         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除目录（只能是空目录）")]),s._v("\n     -r         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归删除（用于删除非空目录）")]),s._v("\n     -i         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若文件存在，则提示用户是否确认删除")]),s._v("\n     -f         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制删除（覆盖 -i 选项，且忽略文件不存在时的报错）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf *      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制删除当前目录下的所有文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"压缩文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩文件"}},[s._v("#")]),s._v(" 压缩文件")]),s._v(" "),t("h3",{attrs:{id:"tar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tar"}},[s._v("#")]),s._v(" tar")]),s._v(" "),t("p",[s._v("：一种打包文件的格式，不会进行压缩，扩展名为 .tar 。")]),s._v(" "),t("ul",[t("li",[s._v("tar 命令也支持使用 gzip、bzip2、xz 压缩格式。")]),s._v(" "),t("li",[s._v("打包命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -cf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将指定文件或目录打包")]),s._v("\n    -c                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新文件")]),s._v("\n    -x                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提取文件。能根据文件头部的内容识别出 gzip、bzip2、xz 压缩格式，并自动解压")]),s._v("\n    -v                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示处理过程的具体信息")]),s._v("\n    -f "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用归档文件")]),s._v("\n    --exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./log*                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据路径 pattern 将一些文件排除打包")]),s._v("\n    -g "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("snapshot"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进行增量打包，生成一个快照文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("打包文件时，如果输入的原路径是绝对路径，则会按绝对路径打包，生成多余的多层目录。因此，建议输入相对路径。")]),s._v(" "),t("li",[s._v("如果已存在同名的包文件，则会覆盖它。")])])]),s._v(" "),t("li",[s._v("解包命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v("\n    -xv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解包到当前目录")]),s._v("\n          -C "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解包到指定目录（该目录必须已存在）")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只解压指定路径的文件（可以使用通配符）")]),s._v("\n          -p                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保留文件的原访问权限，否则将解压后文件的所有者变为当前用户。root 用户默认会启用该选项")]),s._v("\n    -tf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不解包，只显示其中的文件列表")]),s._v("\n    -tf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar.gz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除解包生成的文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])]),s._v(" "),t("li",[s._v("增量打包的示例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" logs\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -g logs-snapshot -cvf logs-full-backup.tar logs/             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先全量打包，作为起点")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" logs/f1\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -g logs-snapshot -cvf logs-incremental-backup-1.tar logs/    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增量打包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" logs/f2\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -g logs-snapshot -cvf logs-incremental-backup-2.tar logs/    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增量打包")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[s._v("用 -g 选项进行增量打包时，会在快照文件中记录此时打包的所有文件的 Modify time 。下一次增量打包时，如果有新增文件，或者老文件的 Modify time 更新了，才加入打包，否则生成的增量包为空。")]),s._v(" "),t("li",[s._v("缺点是，增量打包时不能记录被删除的老文件。")]),s._v(" "),t("li",[s._v("多次增量打包时，注意生成的 .tar.gz 包名不能重复，否则会覆盖之前的增量包。")]),s._v(" "),t("li",[s._v("解包时，按照与打包时一致的顺序："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf logs-full-backup.tar\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf logs-incremental-backup-1.tar\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf logs-incremental-backup-2.tar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])])]),s._v(" "),t("h3",{attrs:{id:"gzip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gzip"}},[s._v("#")]),s._v(" gzip")]),s._v(" "),t("p",[s._v("：一种压缩文件格式，基于 Deflate 算法，扩展名为 .gz 。")]),s._v(" "),t("ul",[t("li",[s._v("压缩命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zcvf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar.gz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    -z                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用 gzip 格式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("压缩 tar 包时的扩展名为 .tar.gz ，可简写为 .tgz 。")])])]),s._v(" "),t("li",[s._v("解压命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("archive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"bzip2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bzip2"}},[s._v("#")]),s._v(" bzip2")]),s._v(" "),t("p",[s._v("：一种压缩文件格式，基于 Burrows–Wheeler 算法，扩展名为 .bz2 。")]),s._v(" "),t("ul",[t("li",[s._v("安装："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bzip2")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bzip2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    -z            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --compress ，压缩。只支持压缩单个文件，因此需要用 tar 命令打包后压缩")]),s._v("\n    -d            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --decompress ，解压")]),s._v("\n    -k            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --keep ，在压缩、解压之后不删除输入文件，默认会删除")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("bzip2 命令只支持压缩单个文件，因此通常用 tar 命令打包后压缩。")])])]),s._v(" "),t("li",[s._v("压缩命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -jcvf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar.bz2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    -j                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用 bzip2 格式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[s._v("解压命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("archive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"xz"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xz"}},[s._v("#")]),s._v(" xz")]),s._v(" "),t("p",[s._v("：一种压缩文件格式，基于 LZMA 算法，扩展名为 .xz 。")]),s._v(" "),t("ul",[t("li",[s._v("xz 命令与 bzip2 命令的用法相似。")]),s._v(" "),t("li",[s._v("压缩命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -Jcvf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".tar.xz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    -J                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用 xz 格式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[s._v("解压命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("archive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"zip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zip"}},[s._v("#")]),s._v(" zip")]),s._v(" "),t("p",[s._v("：一种压缩文件格式，扩展名为 .zip 。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("支持多种压缩算法：")]),s._v(" "),t("ul",[t("li",[s._v("Deflate ：Zip、GZip 的默认压缩算法，对应的解压算法称为 Inflate 。压缩率一般，但压缩、解压快。")]),s._v(" "),t("li",[s._v("Burrows–Wheeler ：压缩率高，一般能压缩文件体积到 20% ，但压缩、解压慢。")]),s._v(" "),t("li",[s._v("LZMA ：xz、7-Zip 的默认压缩算法，压缩率比 高。")])])]),s._v(" "),t("li",[t("p",[s._v("安装：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("压缩命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".zip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩文件")]),s._v("\n      -r                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归处理（用于处理目录）")]),s._v("\n      -s 500m             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --split-size ，将压缩包分割成多份，并设置每份的最大体积")]),s._v("\n      -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.py"')]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --include ，只打包路径与 pattern 匹配的文件。注意 pattern 要用引号包住，避免先执行 * 去匹配文件名")]),s._v("\n      -x "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logs/*"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.log"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --exclude ，将一些文件排除打包。--exclude 比 --include 的优先级更高")]),s._v("\n      -P "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"..."')]),s._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置密码")]),s._v("\n      -q                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安静模式，不显示过程信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("如果已存在同名的压缩包，则会加入其中。\n"),t("ul",[t("li",[s._v("如果该压缩包中已存在同名的文件，则会覆盖它。")])])]),s._v(" "),t("li",[s._v("例：批量压缩文件"),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("file_list")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" *.mp4"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file_list")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$f")]),s._v(".zip "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$f")]),s._v(" -P "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'******'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$f")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[s._v("解压命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".zip       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压一个压缩包")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只解压指定路径的文件（可以使用通配符）")]),s._v("\n        -d "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压到指定目录（默认是当前目录）")]),s._v("\n        -o               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当解压后的文件已存在时，直接覆盖")]),s._v("\n        -q               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安静模式，不显示过程信息")]),s._v("\n\n        -l               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不解压，而是显示其中的文件列表、修改时间")]),s._v("\n        -Z               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Zipinfo ，显示压缩包的详细信息，包括文件列表、模式、大小等")]),s._v("\n        -Z1              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示文件列表")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("unzip 命令不支持直接解压分割成多份的压缩包。"),t("br"),s._v("\n比如生成分割的压缩包："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" -s 10m -r tmp.zip /tmp    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 假设此时生成 tmp.z01  tmp.z02  tmp.zip ，其中 tmp.zip 是最后一份压缩包")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),s._v("此时执行 "),t("code",[s._v("unzip tmp.zip")]),s._v(" 会报错 "),t("code",[s._v("bad zipfile offset")]),s._v(" ，需要用以下命令解压："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" -F tmp.zip --out tmp-fixd.zip   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修复分割的压缩包，合并成一个包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" tmp-fixd.zip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])])])]),s._v(" "),t("h3",{attrs:{id:"_7-zip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-zip"}},[s._v("#")]),s._v(" 7-Zip")]),s._v(" "),t("p",[s._v("：一种压缩文件格式，扩展名为 .7z 。")]),s._v(" "),t("ul",[t("li",[s._v("在加密方面：\n"),t("ul",[t("li",[s._v("Zip 采用传统的 ZipCrypto 算法，存在漏洞：如果知道文件中 12 字节的明文文本，则能大幅降低暴力破解的计算量。")]),s._v(" "),t("li",[s._v("7-Zip 采用 AES-256 算法，又称为 7zAES:19 ，更安全。且支持将文件名也加密。")])])])]),s._v(" "),t("h2",{attrs:{id:"拷贝文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拷贝文件"}},[s._v("#")]),s._v(" 拷贝文件")]),s._v(" "),t("h3",{attrs:{id:"dd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dd"}},[s._v("#")]),s._v(" dd")]),s._v(" "),t("p",[s._v("：用于在本机上拷贝文件，并支持转换文件格式。")]),s._v(" "),t("ul",[t("li",[s._v("命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入文件，默认为 stdin")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出文件，默认为 stdout")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("blocks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝多少个块（默认为拷贝全部数据）")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bytes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入、输出的每个块的大小。默认为 512 ，取值过大会占用过多内存")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ibs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bytes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入的每个块的大小")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("obs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bytes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出的每个块的大小")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/sda1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/sda1.back   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从 if 所指目录拷贝数据到 of 所指目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/cdrom "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cd.iso          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝文件并转换成 iso 文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[s._v("dd 命令可用于拷贝出一个指定大小的文件，也可以用于测试磁盘 IO 速度，如下："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/zero of=f1 count=1024 bs=1M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("+0 records "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("+0 records out\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1073741824")]),s._v(" bytes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(" GB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" copied, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.27441")]),s._v(" s, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("843")]),s._v(" MB/s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"rsync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rsync"}},[s._v("#")]),s._v(" rsync")]),s._v(" "),t("p",[s._v("：用于跨主机拷贝文件。")]),s._v(" "),t("ul",[t("li",[s._v("与 scp 相比：\n"),t("ul",[t("li",[s._v("rsync 服务默认采用 TCP 873 端口，且不是加密传输。不过可以改为基于 SSH 协议传输。")]),s._v(" "),t("li",[s._v("rsync 将每个文件分块传输，如果目标文件中已包含 md5 值相同的块，则不拷贝。因此适合断点续传、增量备份。")])])]),s._v(" "),t("li",[s._v("命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v("\n        SRC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". DEST             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在本机拷贝文件（此时相当于 cp 命令）")]),s._v("\n        SRC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("HOST:DEST "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将本机的文件拷贝到其它主机")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("HOST:SRC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". DEST "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将其它主机的文件拷贝到本机")]),s._v("\n        -a                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保留文件属性，且递归处理")]),s._v("\n        -r                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归处理")]),s._v("\n        -P                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示传输进度")]),s._v("\n        -z                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩传输的数据")]),s._v("\n        -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssh -p 22"')]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基于 SSH 协议加密传输")]),s._v("\n        --delete                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除目标目录比源目录多出的文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("当 SRC 是目录时，如果以 / 结尾，则相当于 "),t("code",[s._v("cp SRC/* DEST")]),s._v(" ，否则相当于 "),t("code",[s._v("cp SRC DEST")]),s._v(" 。")]),s._v(" "),t("li",[s._v("如果 DEST 目录不存在，则会自动创建。")])])]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -a  /root/f1   root@10.10.0.1:/root\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -aP -e "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" f1  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1:/root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"dump"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dump"}},[s._v("#")]),s._v(" dump")]),s._v(" "),t("p",[s._v("dump、restore 命令用于备份本机的文件或目录，适用于 etx2、etx3、etx4 文件系统。")]),s._v(" "),t("details",[t("summary",[s._v("已淘汰不用")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份指定的文件或目录")]),s._v("\n       -f "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存为指定文件")]),s._v("\n       -"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置备份级别")]),s._v("\n       -j               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩为 bzip2 格式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("备份级别有 0~9 十种，0 是完全备份，1~9 都是增量备份。\n"),t("ul",[t("li",[s._v("在备份整个分区或磁盘时才能使用增量备份。比如用 0 完全备份一次之后，可用 1 增量备份。下一次备份时，用 2 就是增量备份（级别加一），用 1 就是差异备份（覆盖之前的同级数据）。")])])]),s._v(" "),t("li",[s._v("dump 生成的备份文件并不是普通的压缩文件，还包含了一些备份信息，不能直接解压，只能被 restore 命令使用。")]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("dump -j -0f root.back.bz2 /root/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ restore\n         -f "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定备份文件（会根据其中的备份信息，还原到原路径）")]),s._v("\n         -r        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用备份文件进行还原")]),s._v("\n         -t        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示备份文件的内容")]),s._v("\n         -C        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 比较当前文件与备份文件的差异（比如旧文件被修改、删除，但是增加新文件时不算差异）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("restore 会生成一个 restoresymtable 文件，便于在增量备份时传递信息，可以删除。")]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("restore -tf root.back.bz2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("h2",{attrs:{id:"切割文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#切割文件"}},[s._v("#")]),s._v(" 切割文件")]),s._v(" "),t("h3",{attrs:{id:"split"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#split"}},[s._v("#")]),s._v(" split")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("split")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prefix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分割文件")]),s._v("\n        -l "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每隔 10 行分割出一个小文件")]),s._v("\n        -b 10K            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每隔 10K Bytes 分割出一个文件（单位可以是 K、M、G、T 等）")]),s._v("\n        -d                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分割出的文件从数字 00 开始编号")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("默认将源文件每隔 1000 行分割出一个文件，文件名以 x 为前缀，从 aa 开始编号。")]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# split -l 3 -d README.md README.md-")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nREADME.md  README.md-00  README.md-01  README.md-02  README.md-03  README.md-04\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat README.md-* > merged")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"truncate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#truncate"}},[s._v("#")]),s._v(" truncate")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ truncate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n          -s 10M      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将文件调整为指定大小，多余的空间会被截断，缺少的空间会用空字节填补")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"其它"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[s._v("#")]),s._v(" 其它")]),s._v(" "),t("h3",{attrs:{id:"md5sum"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#md5sum"}},[s._v("#")]),s._v(" md5sum")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ md5sum "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 计算文件的 md5 哈希值")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo Hello | md5sum")]),s._v("\n09f7e02f1290be211da707a266f153b3  -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[s._v("另外还有 sha1sum、sha256sum、sha512sum 命令，用法同理。")])]),s._v(" "),t("h3",{attrs:{id:"随机数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#随机数据"}},[s._v("#")]),s._v(" 随机数据")]),s._v(" "),t("p",[s._v("Linux 提供了以下两个特殊的字符设备文件，用于产生随机数据：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("/dev/random")]),s._v(" ：消耗系统的熵池来产生随机数据，随机性很高，但是熵池不足时会阻塞读取它的进程。")]),s._v(" "),t("li",[t("code",[s._v("/dev/urandom")]),s._v(" ：重复使用熵池来产生随机数据，随机性略低，但一般足够安全。")]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -c 10M /dev/urandom "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f1                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成一个指定大小、随机内容的文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /dev/urandom "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" -cd A-Za-z0-9 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成随机字符串")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /dev/urandom "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" -cd "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-9 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("%5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成小于 5 的随机数")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);