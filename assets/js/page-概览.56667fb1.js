(window.webpackJsonp=window.webpackJsonp||[]).push([[340],{1039:function(e,t,a){"use strict";a.r(t);var v=a(1),n=Object(v.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("br"),e._v(" "),a("h2",{attrs:{id:"配置方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法"}},[e._v("#")]),e._v(" 配置方法")]),e._v(" "),a("p",[e._v("在 Vaultwarden 中，您可以通过环境变量或 "),a("RouterLink",{attrs:{to:"/vaultwarden/Configuration/Enabling-admin-page.html"}},[e._v("启用管理页面")]),e._v("(将设置写入数据目录下的 "),a("code",[e._v("config.json")]),e._v(" 文件)执行配置。需要注意的是，"),a("code",[e._v("config.json")]),e._v(" 中的每个设置都会覆盖相应的环境变量设置(如果存在)。例如，如果你设置了环境变量"),a("code",[e._v("DOMAIN=https://bitwarden.example.com")]),e._v("，但是你的"),a("code",[e._v("config.json")]),e._v("包含"),a("code",[e._v('"domain": "https://vw.example.com"')]),e._v("，那么Vaultwarden 将根据配置文件 ("),a("code",[e._v("https://vw.example.com")]),e._v(") 中的内容生成各种链接。")],1),e._v(" "),a("p",[e._v("一个常见的混淆源是启用管理页面(创建 "),a("code",[e._v("config.json")]),e._v(" 文件)，通过管理页面更改一些设置(在 "),a("code",[e._v("config.json")]),e._v(" 中设置相应的值)，然后尝试更改这些设置通过环境变量(这不起作用，因为"),a("code",[e._v("config.json")]),e._v(" 覆盖了环境变量)。为了避免这种混淆，强烈建议坚持使用一种或另一种配置方法；也就是说，完全通过环境变量配置，或者完全通过"),a("code",[e._v("config.json")]),e._v("(无论是使用管理页面还是直接编辑"),a("code",[e._v("config.json")]),e._v(")。")]),e._v(" "),a("p",[e._v("请注意，管理页面的"),a("code",[e._v("只读配置")]),e._v("部分下的配置设置只能通过环境变量进行设置，因此您必须重新启动 Vaultwarden 才能对其进行更改。")]),e._v(" "),a("h2",{attrs:{id:"从文件加载环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从文件加载环境变量"}},[e._v("#")]),e._v(" 从文件加载环境变量")]),e._v(" "),a("p",[e._v("如果你想将环境变量保存在一个文件中(通常命名为"),a("code",[e._v(".env")]),e._v(")，你可以按如下方式加载它们：")]),e._v(" "),a("ul",[a("li",[e._v("使用独立的 Vaultwarden，将 "),a("code",[e._v(".env")]),e._v(" 放在当前工作目录中。 Vaultwarden 将尝试在启动时加载此文件。请注意，Vaultwarden 仅查找名为"),a("code",[e._v(".env")]),e._v("的 env 文件；它不知道如何找到具有其他名称的 env 文件。")]),e._v(" "),a("li",[e._v("使用 Docker，通过使用 "),a("code",[e._v("docker run --env-file <env-file> ...")]),e._v("(让 Docker 加载 env 文件)或 "),a("code",[e._v("docker run -v /path/to/.env:/.env")]),e._v(" (让 Vaultwarden 从容器内部加载 "),a("code",[e._v(".env")]),e._v(" 文件)。如果您使用"),a("code",[e._v("--env-file")]),e._v("，请注意Docker 不会取消引用值，因此请确保使用"),a("code",[e._v("key=val")]),e._v(" 而不是"),a("code",[e._v('key="val"')]),e._v(" 或"),a("code",[e._v("key='val'")]),e._v("。")]),e._v(" "),a("li",[e._v("使用 Docker Compose，通过使用 "),a("a",{attrs:{href:"https://docs.docker.com/compose/environment-variables/#the-env_file-configuration-option",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("env_file")]),a("OutboundLink")],1),e._v(" 指令。")])]),e._v(" "),a("h2",{attrs:{id:"配置选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置选项"}},[e._v("#")]),e._v(" 配置选项")]),e._v(" "),a("p",[e._v("您可以在以下位置找到可以设置的环境变量列表")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/dani-garcia/vaultwarden/blob/main/.env.template",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/dani-garcia/vaultwarden/blob/main/.env.template"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("如果您启用 "),a("RouterLink",{attrs:{to:"/vaultwarden/Configuration/Enabling-admin-page.html"}},[e._v("启用管理页面")]),e._v("，也会显示完整的配置选项列表。")],1),e._v(" "),a("p",[e._v("如有任何错误或遗漏，真实来源为")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/dani-garcia/vaultwarden/blob/main/src/config.rs",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/dani-garcia/vaultwarden/blob/main/src/config.rs"),a("OutboundLink")],1),e._v("(搜索"),a("code",[e._v("make_config！{")]),e._v(")")]),e._v(" "),a("p",[e._v("或者，如果您的(基于 Chromium 的)浏览器支持文本片段，则可以使用此直接链接：")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/dani-garcia/vaultwarden/blob/main/src/config.rs#LC290:~:text=make_config!%20%7B,-folders",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/dani-garcia/vaultwarden/blob/main/src/config.rs#LC290:~:text=make_config! {,-folders"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"设置域url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置域url"}},[e._v("#")]),e._v(" 设置域URL")]),e._v(" "),a("p",[e._v("确保将 "),a("code",[e._v("DOMAIN")]),e._v(" 环境变量(或配置文件中的 "),a("code",[e._v("domain")]),e._v(")设置为用于访问 Vaultwarden 实例的 URL。如果您不这样做，则各种功能很可能会神秘地中断。一些例子：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("https://bitwarden.example.com")])]),e._v(" "),a("li",[a("code",[e._v("https://bitwarden.example.com:8443")]),e._v("(非默认端口)")]),e._v(" "),a("li",[a("code",[e._v("https://host.example.com/bitwarden")]),e._v(" (尽可能避免 URL 重写技巧)")])])])}),[],!1,null,null,null);t.default=n.exports}}]);