(window.webpackJsonp=window.webpackJsonp||[]).push([[353],{1051:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("默认情况下，Vaultwarden 仅记录到 "),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Standard_streams#Standard_output_(stdout)",target:"_blank",rel:"noopener noreferrer"}},[s._v("标准输出"),t("OutboundLink")],1),s._v(" (stdout)。您还可以将其配置为记录到文件。")]),s._v(" "),t("h2",{attrs:{id:"记录到文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#记录到文件"}},[s._v("#")]),s._v(" 记录到文件")]),s._v(" "),t("p",[s._v("从版本 1.5.0 开始支持记录到文件。您可以使用"),t("code",[s._v("LOG_FILE")]),s._v("环境变量指定日志文件的路径：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d --name vaultwarden "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n  -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/vaultwarden.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("设置此环境变量后，日志消息将记录到标准输出和日志文件中。如果您在 Docker 中运行，您很可能希望使用从 Docker 主机挂载的文件路径(例如 "),t("code",[s._v("data")]),s._v(" 文件夹)；否则，如果容器重新启动或删除，您的日志文件将丢失(或至少很难找到)。")]),s._v(" "),t("h2",{attrs:{id:"更改日志级别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更改日志级别"}},[s._v("#")]),s._v(" 更改日志级别")]),s._v(" "),t("p",[s._v("要减少日志消息的数量，您可以将日志级别设置为"),t("code",[s._v("警告")]),s._v("(默认为"),t("code",[s._v("信息")]),s._v(")。 "),t("a",{attrs:{href:"https://docs.rs/log/0.4.7/log/enum.Level.html#variants",target:"_blank",rel:"noopener noreferrer"}},[s._v("日志级别"),t("OutboundLink")],1),s._v(" 可以通过环境变量"),t("code",[s._v("LOG_LEVEL")]),s._v("进行调整，同时还可以设置"),t("code",[s._v("EXTENDED_LOGGING=true")]),s._v("。注意：使用日志级别"),t("code",[s._v("警告")]),s._v("或"),t("code",[s._v("错误")]),s._v("仍然允许 "),t("RouterLink",{attrs:{to:"/vaultwarden/Configuration/Fail2Ban-Setup.html"}},[s._v("Fail2Ban")]),s._v(" 正常工作。")],1),s._v(" "),t("p",[t("code",[s._v("LOG_LEVEL")]),s._v(" 选项是："),t("code",[s._v("trace")]),s._v("、"),t("code",[s._v("debug")]),s._v("、"),t("code",[s._v("info")]),s._v("、"),t("code",[s._v("warn")]),s._v("、"),t("code",[s._v("error")]),s._v("或"),t("code",[s._v("off")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d --name vaultwarden "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n  -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_LEVEL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("warn -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EXTENDED_LOGGING")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"查看日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看日志"}},[s._v("#")]),s._v(" 查看日志")]),s._v(" "),t("p",[s._v("如果在 Docker 中运行："),t("code",[s._v("docker logs <container-name>")])]),s._v(" "),t("p",[s._v("如果通过 "),t("code",[s._v("systemd")]),s._v(" 运行："),t("code",[s._v("journalctl -u vaultwarden.service")]),s._v("(或任何你的服务名称)")]),s._v(" "),t("p",[s._v("否则，检查标准输出的重定向位置，或设置"),t("code",[s._v("LOG_FILE")]),s._v("环境变量并查看该文件。")])])}),[],!1,null,null,null);a.default=e.exports},745:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),t("p",[s._v("Linux 是一个多用户多任务的分时操作系统，用户以用户名和密码（又称为口令）登录后才能使用该系统。")]),s._v(" "),t("ul",[t("li",[s._v("常见的登录方式：\n"),t("ul",[t("li",[s._v("本地终端")]),s._v(" "),t("li",[s._v("远程登录 ：可采用以下协议：\n"),t("ul",[t("li",[s._v("SSH")]),s._v(" "),t("li",[s._v("Telnet")]),s._v(" "),t("li",[s._v("VNC ：虚拟网络控制台（Virtual Network Console），通过 GUI 界面进行远程登录。")])])])])]),s._v(" "),t("li",[s._v("每创建一个终端时，系统都会先执行 login 命令，让用户登录。")]),s._v(" "),t("li",[s._v("当用户登录之后，系统会根据用户身份创建一个 shell 进程，显示终端界面供用户操作。\n"),t("ul",[t("li",[s._v("用户可以在终端中执行任意命令，创建其它子进程，甚至创建嵌套的 shell 进程。")]),s._v(" "),t("li",[s._v("登录时那个 shell 进程称为 login shell ，是用户创建的所有普通进程的父进程。\n"),t("ul",[t("li",[s._v("其它 shell 进程称为 non-login shell 。")])])]),s._v(" "),t("li",[s._v("当用户退出 login shell 时，系统就会注销用户，终止 login shell 的所有子进程。")])])])]),s._v(" "),t("h2",{attrs:{id:"登录与登出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录与登出"}},[s._v("#")]),s._v(" 登录与登出")]),s._v(" "),t("h3",{attrs:{id:"login"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#login"}},[s._v("#")]),s._v(" login")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ login "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以指定用户的身份登录，接着要按提示输入密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"logout"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logout"}},[s._v("#")]),s._v(" logout")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("logout")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 login shell 中使用就会注销用户，在 non-login shell 中使用无效")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"exit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exit"}},[s._v("#")]),s._v(" exit")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出当前 shell ，并指定退出码（如果退出了 login shell ，就相当于 logout）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"查看登录信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看登录信息"}},[s._v("#")]),s._v(" 查看登录信息")]),s._v(" "),t("h3",{attrs:{id:"logname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logname"}},[s._v("#")]),s._v(" logname")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# logname   # 查看自己的登录用户名")]),s._v("\nleo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"whoami"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#whoami"}},[s._v("#")]),s._v(" whoami")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# whoami    # 查看当前的用户名")]),s._v("\nroot\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"tty"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tty"}},[s._v("#")]),s._v(" tty")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tty       # 查看当前的终端名")]),s._v("\n/dev/pts/0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"w"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#w"}},[s._v("#")]),s._v(" w")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# w    # 查看已登录的所有用户的信息")]),s._v("\n09:40:51 up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" days, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":12,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" users,  load average: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.08")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("     TTY      FROM          LOGIN@   IDLE   JCPU   PCPU WHAT\nroot     pts/0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1      09:44    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".00s  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".01s  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".00s w\nroot     pts/2    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.2      Tue09   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":05m  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".20s  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".18s python3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("显示结果中，每行表示一个已登录的用户的信息，每列的含义如下：")]),s._v(" "),t("ul",[t("li",[s._v("USER ：登录的用户名。")]),s._v(" "),t("li",[s._v("TTY ：登录终端（不是登录后打开的其它终端）。")]),s._v(" "),t("li",[s._v("FROM ：登录 IP 。")]),s._v(" "),t("li",[s._v("LOGIN ：登录时刻。")]),s._v(" "),t("li",[s._v("IDLE ：用户多久未操作了。")]),s._v(" "),t("li",[s._v("JCPU ：用户正在运行的所有进程的运行时长。")]),s._v(" "),t("li",[s._v("PCPU ：用户正在运行的前台进程的运行时长。")]),s._v(" "),t("li",[s._v("WHAT ：用户正在执行什么命令。")])]),s._v(" "),t("h3",{attrs:{id:"who"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#who"}},[s._v("#")]),s._v(" who")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("who")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已登录的所有用户的信息")]),s._v("\n      am i  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只查看自己的信息")]),s._v("\n      -b    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统的开机时间")]),s._v("\n      -r    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前的 run level")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"查看登录历史"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看登录历史"}},[s._v("#")]),s._v(" 查看登录历史")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("/var/log/secure")]),s._v(" 文件中记录了用户登录时的认证、授权信息，包括登录成功的、登录失败的。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("/var/log/wtmp")]),s._v(" 文件中记录了所有登录成功的历史，还包括开机时刻。")]),s._v(" "),t("ul",[t("li",[s._v("它是一个二进制文件，只能用 last 命令查看。")]),s._v(" "),t("li",[s._v("当该文件不存在时，系统就不会进行记录。")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("/var/log/btmp")]),s._v(" 文件中记录了所有登录失败的历史记录。")]),s._v(" "),t("ul",[t("li",[s._v("它是一个二进制文件，只能通过 lastb 命令查看。")]),s._v(" "),t("li",[s._v("当该文件不存在时，系统就不会进行记录。")]),s._v(" "),t("li",[s._v("系统会自动定期删除该文件中太旧的记录。")]),s._v(" "),t("li",[s._v("当主机被恶意用户频繁尝试登录时，该文件的体积容易增加到 1G 以上，导致正常登录的耗时增加几秒。此时需要清空该文件，并限制恶意用户尝试登录。")])])])]),s._v(" "),t("h3",{attrs:{id:"last"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#last"}},[s._v("#")]),s._v(" last")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ last      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有登录成功的历史记录、开机 reboot 时刻")]),s._v("\n    -F      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示完整的时刻")]),s._v("\n    -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示几行")]),s._v("\n    -x      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示 shutdown 时刻、run level")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# last")]),s._v("\nroot     pts/0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1    Wed Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 09:44   still logged "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\nroot     pts/0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1    Wed Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 03:00 - 03:00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00:00"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nroot     pts/0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1    Wed Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 02:00 - 02:00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00:00"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nroot     pts/0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1    Wed Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 01:00 - 01:00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00:00"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),s._v("上例中，各列分别表示：\n"),t("ul",[t("li",[s._v("登录的用户名")]),s._v(" "),t("li",[s._v("login shell")]),s._v(" "),t("li",[s._v("登录 IP ：如果为空则表示从本地登录。")]),s._v(" "),t("li",[s._v("登录时刻")]),s._v(" "),t("li",[s._v("注销时刻：取值为 down 则表示直到系统关机，取值为 crash 则表示知道系统崩溃。")]),s._v(" "),t("li",[s._v("登录时长：单位为分钟。")])])]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# last -Fx")]),s._v("\nroot     tty1                          Tue Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":09:36 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("   still logged "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\nrunlevel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to lvl "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.14")]),s._v(".105-19-0016 Tue Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:55 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" - Sat Jan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":18:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("87")]),s._v("+23:12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("   system boot  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.14")]),s._v(".105-19-0016 Tue Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:28 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" - Sat Jan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":18:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("87")]),s._v("+23:13"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" system down  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.14")]),s._v(".105-19-0016 Tue Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":03:15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" - Tue Nov  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:28 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00:02"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("系统正常重启时，在 reboot 之前会有一行 shutdown 记录，否则属于异常重启，比如 crash 。")])])])]),s._v(" "),t("h3",{attrs:{id:"lastb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lastb"}},[s._v("#")]),s._v(" lastb")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ lastb   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有登录失败的历史记录")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);