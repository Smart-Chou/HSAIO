(window.webpackJsonp=window.webpackJsonp||[]).push([[369],{760:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"管理进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#管理进程"}},[s._v("#")]),s._v(" 管理进程")]),s._v(" "),t("h2",{attrs:{id:"查看进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看进程"}},[s._v("#")]),s._v(" 查看进程")]),s._v(" "),t("h3",{attrs:{id:"ps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ps"}},[s._v("#")]),s._v(" ps")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前终端的进程信息，每行一个进程")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示指定 pid 的进程的信息")]),s._v("\n\n    -e      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示系统的所有进程")]),s._v("\n    -f      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# full ，显示详细信息，包括 PPID")]),s._v("\n    -o pid,lstart,etime,cmd   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定显示的列，其中 lstart 为启动时刻，etime 为运行时长")]),s._v("\n    -L      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每行一个线程，增加显示 LWP、NLWP 列")]),s._v("\n    -T      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每行一个线程，增加显示 SPID 列。不能与 -L 选项同时使用")]),s._v("\n\n    a       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有终端启动的进程")]),s._v("\n    f       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 command 显示成树状")]),s._v("\n    r       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示运行中的进程")]),s._v("\n    u       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 面向 user 的格式（与 top 的显示格式类似）")]),s._v("\n    x       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示没有控制终端的进程")]),s._v("\n    Z       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示一列安全上下文")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("安装："),t("code",[s._v("yum install procps")])])]),s._v(" "),t("li",[t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" auxf                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有进程的详细信息，并且将 command 显示成树状")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有进程的详细信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps auxf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ?        S     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":02 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kthreadd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ?        S     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":40  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ksoftirqd/0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ?        S"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kworker/0:0H"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ?        S     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":01  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("migration/0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("每列的含义：")]),s._v(" "),t("ul",[t("li",[s._v("USER ：启动进程的用户名。")]),s._v(" "),t("li",[s._v("PID ：进程的 ID 。")]),s._v(" "),t("li",[s._v("%CPU ：进程的 CPU 使用率。")]),s._v(" "),t("li",[s._v("%MEM ：进程的内存使用率。")]),s._v(" "),t("li",[s._v("VSZ ：Virtual Set Size ，虚拟内存。")]),s._v(" "),t("li",[s._v("RSS ：Resident Set Size ，常驻内存。")]),s._v(" "),t("li",[s._v("TTY ：启动进程的终端。\n"),t("ul",[t("li",[s._v("TTY 为 ? 表示该进程不是从任何终端启动的。")])])]),s._v(" "),t("li",[s._v("STAT ：进程的运行状态。")]),s._v(" "),t("li",[s._v("START ：进程的启动时刻。")]),s._v(" "),t("li",[s._v("TIME ：进程占用的 CPU 时长，精确到秒。\n"),t("ul",[t("li",[s._v("注意它不表示进程的运行时长。")])])]),s._v(" "),t("li",[s._v("COMMAND ：进程的启动命令。\n"),t("ul",[t("li",[s._v("用中括号包住的 COMMAND 表示内核进程。例如 "),t("code",[s._v("kworker/0")]),s._v(" 表示运行在 0 号 CPU 上的 kworker 进程。")])])])]),s._v(" "),t("p",[s._v("一些额外的列：")]),s._v(" "),t("ul",[t("li",[s._v("SPID ：表示 TID 。")]),s._v(" "),t("li",[s._v("LWP ：表示 TID 。")]),s._v(" "),t("li",[s._v("NLWP ：表示该进程中的线程数。")])])])]),s._v(" "),t("h3",{attrs:{id:"pstree"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pstree"}},[s._v("#")]),s._v(" pstree")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pstree            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示进程树（默认将名字相同的进程折叠起来，只计数）")]),s._v("\n        -a          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示每个 command 的命令行参数")]),s._v("\n        -p          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示 pid（这会展开显示每个进程）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定进程的子进程（默认 pid 为 1）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定用户的进程")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("安装："),t("code",[s._v("yum install psmisc")])])]),s._v(" "),t("h3",{attrs:{id:"pidof"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pidof"}},[s._v("#")]),s._v(" pidof")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ pidof "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("进程名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示与该名字相同的所有进程的 PID")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"后台进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后台进程"}},[s._v("#")]),s._v(" 后台进程")]),s._v(" "),t("ul",[t("li",[s._v("执行命令时，\n"),t("ul",[t("li",[s._v("在命令末尾加上 "),t("code",[s._v("&")]),s._v(" ，会将该命令移到后台执行，作为后台任务（job）。")]),s._v(" "),t("li",[s._v("按 "),t("code",[s._v("Ctrl + Z")]),s._v(" ，会向当前进程发送 SIGSTOP 信号，让它暂停执行，并移到后台任务列表中。")])])]),s._v(" "),t("li",[s._v("每个后台任务是一个进程组，有一个任务编号 n 。\n"),t("ul",[t("li",[s._v("后台任务不会读取当前终端的 stdin ，但会输出到 stdout 。")]),s._v(" "),t("li",[s._v("不同终端的后台任务列表相互独立。")]),s._v(" "),t("li",[s._v("如果当前终端退出，则后台任务会因为 Process Session 终止而被杀死。")])])])]),s._v(" "),t("h3",{attrs:{id:"jobs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jobs"}},[s._v("#")]),s._v(" jobs")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jobs")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有后台任务")]),s._v("\n      -l        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加显示 PID")]),s._v("\n      -p        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示 PID")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" baidu.com "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8646")]),s._v("\nnohup: ignoring input and appending output to ‘nohup.out’\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jobs")]),s._v(" -l\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8646")]),s._v(" Running                 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" baidu.com "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"bg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bg"}},[s._v("#")]),s._v(" bg")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bg")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动一个已暂停的后台任务")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"fg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fg"}},[s._v("#")]),s._v(" fg")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fg")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将一个后台任务移到前台运行")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"wait"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wait"}},[s._v("#")]),s._v(" wait")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阻塞当前终端，直到指定子进程终止")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("如果指定了 n ，则必须存在 PID 等于 n 的进程，而且它是当前终端的子进程。")]),s._v(" "),t("li",[s._v("如果不指定 n ，则会等待当前终端的所有子进程运行结束。")]),s._v(" "),t("li",[s._v("如果指定了 %n 的格式，则表示某个编号的后台任务，等待其中的进程全部终止。")]),s._v(" "),t("li",[s._v("例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n-bash: wait: pid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" is not a child of this shell\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" %2\n-bash: wait: %2: no such job\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"终止进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#终止进程"}},[s._v("#")]),s._v(" 终止进程")]),s._v(" "),t("h3",{attrs:{id:"kill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kill"}},[s._v("#")]),s._v(" kill")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止进程（默认是向进程发送 SIGTERM 信号）")]),s._v("\n       -kill "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向进程发送 SIGKILL 信号（这会强制终止进程）")]),s._v("\n       -9    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向进程发送编号为 9 的信号")]),s._v("\n       -l             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有可用的信号")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"pkill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pkill"}},[s._v("#")]),s._v(" pkill")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pkill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止所有进程名与 pattern 匹配的进程")]),s._v("\n        -e            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo what is killed")]),s._v("\n        -9            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向进程发送信号 9")]),s._v("\n        -t -9 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止指定终端的所有进程")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"保持进程运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保持进程运行"}},[s._v("#")]),s._v(" 保持进程运行")]),s._v(" "),t("h3",{attrs:{id:"nohup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nohup"}},[s._v("#")]),s._v(" nohup")]),s._v(" "),t("p",[s._v("：用于以不挂断（no hang up）的方式执行一条命令。")]),s._v(" "),t("ul",[t("li",[s._v("运行的命令会忽略 SIGHUP 信号，还会忽略 stdin 。\n"),t("ul",[t("li",[s._v("默认将 stdout、stderr 保存到 ./nohup.out 文件中。")])])]),s._v(" "),t("li",[s._v("用法："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将进程移到后台运行，以免阻塞前台。此时默认将输出重定向到 nohup.out 文件，相当于执行 nohup <command> &>> nohup.out &")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[s._v("下例是一个重启进程的脚本："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该 restart.sh 脚本用于根据启动命令杀死进程，再用 nohup 重启。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用之前，需要将 CMD 变量设置为进程的启动命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用时，只需执行 sh restart.sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WORK_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" $0"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WORK_DIR")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CMD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ping localhost"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果有相同进程正在运行，则全部杀死")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" auxf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CMD")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The process is running, sending SIGTERM to PID: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果进程依然存在，则强制杀死")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" $PID "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>1 {print $1}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The process is still running, sending SIGKILL to PID: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v('"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H%M%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(".log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Started process: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CMD")]),s._v('"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),s._v("也可改为根据 PID 终止进程："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PID_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WORK_DIR")]),s._v("/pid\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID_FILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $PID_FILE"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H%M%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(".log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID_FILE")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"screen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#screen"}},[s._v("#")]),s._v(" screen")]),s._v(" "),t("p",[s._v("：可以创建多个连接到当前终端的 Session 。即使用户退出了终端，该终端也依然有 Session 存在，不会被系统终止。")]),s._v(" "),t("details",[t("summary",[s._v("已淘汰不用")]),s._v(" "),t("ul",[t("li",[s._v("安装："),t("code",[s._v("yum install screen")])]),s._v(" "),t("li",[s._v("被 screen 连接的会话记作 attached 状态，没被连接的则记作 detached 状态。")]),s._v(" "),t("li",[s._v("命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新会话，并进入其 shell")]),s._v("\n        -ls        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有会话")]),s._v("\n        -dm        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个脱离的新会话")]),s._v("\n        -r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接到一个脱离的会话")]),s._v("\n        -s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("shell"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定使用的 shell")]),s._v("\n        -S "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定会话的名字（这会命名为<pid>.<name>，默认的命名为<pid>.<tty>.<host>）")]),s._v("\n        -L         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动将该会话的终端日志记录到/home/screenlog.0 文件中（数字会递增）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])])]),s._v(" "),t("h3",{attrs:{id:"tmux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tmux"}},[s._v("#")]),s._v(" tmux")]),s._v(" "),t("p",[s._v("：一个与 screen 类似的工具，但功能更强。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("安装："),t("code",[s._v("yum install tmux")])])]),s._v(" "),t("li",[t("p",[s._v("只需创建一个连接到当前终端的 Session ，然后在该 Session 中创建多个窗口，每个窗口是一个伪终端。")]),s._v(" "),t("ul",[t("li",[s._v("每个窗口还可以拆分成多个面板。")]),s._v(" "),t("li",[s._v("不同用户的 tmux 窗口互不可见。")])])]),s._v(" "),t("li",[t("p",[s._v("命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ tmux                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新窗口，并进入")]),s._v("\n      new                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新窗口，并进入")]),s._v("\n        -s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置窗口的名字（不指定的话就使用数字编号）")]),s._v("\n        -d                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在后台创建")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有窗口")]),s._v("\n      a                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入（attach）上一个窗口")]),s._v("\n      a -t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入指定的窗口")]),s._v("\n      kill-session -t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止指定的窗口")]),s._v("\n      send -t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"command"')]),s._v(" ENTER                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向一个窗口输入一条命令，再输入 ENTER")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("进入 tmux 界面之后，")]),s._v(" "),t("ul",[t("li",[s._v("不能在里面创建窗口。")]),s._v(" "),t("li",[s._v("tmux 界面的下方会显示一个绿色的任务栏，包含一排窗口名，其中有星号 * 后缀的是当前窗口。")]),s._v(" "),t("li",[s._v("例如，下方的信息表示：目前在名为“4”的会话中，有编号 1~4 四个窗口，都名为 bash 。目前正在使用窗口“3:bash”，上一个窗口是窗口“2:bash”。"),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":bash  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":bash  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":bash- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":bash*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("按 Ctrl+D 会退出当前的窗口或面板。")]),s._v(" "),t("li",[s._v("按 Ctrl+B 会激活控制台，然后便可以输入以下命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("d      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 tmux 挂到后台（显示 detached）")]),s._v("\ns      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开会话列表，从而切换到某个会话")]),s._v("\n$      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重命名当前会话")]),s._v("\n\nw      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开窗口列表，从而切换到某个窗口")]),s._v("\nn      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选择下一个窗口")]),s._v("\np      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选择上一个窗口")]),s._v("\nc      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新窗口")]),s._v("\n,      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重命名当前窗口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改当前窗口的编号（这会重新排序）")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入阅读模式，可以滚屏、翻页")]),s._v('\n"      '),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前面板拆分成上下两块")]),s._v("\n%      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前面板拆分成左右两块")]),s._v("\n方向键  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换面板")]),s._v("\n空格键  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换面板布局")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前面板置于新窗口中")]),s._v("\n\n?      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示快捷键")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[s._v("例：启动 tmux 之后的进程树")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3907")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24248")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3696")]),s._v(" ?        Ss   Nov08   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":36 tmux\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3908")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("116484")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3040")]),s._v(" pts/1    Ss   Nov08   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ -bash\nroot     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24224")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("282340")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43536")]),s._v(" pts/1    S+   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":37   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nroot     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31780")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("116096")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2604")]),s._v(" pts/4    Ss+  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":25   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ -bash\nroot     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31854")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("116096")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2604")]),s._v(" pts/5    Ss+  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":26   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ -bash\nroot      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3057")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112860")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1272")]),s._v(" ?        Ss   Sep10   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 /usr/sbin/sshd -D\nroot     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32653")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("156740")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5444")]),s._v(" ?        Ss   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":44   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ sshd: root@pts/3\nroot     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("116100")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2632")]),s._v(" pts/3    Ss   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":44   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ -bash\nroot     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32695")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("155496")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1928")]),s._v(" pts/3    R+   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":44   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" auxf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("可见 tmux 创建了三个伪终端，运行在独立的 Session 中。")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);