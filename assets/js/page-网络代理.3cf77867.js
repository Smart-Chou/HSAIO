(window.webpackJsonp=window.webpackJsonp||[]).push([[381],{753:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"网络代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络代理"}},[s._v("#")]),s._v(" 网络代理")]),s._v(" "),t("h2",{attrs:{id:"代理服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代理服务器"}},[s._v("#")]),s._v(" 代理服务器")]),s._v(" "),t("p",[s._v("：Proxy Server ，用于代替一个主机与其它主机进行通信。")]),s._v(" "),t("ul",[t("li",[s._v("工作在会话层，代理应用层的消息。")]),s._v(" "),t("li",[s._v("按协议分类：\n"),t("ul",[t("li",[s._v("SSH 代理")]),s._v(" "),t("li",[s._v("FTP 代理")]),s._v(" "),t("li",[s._v("HTTP 代理")]),s._v(" "),t("li",[s._v("HTTPS 代理")]),s._v(" "),t("li",[s._v("SOCKS 代理：全称为 SOCKetS ，工作在应用层与传输层之间，比 HTTP 代理更底层、更快。\n"),t("ul",[t("li",[s._v("SOCKS4 只支持 TCP 连接，而 SOCKS5 还支持 UDP 连接、密码认证。")]),s._v(" "),t("li",[s._v("FTP、HTTP、SOCKS 代理都是明文通信，而 SSH、HTTPS、shadowsocks 代理是加密通信。")])])])])]),s._v(" "),t("li",[s._v("按代理反向分类：\n"),t("ul",[t("li",[s._v("正向代理 ：侧重于代替客户端，向服务器发出访问请求。")]),s._v(" "),t("li",[s._v("反向代理 ：侧重于代替服务器，接收客户端的访问请求。")])])]),s._v(" "),t("li",[s._v("用途：\n"),t("ul",[t("li",[s._v("可以隔离服务器与客户端的联系，隐藏双方的信息。")]),s._v(" "),t("li",[s._v("可以使客户端访问到某些代理服务器才能访问的网络。")]),s._v(" "),t("li",[s._v("可以担任防火墙，过滤客户端发送、接收的数据。")]),s._v(" "),t("li",[s._v("可以动态更改将客户端的流量转发到哪个服务器，比如实现负载均衡。")])])]),s._v(" "),t("li",[s._v("缺点：\n"),t("ul",[t("li",[s._v("客户端的通信数据都要经过代理服务器，可能被监听、篡改。")])])])]),s._v(" "),t("h3",{attrs:{id:"squid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#squid"}},[s._v("#")]),s._v(" Squid")]),s._v(" "),t("p",[s._v("：一个代理服务器，采用 C++ 开发。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://www.squid-cache.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("支持 FTP、HTTP、HTTPS 代理协议。")]),s._v(" "),t("li",[s._v("常用作简单的 HTTP 正向代理服务器。")]),s._v(" "),t("li",[s._v("也可用于反向代理，缓存 HTTP 服务器的响应报文，但比 Nginx 的功能少。")])]),s._v(" "),t("h4",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),t("ul",[t("li",[s._v("用 yum 安装："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" squid\nsystemctl start squid\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" squid\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[s._v("或者用 docker-compose 部署："),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("squid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" squid\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" sameersbn/squid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("3.5.27"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" unless"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("stopped\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 3128"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3128")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/etc/squid/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("p",[s._v("用 yum 安装 Squid 时，开启正向代理的步骤：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("编辑配置文件 "),t("code",[s._v("/etc/squid/squid.conf")]),s._v(" ：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("http_port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3128")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个 acl 组，名为 local_ip ，指向源 IP 为 10.0.0.1/24 的流量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# acl local_ip src 10.0.0.1/24")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个 acl 组，用密码文件进行身份认证")]),s._v("\nauth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd\nacl auth_user proxy_auth REQUIRED\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许指定 acl 组的流量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http_access allow local_ip")]),s._v("\nhttp_access allow auth_user\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止剩下的所有流量")]),s._v("\nhttp_access deny all\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不缓存所有响应报文")]),s._v("\ncache deny all\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认会在 HTTP 请求 Headers 中加入 X-Forwarded-For ，声明客户端的真实 IP 。这里删除该 Header")]),s._v("\nforwarded_for delete\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录访问日志")]),s._v("\naccess_log /var/log/squid/access.log squid\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每隔 30 天翻转一次日志")]),s._v("\nlogfile_rotate "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("生成密码文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" httpd-tools\nhtpasswd -cb /etc/squid/passwd leo ******\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("测试使用该代理：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl restart squid\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -x http://leo:******@127.0.0.1:3128 cip.cc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"socks5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#socks5"}},[s._v("#")]),s._v(" SOCKS5")]),s._v(" "),t("ul",[t("li",[s._v("用 docker-compose 部署一个 SOCKS5 服务器："),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("socks5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" socks5\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" serjs/go"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("socks5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("proxy\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" unless"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("stopped\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("PROXY_USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" root\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("PROXY_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("******")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 1080"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[s._v("该镜像采用 Golang 开发，详见"),t("a",{attrs:{href:"https://github.com/serjs/socks5-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1),s._v("。")])])])]),s._v(" "),t("h3",{attrs:{id:"shadowsocks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shadowsocks"}},[s._v("#")]),s._v(" Shadowsocks")]),s._v(" "),t("p",[s._v("：一种基于 SOCKS5 协议的代理协议，简称为 ss ，常用于实现 VPN 。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/shadowsocks/shadowsocks/wiki",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("支持设置密码、加密传输数据。")]),s._v(" "),t("li",[s._v("原理：\n"),t("ol",[t("li",[s._v("在一台主机上运行 ss 服务器。")]),s._v(" "),t("li",[s._v("在本机运行 ss 客户端，将本机的流量发送到 ss 服务器，被它代理转发。")])])]),s._v(" "),t("li",[s._v("ShadowsocksR ：简称为 SSR ，是 shadowsocks 的分叉项目。")])]),s._v(" "),t("h4",{attrs:{id:"shadowsocks-libev"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shadowsocks-libev"}},[s._v("#")]),s._v(" Shadowsocks-libev")]),s._v(" "),t("p",[s._v("：一个 ss 代理服务器，采用 C 语言开发。")]),s._v(" "),t("ul",[t("li",[s._v("支持 AEAD Cipher 加密算法。")]),s._v(" "),t("li",[s._v("支持 Obfs 混淆，可以将 ss 流量伪装成 http 流量。")]),s._v(" "),t("li",[s._v("以 Docker 方式运行："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d --name shadowsocks --network "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" shadowsocks/shadowsocks-libev ss-server -s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v(" -k ****** -m aes-256-gcm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("服务器的命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ss-server               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务器")]),s._v("\n        -c config.json  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用指定的配置文件")]),s._v("\n        -s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置服务器监听的 IP")]),s._v("\n        -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置服务器监听的端口")]),s._v("\n        -k ******       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置服务器的认证密码")]),s._v("\n        -m aes-256-gcm  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置服务器的加密方式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端"}},[s._v("#")]),s._v(" 客户端")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/shadowsocks/shadowsocks-windows/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("Windows 版 ss 客户端"),t("OutboundLink")],1),s._v(" ：")]),s._v(" "),t("ul",[t("li",[s._v("运行 ss 客户端之后，它会连接到 ss 服务器，同时在本机监听一个代理端口。")]),s._v(" "),t("li",[s._v("本机的进程可以通过 HTTP、Socket 代理协议，将数据发送到该代理端口，然后 ss 客户端会将这些数据转发到 ss 服务器，实现正向代理。")]),s._v(" "),t("li",[s._v("也可以开启 ss 客户端的全局模式，代理本机的所有流量。")])]),s._v(" "),t("p",[s._v("Linux 版 ss 客户端 ：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("它是一个命令行工具，功能较少，不能连接多个 ss 服务器，在本机提供的代理端口只支持 Socket 协议。")])]),s._v(" "),t("li",[t("p",[s._v("部署示例：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" shadowsocks\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑配置文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ss.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\n{\n    "server": "10.0.0.1",\n    "server_port": 3000,\n    "local_address": "127.0.0.1",\n    "local_port": 3000,\n    "password": "******",\n    "timeout": 5,\n    "method": "aes-256-cfb"\n}\nEOF')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动客户端")]),s._v("\nsslocal -c ss.json -d start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("一个 sslocal 客户端只能连接一个 ss 服务器。")])]),s._v(" "),t("li",[t("p",[s._v("可以再运行代理服务器 privoxy ，监听一个 HTTP 代理端口，将该端口的流量转发到 Socket 代理端口。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y privoxy\nsystemctl start privoxy\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" privoxy\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑配置文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/listen-address  127.0.0.1:8118/d'")]),s._v(" /etc/privoxy/config -i\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/privoxy/config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\nlisten-address  0.0.0.0:8118\n\n# 将 HTTP 请求转发到该代理\nforward-socks5  /   127.0.0.1:3000 .\n# 第一个字段为 url_pattern ，取值为 / 则匹配所有 HTTP 请求\n# 第二、三个字段为代理、父级代理，取值为 . 则表示忽略\n\n# 不代理这些 HTTP 请求\nforward         10.*.*.*/      .\nforward         127.*.*.*/     .\nforward         172.16.*.*/    .\nforward         192.168.*.*/   .\nEOF")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\nsystemctl restart privoxy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("试用该代理：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8118 google.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"v2ray"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#v2ray"}},[s._v("#")]),s._v(" V2Ray")]),s._v(" "),t("p",[s._v("：继 ss 之后的一种新的代理服务器。")]),s._v(" "),t("ul",[t("li",[s._v("采用自身原创的 VMess 代理协议，也兼容 HTTP、Shadowsocks 等协议。")])]),s._v(" "),t("h2",{attrs:{id:"代理客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代理客户端"}},[s._v("#")]),s._v(" 代理客户端")]),s._v(" "),t("ul",[t("li",[s._v("有的程序不支持使用代理，有的程序只支持使用 HTTP 等简单的代理协议。因此建议安装一个专用的代理客户端，通过两种方式代理其它程序的流量：\n"),t("ul",[t("li",[s._v("透明代理（Transparent proxy）：\n"),t("ul",[t("li",[s._v("拦截其它程序发出的流量，转发到代理服务器。其它程序不会感知到代理，不需要主动使用代理。")])])]),s._v(" "),t("li",[s._v("转换代理协议：\n"),t("ul",[t("li",[s._v("通过某种代理协议连接到代理服务器，再在本机监听一个采用 HTTP 等简单代理协议的端口，将该端口收到的流量转发到代理服务器。")]),s._v(" "),t("li",[s._v("此时，具有代理功能的程序，一般都能通过该端口使用代理。但没有代理功能的程序，依然不能使用代理。")])])])])])]),s._v(" "),t("h3",{attrs:{id:"proxifier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proxifier"}},[s._v("#")]),s._v(" Proxifier")]),s._v(" "),t("p",[s._v("：一个 GUI 工具，用作代理客户端，收费。")]),s._v(" "),t("ul",[t("li",[s._v("特点：\n"),t("ul",[t("li",[s._v("支持 Windows、MacOS 系统，不支持 Linux 。")]),s._v(" "),t("li",[s._v("支持 HTTP、HTTPS、SOCKS4、SOCKS5 代理协议。")]),s._v(" "),t("li",[s._v("支持透明代理。\n"),t("ul",[t("li",[s._v("原理：\n"),t("ul",[t("li",[s._v("Windows 系统上，一般程序需要调用 Winsock API 进行 Socket 通信。")]),s._v(" "),t("li",[s._v("Winsock 提供了 LSP（Layered Service Provider） 功能：允许程序自定义一个 LSP DLL 库，在一般程序调用 Winsock API 时被加载，从而可以劫持其流量。")])])])])]),s._v(" "),t("li",[s._v("支持灵活的代理规则：将某个程序发向某 IP:Port 的 TCP 包，转发到某个代理服务器。支持通配符。")]),s._v(" "),t("li",[s._v("支持用多个代理服务器组成代理链。")])])]),s._v(" "),t("li",[s._v("用法：\n"),t("ol",[t("li",[s._v("安装 Proxifier 并启动。")]),s._v(" "),t("li",[s._v("添加代理服务器。")]),s._v(" "),t("li",[s._v("添加代理规则。")]),s._v(" "),t("li",[s._v("保持 Proxifier 运行，即可代理本机程序的流量。")])])])]),s._v(" "),t("h3",{attrs:{id:"proxychains"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proxychains"}},[s._v("#")]),s._v(" ProxyChains")]),s._v(" "),t("p",[s._v("：一个 Unix 系统的命令行工具，采用 C 语言开发，用作代理客户端。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/rofl0r/proxychains-ng",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("支持透明代理。\n"),t("ul",[t("li",[s._v("原理：\n"),t("ol",[t("li",[s._v("声明环境变量 LD_PRELOAD ，让程序在导入 DLL 库时，优先导入 libproxychains4.so 库。")]),s._v(" "),t("li",[s._v("在 libproxychains4.so 库中，重写关于 Socket 通信的函数，将程序发出的 TCP 流量转发到代理服务器。")])])]),s._v(" "),t("li",[s._v("缺点：\n"),t("ul",[t("li",[s._v("只能代理 TCP 流量，不支持 UDP、ICMP 。")]),s._v(" "),t("li",[s._v("只能代理指定的程序，不能代理系统所有进程。")]),s._v(" "),t("li",[s._v("只能代理采用动态链接库的程序。\n"),t("ul",[t("li",[s._v("Chrome 浏览器在沙盒中运行网页，也不会被代理。")])])])])])])])]),s._v(" "),t("p",[s._v("用法：")]),s._v(" "),t("ol",[t("li",[s._v("安装："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/rofl0r/proxychains-ng/archive/refs/tags/v4.14.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf proxychains-ng-4.14.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" proxychains-ng-4.14\n./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr --sysconfdir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[s._v("编辑配置文件 /etc/proxychains.conf ，示例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("quiet_mode          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安静模式，运行时不输出过程信息")]),s._v("\ndynamic_chain       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动选用 ProxyList 中可用的代理，且按顺序")]),s._v("\nproxy_dns           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 DNS 请求也代理")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消代理发向指定 IP 的数据包")]),s._v("\nlocalnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.0/255.0.0.0\nlocalnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.0/255.0.0.0\nlocalnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".0.0/255.240.0.0\nlocalnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.0/255.255.0.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送数据包时，修改目标 IP:Port")]),s._v("\ndnat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1:80  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.2:443\ndnat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1:443 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.2\ndnat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 声明一组代理服务器，支持 HTTP、SOCKS4、SOCKS5 代理协议，支持设置账号密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ProxyList"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nhttp    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3128")]),s._v("\nsocks5  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v("  root  ******\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])]),s._v(" "),t("li",[s._v("执行命令："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("proxychains4 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" cip.cc  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在代理下执行一条命令")]),s._v("\nproxychains4 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个 shell ，在其中执行的命令都采用代理")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"redsocks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redsocks"}},[s._v("#")]),s._v(" redsocks")]),s._v(" "),t("p",[s._v("：一个 Linux 系统的命令行工具，采用 C 语言开发，用作代理客户端。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/darkk/redsocks",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("支持透明代理。\n"),t("ul",[t("li",[s._v("原理：\n"),t("ol",[t("li",[s._v("redsocks 连接到代理服务器，并在本机监听一个端口，将该端口收到的流量转发到代理服务器。")]),s._v(" "),t("li",[s._v("用户手动配置 iptables 防火墙规则，将本机发出的 TCP 流量重定向到 redsocks 端口。")])])]),s._v(" "),t("li",[s._v("缺点：\n"),t("ul",[t("li",[s._v("需要手动配置 iptables 规则，比较麻烦。")]),s._v(" "),t("li",[s._v("有些程序可能无视 iptables 规则。")])])])])])]),s._v(" "),t("p",[s._v("用法：")]),s._v(" "),t("ol",[t("li",[s._v("用 apt 安装："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redsocks\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),s._v("或者手动编译后安装："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/darkk/redsocks\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redsocks\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" redsocks /usr/bin/redsocks\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[s._v("编辑配置文件 /etc/redsocks.conf ，示例："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("base "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    log_debug  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    log_info   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    log        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stderr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 日志的保存位置，可改为 "file:/var/log/redsocks.log" 文件')]),s._v("\n    daemon     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    redirector "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" iptables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nredsocks "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    // 在本机监听的端口\n    local_ip   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    local_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    // 要连接的代理服务器\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    port     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" socks5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    login    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("ul",[t("li",[s._v("可以定义多个 redsocks{} 代理配置。")])])]),s._v(" "),t("li",[s._v("用 systemctl 保持运行："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl restart redsocks\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("  redsocks\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),s._v("或者手动启动："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("redsocks -c /etc/redsocks.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("添加 iptables 规则："),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("iptables -t nat -A OUTPUT -p tcp -d "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0/24 -j REDIRECT --to-ports "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 nat 表，将本机发出的某些流量重定向 REDSOCKS 端口")]),s._v("\niptables -t nat -L OUTPUT   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 iptables 规则")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),s._v("系统重启时会重置 iptables 规则。因此建议将配置 iptables 的命令保存为一个 shell 脚本，每次系统重启时执行它。")])]),s._v(" "),t("h3",{attrs:{id:"clash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clash"}},[s._v("#")]),s._v(" Clash")]),s._v(" "),t("p",[s._v("：一个通用的代理客户端，采用 Golang 开发。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/Dreamacro/clash",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("支持 HTTP、SOCKS、Shadowsocks、Vmess 等多种代理协议。")]),s._v(" "),t("li",[s._v("支持 Linux、MacOS、Windows、Android 系统。")]),s._v(" "),t("li",[s._v("在 Linux 系统上支持透明代理。\n"),t("ul",[t("li",[s._v("原理与 redsocks 类似，需要手动配置 iptables 规则。")])])])]),s._v(" "),t("h2",{attrs:{id:"反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向代理"}},[s._v("#")]),s._v(" 反向代理")]),s._v(" "),t("p",[s._v("实现反向代理的常见工具：")]),s._v(" "),t("ul",[t("li",[s._v("LVS（Linux Virtual Server）\n"),t("ul",[t("li",[s._v("：Linux 的一个内核模块，可以通过转发 TCP/UDP 报文，实现第四层的反向代理。")]),s._v(" "),t("li",[s._v("LVS 的代理性能最好，但是使用时最麻烦。")])])]),s._v(" "),t("li",[s._v("F5\n"),t("ul",[t("li",[s._v("：一个通过硬件实现负载均衡的服务器，基于 BIG-IP 协议。")])])]),s._v(" "),t("li",[s._v("HAProxy\n"),t("ul",[t("li",[s._v("：一个反向代理服务器，可以实现第四层的 TCP 代理、第七层的 HTTP 代理。")])])]),s._v(" "),t("li",[s._v("Nginx\n"),t("ul",[t("li",[s._v("：一个反向代理服务器，可以实现第四层的 TCP 代理、第七层的 HTTP 代理。")])])])]),s._v(" "),t("h3",{attrs:{id:"frp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frp"}},[s._v("#")]),s._v(" frp")]),s._v(" "),t("p",[s._v("：一个命令行工具，提供了反向代理、内网穿透的功能。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("采用 Golang 开发。")]),s._v(" "),t("li",[s._v("支持 TCP、UDP、HTTP、HTTPS 等多种代理协议。")]),s._v(" "),t("li",[s._v("采用 C/S 架构工作。\n"),t("ul",[t("li",[s._v("frps ：服务器，部署在任一主机上，不需访问外部，只需被 frpc、用户访问。\n"),t("ul",[t("li",[s._v("frps 所在主机通常拥有一个固定的外网 IP ，供外网用户访问。")]),s._v(" "),t("li",[s._v("用户向 frps 发送网络包时，会先被 frps 转发到 frpc ，再被 frpc 转发到内网服务。")])])]),s._v(" "),t("li",[s._v("frpc ：客户端，部署在任一主机上，不需被外部访问，只需访问到 frps、内网服务。")])])])]),s._v(" "),t("p",[s._v("例：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("登录一台主机，下载 frp 的发行版，编辑配置文件 frps.ini ：")]),s._v(" "),t("div",{staticClass:"language-ini line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000        # 让 frps 监听一个端口，供 frpc 访问，用于它们内部通信")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("token")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("xxxxxx          # 用于 frpc 与 frps 之间的认证")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("启动服务器：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./frps -c frps.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者用 docker-compose 部署：")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("frps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" frps\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" snowdreamtech/frps"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("0.37.0\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" unless"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("stopped\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 7000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./frps.ini"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/etc/frp/frps.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("登录另一个主机，编辑配置文件 frpc.ini ：")]),s._v(" "),t("div",{staticClass:"language-ini line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_addr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("1.1.1.1   # frps 的地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("token")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("xxxxxx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个反向代理，名称自定义")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("proxy1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp                  # 代理的类型")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10.0.0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("80-90,443")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("80-90,443     # 让 frps 监听 remote_port 端口，供用户访问，并将该端口收到的网络包转发到 local_ip:local_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bandwidth_limit = 1MB     # 限制带宽，默认无限制")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# use_compression = false   # frpc 与 frps 之间通信时，是否压缩")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# use_encryption = false    # frpc 与 frps 之间通信时，是否加密")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以定义多个反向代理")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("proxy2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n...\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("启动客户端：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./frpc -c frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者用 docker-compose 部署：")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("frpc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" frpc\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" snowdreamtech/frpc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("0.37.0\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" unless"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("stopped\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./frpc.ini"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/etc/frp/frpc.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("让用户访问 frps 的反向代理端口：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1:10080\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"vpn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vpn"}},[s._v("#")]),s._v(" VPN")]),s._v(" "),t("p",[s._v("：虚拟私有网络（Virtual Private Network），指由公网上的几台主机组成一个虚拟的私有网络。")]),s._v(" "),t("ul",[t("li",[s._v("常用于实现正向代理，比如通过公网连接到某个私网的网关，建立一条专用信道，从而访问该私网。")])]),s._v(" "),t("h2",{attrs:{id:"运营商线路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运营商线路"}},[s._v("#")]),s._v(" 运营商线路")]),s._v(" "),t("p",[s._v("国内互联网接入全球互联网的主要网络线路：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("电信运营商：")]),s._v(" "),t("ul",[t("li",[s._v("163 ：骨干网，路由节点的 IP 以 202.97 开头。\n"),t("ul",[t("li",[s._v("省级、出国、国际都走 163 线路，从不走 CN2 线路。")]),s._v(" "),t("li",[s._v("供普通用户使用，QOS 很低，高峰期时每个人分到的境外带宽低于 10 Kbps ，丢包率超过 50% 。")])])]),s._v(" "),t("li",[s._v("CN2 ：中国电信下一代骨干网（Chinatelecom Next Carrier Network ，CNCN），路由节点的 IP 以 59.43 开头，提供高 QOS 服务。\n"),t("ul",[t("li",[s._v("CN2 GT ：较差的 CN2 服务，省级、出国为 163 线路，国际为 CN2 线路。")]),s._v(" "),t("li",[s._v("CN2 GIA ：最好的 CN2 服务，省级、出国、国际都走 CN2 线路，从不走 163 线路。")]),s._v(" "),t("li",[s._v("双向 CN2 线路：出国、回国流量都走 CN2 线路。")]),s._v(" "),t("li",[s._v("单相 CN2 线路：一般是出国流量走 CN2 线路，回国流量走 163 线路，高峰期依然拥挤。")])])])])]),s._v(" "),t("li",[t("p",[s._v("联通运营商：")]),s._v(" "),t("ul",[t("li",[s._v("169 ：骨干网")])])]),s._v(" "),t("li",[t("p",[s._v("移动运营商：")]),s._v(" "),t("ul",[t("li",[s._v("CMNET ：骨干网")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);