(window.webpackJsonp=window.webpackJsonp||[]).push([[389],{759:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备"}},[s._v("#")]),s._v(" 设备")]),s._v(" "),a("h2",{attrs:{id:"dev"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dev"}},[s._v("#")]),s._v(" /dev")]),s._v(" "),a("p",[s._v("Linux 中，所有设备都以文件的形式映射到 /dev 目录下。例如：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/dev/hd[a-d]")]),s._v(" ：IDE 接口的设备（主要是硬盘）。\n"),a("ul",[a("li",[s._v("IDE 接口是一种传统的并行接口，传输速度较慢，已被淘汰。")]),s._v(" "),a("li",[s._v("例如 /dev/hda 表示硬盘 a 。编号 a 说明它是系统启动后识别到的第一个这种类型的设备。")])])]),s._v(" "),a("li",[a("code",[s._v("/dev/sd[a-p]")]),s._v(" ：SATA 接口的设备（主要是硬盘）、SCSI 接口的设备（主要是硬盘）、USB 接口的设备。")]),s._v(" "),a("li",[a("code",[s._v("/dev/vd[a-]")]),s._v(" ：虚拟磁盘。")]),s._v(" "),a("li",[a("code",[s._v("/dev/fd[0-1]")]),s._v(" ：软盘。")]),s._v(" "),a("li",[a("code",[s._v("/dev/cdrom")]),s._v(" ：光驱。")]),s._v(" "),a("li",[a("code",[s._v("/dev/mouse")]),s._v(" ：鼠标。")]),s._v(" "),a("li",[a("code",[s._v("/dev/lp[0-15]")]),s._v(" ：打印机。")])]),s._v(" "),a("h2",{attrs:{id:"块、字符设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#块、字符设备"}},[s._v("#")]),s._v(" 块、字符设备")]),s._v(" "),a("p",[s._v("将设备文件按读写单位分类：")]),s._v(" "),a("ul",[a("li",[s._v("块设备（block deivce）\n"),a("ul",[a("li",[s._v("：读写时以块为单位，有缓冲。比如磁盘。")]),s._v(" "),a("li",[s._v("块设备一般被格式化成某种文件系统，供用户读写。")])])]),s._v(" "),a("li",[s._v("字符设备（character device）\n"),a("ul",[a("li",[s._v("：读写时以字符为单位，无缓冲，因此读写延迟低。比如键盘。")]),s._v(" "),a("li",[s._v("用户不能通过文件系统读写字符设备，而要通过某些程序直接通信。")]),s._v(" "),a("li",[s._v("没有格式化的设备称为裸设备，不能通过文件系统访问，只能当作字符设备直接访问。")])])])]),s._v(" "),a("h2",{attrs:{id:"终端设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#终端设备"}},[s._v("#")]),s._v(" 终端设备")]),s._v(" "),a("ul",[a("li",[s._v("Linux 中，与终端交互时，都是通过读写 /dev 目录下的串口设备文件。\n"),a("ul",[a("li",[s._v("它们可能是真实存在的硬件设备，也可能是虚拟设备。")])])])]),s._v(" "),a("p",[s._v("主要分类：")]),s._v(" "),a("ul",[a("li",[s._v("控制台设备（console device）\n"),a("ul",[a("li",[s._v("：文件名为 "),a("code",[s._v("/dev/console")]),s._v(" ，用于接收系统内核的一些输出信息，只有 root 用户能读写。")])])]),s._v(" "),a("li",[s._v("虚拟控制台（virtual console）\n"),a("ul",[a("li",[s._v("：文件名的正则表达式为 "),a("code",[s._v("/dev/tty\\d*")]),s._v(" 。")]),s._v(" "),a("li",[a("code",[s._v("/dev/tty")]),s._v(" 指向当前 shell 使用的终端，比如 /dev/tty1、/dev/pts/0 。")]),s._v(" "),a("li",[a("code",[s._v("/dev/tty0")]),s._v(" 指向当前 shell 使用的虚拟控制台，只有 root 用户能读写。")])])]),s._v(" "),a("li",[s._v("伪终端（pseudo terminals ，ptys）\n"),a("ul",[a("li",[s._v("：用于模拟终端操作的进程。比如在桌面上打开的终端、通过 SSH 登录的终端。")]),s._v(" "),a("li",[s._v("文件名的正则表达式为 "),a("code",[s._v("/dev/pts/\\d+")]),s._v(" 。")]),s._v(" "),a("li",[s._v("例如，假设通过 SSH 登录。执行 w 命令，查询到当前终端为 pts/0 。然后执行以下命令："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo Hello > /dev/stdout    # 将输出重定向到 stdout ，这会输出到当前终端")]),s._v("\nHello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo Hello > /dev/tty       # 将输出重定向到当前终端")]),s._v("\nHello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo Hello > /dev/tty1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo Hello > /dev/pts/0")]),s._v("\nHello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo Hello > /dev/pts/6     # 该伪终端不存在，因此不允许重定向")]),s._v("\n-bash: /dev/pts/6: Permission denied\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("li",[s._v("通过 SSH 登录时，用户输入的 stdin 数据会先被通过 sshd 服务传给远程主机上的 shell 进程，再写入 /dev/tty 文件，最后被系统内核读取、处理。")])])]),s._v(" "),a("li",[s._v("串行端口终端（serial ports terminal）\n"),a("ul",[a("li",[s._v("：表示通过计算机串行端口连接的终端设备。")]),s._v(" "),a("li",[s._v("文件名的正则表达式为 "),a("code",[s._v("/dev/ttyS\\d+")]),s._v(" 。")]),s._v(" "),a("li",[s._v("例如，执行命令 "),a("code",[s._v('echo "Hello World" > /dev/ttyS1')]),s._v(" ，就是将数据发送到 S1 端口，相当于 DOS 系统的 COM1 。")])])])]),s._v(" "),a("h2",{attrs:{id:"相关命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关命令"}},[s._v("#")]),s._v(" 相关命令")]),s._v(" "),a("h3",{attrs:{id:"lscpu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lscpu"}},[s._v("#")]),s._v(" lscpu")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ lscpu      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示 CPU 的信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"lsmem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lsmem"}},[s._v("#")]),s._v(" lsmem")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ lsmem      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示内存的信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"lsblk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lsblk"}},[s._v("#")]),s._v(" lsblk")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ lsblk      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示系统所有的块设备")]),s._v("\n       -p    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个设备的完整路径")]),s._v("\n       -f    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示每个块设备的文件系统、UUID（通用唯一识别码）")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lsblk -p")]),s._v("\nNAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n/dev/sr0     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":0    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".5M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" rom\n/dev/vda    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   50G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" disk\n└─/dev/vda1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":1    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   50G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" part /\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("/dev/sr0 是 rom ，/dev/vda 是磁盘设备，/dev/vda1 是一个磁盘分区，挂载在/。")]),s._v(" "),a("li",[s._v("MAJ:MIN ：主设备号和次设备号。")]),s._v(" "),a("li",[s._v("RM ：是否为可卸载设备。")]),s._v(" "),a("li",[s._v("RO ：是否为只读设备。")]),s._v(" "),a("li",[s._v("TYPE ：分为磁盘(disk)、分区(partition)、只读存储器(rom)三种。")]),s._v(" "),a("li",[s._v("MOUTPOINT ：挂载点。")])])])]),s._v(" "),a("h3",{attrs:{id:"lshw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lshw"}},[s._v("#")]),s._v(" lshw")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ lshw            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有硬件设备的详细信息")]),s._v("\n      -short      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示简洁的设备列表")]),s._v("\n      -class cpu  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示 cpu 类的信息（同理可显示其它类设备）")]),s._v("\n      -json       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示成 json 格式")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("安装："),a("code",[s._v("yum install lshw")])]),s._v(" "),a("li",[s._v("需要用 root 权限执行。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);