(window.webpackJsonp=window.webpackJsonp||[]).push([[404],{737:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"进程测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程测试"}},[s._v("#")]),s._v(" 进程测试")]),s._v(" "),a("h2",{attrs:{id:"time"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time"}},[s._v("#")]),s._v(" time")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行一条命令，并统计其占用的 CPU 时长")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# time sleep 1")]),s._v("\n\nreal    0m1.001s\nuser    0m0.001s\nsys     0m0.000s\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("real time ：该命令实际的运行时长。")]),s._v(" "),a("li",[s._v("user time ：该命令占用的用户态 CPU 时长。")]),s._v(" "),a("li",[s._v("sys time ：该命令占用的内核态 CPU 时长。")]),s._v(" "),a("li",[s._v("user time 、sys time 是 CPU 多核的累计值，因此可认为该命令的 "),a("code",[s._v("占用 CPU 核数 = ( user + sys ) / real")]),s._v(" 。")])])])]),s._v(" "),a("h2",{attrs:{id:"timeout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timeout"}},[s._v("#")]),s._v(" timeout")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("duration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以子进程的形式执行一条命令，并限制其运行时长，超时之后则终止命令")]),s._v("\n      -s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("signal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --signal ，超时时发送的信号，默认为 SIGTERM")]),s._v("\n      -k "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("duration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --kill-after ，发送 signal 信号之后，最多等待 duration 时长，如果进程依然运行，则发送 SIGKILL 信号")]),s._v("\n      --preserve-status         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果超时，timeout 命令的退出码默认为 124 。启用该参数，则会让退出码与目标命令一致")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("duration 是浮点数，单位可以是 s、m、h、d ，默认为 s 即秒。\n"),a("ul",[a("li",[s._v("如果设置为 0 ，则不限制。")])])]),s._v(" "),a("li",[s._v("如果目标命令在 duration 之前结束，则 timeout 命令的退出码与该命令一致。")]),s._v(" "),a("li",[s._v("例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".5s "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" localhost\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"strace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strace"}},[s._v("#")]),s._v(" strace")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("strace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行一条命令并跟踪它")]),s._v("\n       -c                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 统计每种系统调用的次数、用时")]),s._v("\n       -e read,write,open "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示某些系统调用的信息")]),s._v("\n       -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("trace")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示某类系统调用的信息")]),s._v("\n       -tt                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在每行的开头显示时间")]),s._v("\n       -T                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在每行的末尾显示这次系统调用的耗时，比如<0.000007>")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("strace")]),s._v(" -p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跟踪一个进程")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@CentOS ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# strace -e trace=file echo hello")]),s._v("\nexecve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/echo"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/* "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" vars */"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naccess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/ld.so.preload"')]),s._v(", R_OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" -1 ENOENT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nopen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/ld.so.cache"')]),s._v(", O_RDONLY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("O_CLOEXEC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nopen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/lib64/libc.so.6"')]),s._v(", O_RDONLY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("O_CLOEXEC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nopen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/lib/locale/locale-archive"')]),s._v(", O_RDONLY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("O_CLOEXEC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nhello\n+++ exited with "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" +++\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"watch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#watch"}},[s._v("#")]),s._v(" watch")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 周期性地执行一条命令，显示其 stdout 和 stderr")]),s._v("\n      -d          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果输出与上一次执行不同，则将差异部分高亮显示")]),s._v("\n      -e          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果命令的返回码不为 0 ，则停止执行")]),s._v("\n      -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每隔几秒执行一次（默认是 2 秒）")]),s._v("\n      -t          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不显示 watch 窗口的标题")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("例："),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" -d -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" localhost\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);