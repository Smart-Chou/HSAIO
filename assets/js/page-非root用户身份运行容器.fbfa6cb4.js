(window.webpackJsonp=window.webpackJsonp||[]).push([[421],{1054:function(s,n,a){"use strict";a.r(n);var t=a(1),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),a("p",[s._v("官方wiki已删除此页面")])]),s._v(" "),a("p",[s._v("默认情况下，"),a("code",[s._v("vaultwarden/server")]),s._v(" 使用 root 用户在容器内运行服务。如果您希望以非 root 用户身份运行容器，您需要设置以下几点：")]),s._v(" "),a("ol",[a("li",[s._v("确保安装在容器内的目录可由用户写入。例如，如果您决定以 "),a("code",[s._v("nobody")]),s._v(" 身份运行，则该目录需要 id 为 65534 的用户可写。有关在容器内指定用户的其他方法，请参阅 "),a("a",{attrs:{href:"https://docs.docker.com/engine/reference/run/#user",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker 文档"),a("OutboundLink")],1),s._v("，在我们的示例中，我们将使用 "),a("code",[s._v("nobody")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在主机上创建目录，将其更改为您首选的路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /vw-data\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用用户ID设置所有者。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请注意，所有权必须与 /etc/passwd *inside* 容器中的用户匹配，而不是在您的主机上")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65534")]),s._v(" /vw-data\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋予所有者对该文件夹的完全权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+rwx /vw-data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("使用适当的参数启动容器。定义用户并确保从设置为"),a("code",[s._v("1024")]),s._v("或更高的端口开始")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --name vaultwarden "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user nobody "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ROCKET_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v /vw-data/:/data/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":1024 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  vaultwarden/server:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("请注意，端口映射("),a("code",[s._v("-p 80:1024")]),s._v(")反映了 "),a("code",[s._v("ROCKET_PORT")]),s._v(" 设置。")])])}),[],!1,null,null,null);n.default=e.exports}}]);